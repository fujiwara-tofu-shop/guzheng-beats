(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const lo="strudel.log";let C9=1e3,rc,ic;function Fr(e,t="cyclist"){yt(`[${t}] error: ${e.message}`)}function yt(e,t,n={}){let s=performance.now();rc===e&&s-ic<C9||(rc=e,ic=s,console.log(`%c${e}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(lo,{detail:{message:e,type:t,data:n}})))}yt.key=lo;typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const le=BigInt(0),ve=BigInt(1),fr=BigInt(2),Aa=BigInt(5),Rt=BigInt(10),P9=2e3,q={s:ve,n:le,d:ve};function Sn(e,t){try{e=BigInt(e)}catch{throw Kn()}return e*t}function en(e){return typeof e=="bigint"?e:Math.floor(e)}function tt(e,t){if(t===le)throw po();const n=Object.create(Je.prototype);n.s=e<le?-ve:ve,e=e<le?-e:e;const s=is(e,t);return n.n=e/s,n.d=t/s,n}function Zs(e){const t={};let n=e,s=fr,r=Aa-ve;for(;r<=n;){for(;n%s===le;)n/=s,t[s]=(t[s]||le)+ve;r+=ve+fr*s++}return n!==e?n>1&&(t[n]=(t[n]||le)+ve):t[e]=(t[e]||le)+ve,t}const mt=function(e,t){let n=le,s=ve,r=ve;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Kn();if(e%1!==0)throw ac();n=BigInt(e)}if(typeof t=="bigint")s=t;else{if(isNaN(t))throw Kn();if(t%1!==0)throw ac();s=BigInt(t)}r=n*s}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),s=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(s=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw Kn();r=n*s}else if(typeof e=="number"){if(isNaN(e))throw Kn();if(e<0&&(r=-ve,e=-e),e%1===0)n=BigInt(e);else if(e>0){let i=1,a=0,o=1,u=1,c=1,h=1e7;for(e>=1&&(i=10**Math.floor(1+Math.log10(e)),e/=i);o<=h&&c<=h;){let d=(a+u)/(o+c);if(e===d){o+c<=h?(n=a+u,s=o+c):c>o?(n=u,s=c):(n=a,s=o);break}else e>d?(a+=u,o+=c):(u+=a,c+=o),o>h?(n=u,s=c):(n=a,s=o)}n=BigInt(n)*BigInt(i),s=BigInt(s)}}else if(typeof e=="string"){let i=0,a=le,o=le,u=le,c=ve,h=ve,d=e.replace(/_/g,"").match(/\d+|./g);if(d===null)throw Kn();if(d[i]==="-"?(r=-ve,i++):d[i]==="+"&&i++,d.length===i+1?o=Sn(d[i++],r):d[i+1]==="."||d[i]==="."?(d[i]!=="."&&(a=Sn(d[i++],r)),i++,(i+1===d.length||d[i+1]==="("&&d[i+3]===")"||d[i+1]==="'"&&d[i+3]==="'")&&(o=Sn(d[i],r),c=Rt**BigInt(d[i].length),i++),(d[i]==="("&&d[i+2]===")"||d[i]==="'"&&d[i+2]==="'")&&(u=Sn(d[i+1],r),h=Rt**BigInt(d[i+1].length)-ve,i+=3)):d[i+1]==="/"||d[i+1]===":"?(o=Sn(d[i],r),c=Sn(d[i+2],ve),i+=3):d[i+3]==="/"&&d[i+1]===" "&&(a=Sn(d[i],r),o=Sn(d[i+2],r),c=Sn(d[i+4],ve),i+=5),d.length<=i)s=c*h,r=n=u+s*a+h*o;else throw Kn()}else if(typeof e=="bigint")n=e,r=e,s=ve;else throw Kn();if(s===le)throw po();q.s=r<le?-ve:ve,q.n=n<le?-n:n,q.d=s<le?-s:s};function v9(e,t,n){let s=ve;for(;t>le;e=e*e%n,t>>=ve)t&ve&&(s=s*e%n);return s}function X9(e,t){for(;t%fr===le;t/=fr);for(;t%Aa===le;t/=Aa);if(t===ve)return le;let n=Rt%t,s=1;for(;n!==ve;s++)if(n=n*Rt%t,s>P9)return le;return BigInt(s)}function w9(e,t,n){let s=ve,r=v9(Rt,n,t);for(let i=0;i<300;i++){if(s===r)return BigInt(i);s=s*Rt%t,r=r*Rt%t}return 0}function is(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function Je(e,t){if(mt(e,t),this instanceof Je)e=is(q.d,q.n),this.s=q.s,this.n=q.n/e,this.d=q.d/e;else return tt(q.s*q.n,q.d)}var po=function(){return new Error("Division by Zero")},Kn=function(){return new Error("Invalid argument")},ac=function(){return new Error("Parameters must be integer")};Je.prototype={s:ve,n:le,d:ve,abs:function(){return tt(this.n,this.d)},neg:function(){return tt(-this.s*this.n,this.d)},add:function(e,t){return mt(e,t),tt(this.s*this.n*q.d+q.s*this.d*q.n,this.d*q.d)},sub:function(e,t){return mt(e,t),tt(this.s*this.n*q.d-q.s*this.d*q.n,this.d*q.d)},mul:function(e,t){return mt(e,t),tt(this.s*q.s*this.n*q.n,this.d*q.d)},div:function(e,t){return mt(e,t),tt(this.s*q.s*this.n*q.d,this.d*q.n)},clone:function(){return tt(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return tt(this.s*this.n%this.d,ve);if(mt(e,t),le===q.n*this.d)throw po();return tt(this.s*(q.d*this.n)%(q.n*this.d),q.d*this.d)},gcd:function(e,t){return mt(e,t),tt(is(q.n,this.n)*is(q.d,this.d),q.d*this.d)},lcm:function(e,t){return mt(e,t),q.n===le&&this.n===le?tt(le,ve):tt(q.n*this.n,is(q.n,this.n)*is(q.d,this.d))},inverse:function(){return tt(this.s*this.d,this.n)},pow:function(e,t){if(mt(e,t),q.d===ve)return q.s<le?tt((this.s*this.d)**q.n,this.n**q.n):tt((this.s*this.n)**q.n,this.d**q.n);if(this.s<le)return null;let n=Zs(this.n),s=Zs(this.d),r=ve,i=ve;for(let a in n)if(a!=="1"){if(a==="0"){r=le;break}if(n[a]*=q.n,n[a]%q.d===le)n[a]/=q.d;else return null;r*=BigInt(a)**n[a]}for(let a in s)if(a!=="1"){if(s[a]*=q.n,s[a]%q.d===le)s[a]/=q.d;else return null;i*=BigInt(a)**s[a]}return q.s<le?tt(i,r):tt(r,i)},log:function(e,t){if(mt(e,t),this.s<=le||q.s<=le)return null;const n={},s=Zs(q.n),r=Zs(q.d),i=Zs(this.n),a=Zs(this.d);for(const c in r)s[c]=(s[c]||le)-r[c];for(const c in a)i[c]=(i[c]||le)-a[c];for(const c in s)c!=="1"&&(n[c]=!0);for(const c in i)c!=="1"&&(n[c]=!0);let o=null,u=null;for(const c in n){const h=s[c]||le,d=i[c]||le;if(h===le){if(d!==le)return null;continue}let m=d,g=h;const y=is(m,g);if(m/=y,g/=y,o===null&&u===null)o=m,u=g;else if(m*u!==o*g)return null}return o!==null&&u!==null?tt(o,u):null},equals:function(e,t){return mt(e,t),this.s*this.n*q.d===q.s*q.n*this.d},lt:function(e,t){return mt(e,t),this.s*this.n*q.d<q.s*q.n*this.d},lte:function(e,t){return mt(e,t),this.s*this.n*q.d<=q.s*q.n*this.d},gt:function(e,t){return mt(e,t),this.s*this.n*q.d>q.s*q.n*this.d},gte:function(e,t){return mt(e,t),this.s*this.n*q.d>=q.s*q.n*this.d},compare:function(e,t){mt(e,t);let n=this.s*this.n*q.d-q.s*q.n*this.d;return(le<n)-(n<le)},ceil:function(e){return e=Rt**BigInt(e||0),tt(en(this.s*e*this.n/this.d)+(e*this.n%this.d>le&&this.s>=le?ve:le),e)},floor:function(e){return e=Rt**BigInt(e||0),tt(en(this.s*e*this.n/this.d)-(e*this.n%this.d>le&&this.s<le?ve:le),e)},round:function(e){return e=Rt**BigInt(e||0),tt(en(this.s*e*this.n/this.d)+this.s*((this.s>=le?ve:le)+fr*(e*this.n%this.d)>this.d?ve:le),e)},roundTo:function(e,t){mt(e,t);const n=this.n*q.d,s=this.d*q.n,r=n%s;let i=en(n/s);return r+r>=s&&i++,tt(this.s*i*q.n,q.d)},divisible:function(e,t){return mt(e,t),!(!(q.n*this.d)||this.n*q.d%(q.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let s=X9(t,n),r=w9(t,n,s),i=this.s<le?"-":"";if(i+=en(t/n),t%=n,t*=Rt,t&&(i+="."),s){for(let a=r;a--;)i+=en(t/n),t%=n,t*=Rt;i+="(";for(let a=s;a--;)i+=en(t/n),t%=n,t*=Rt;i+=")"}else for(let a=e;t&&a--;)i+=en(t/n),t%=n,t*=Rt;return i},toFraction:function(e){let t=this.n,n=this.d,s=this.s<le?"-":"";if(n===ve)s+=t;else{let r=en(t/n);e&&r>le&&(s+=r,s+=" ",t%=n),s+=t,s+="/",s+=n}return s},toLatex:function(e){let t=this.n,n=this.d,s=this.s<le?"-":"";if(n===ve)s+=t;else{let r=en(t/n);e&&r>le&&(s+=r,t%=n),s+="\\frac{",s+=t,s+="}{",s+=n,s+="}"}return s},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(en(e/t));let s=e%t;e=t,t=s}while(e!==ve);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),s=n.toContinued();for(let r=1;r<s.length;r++){let i=tt(s[r-1],ve);for(let o=r-2;o>=0;o--)i=i.inverse().add(s[o]);let a=i.sub(n);if(a.n*t<a.d)return i.mul(this.s)}return this}};const Z9=e=>/^[a-gA-G][#bsf]*[0-9]*$/.test(e),ys=e=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(e),Il=e=>{if(typeof e!="string")return[];const[t,n="",s]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return t?[t,n,s?Number(s):void 0]:[]},F9={c:0,d:2,e:4,f:5,g:7,a:9,b:11},A9={"#":1,b:-1,s:1,f:-1},ho=e=>e?.split("").reduce((t,n)=>t+A9[n],0)||0,gn=(e,t=3)=>{const[n,s,r=t]=Il(e);if(!n)throw new Error('not a note: "'+e+'"');const i=F9[n.toLowerCase()],a=ho(s);return(Number(r)+1)*12+i+a},Es=e=>Math.pow(2,(e-69)/12)*440,mo=e=>12*Math.log(e/440)/Math.LN2+69,D9=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=e;if(typeof n=="number")return mo(n);if(typeof s=="string")return gn(s);if(typeof s=="number")return s;if(!t)throw new Error("valueToMidi: expected freq or note to be set");return t},S9=(e,t)=>(e-t)*1e3,Yl=e=>Es(typeof e=="number"?e:gn(e)),L9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],E9=e=>{const t=Math.floor(e/12)-1;return L9[e%12]+t},Ut=(e,t)=>(e%t+t)%t,Hl=e=>e.reduce((t,n)=>t+n)/e.length;function Kl(e,t=0){return isNaN(Number(e))?(yt(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const R9=(e,t)=>Ut(Math.round(Kl(e??0,0)),t),k9=e=>{let{value:t,context:n}=e,s=t;if(typeof s=="object"&&!Array.isArray(s)&&(s=s.note||s.n||s.value,s===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(t)}`);if(typeof s=="number"&&n.type!=="frequency")s=Es(e.value);else if(typeof s=="number"&&n.type==="frequency")s=e.value;else if(typeof s!="string"||!ys(s))throw new Error("not a note: "+JSON.stringify(s));return s},_l=e=>{let{value:t,context:n}=e;if(typeof t=="object")return t.freq?t.freq:Yl(t.note||t.n||t.value);if(typeof t=="number"&&n.type!=="frequency")t=Es(e.value);else if(typeof t=="string"&&ys(t))t=Es(gn(e.value));else if(typeof t!="number")throw new Error("not a note or frequency: "+t);return t},jl=(e,t)=>e.slice(t).concat(e.slice(0,t)),Ul=(...e)=>e.reduce((t,n)=>(...s)=>t(n(...s)),t=>t),V9=(...e)=>Ul(...e.reverse()),gs=e=>e.filter(t=>t!=null),En=e=>[].concat(...e),As=e=>e,z9=(e,t)=>e,Ar=(e,t)=>Array.from({length:t-e+1},(n,s)=>s+e);function Xe(e,t,n=e.length){const s=function r(...i){if(i.length>=n)return e.apply(this,i);{const a=function(...o){return r.apply(this,i.concat(o))};return t&&t(a,i),a}};return t&&t(s,[]),s}function fo(e){const t=Number(e);if(!isNaN(t))return t;if(ys(e))return gn(e);throw new Error(`cannot parse as numeral: "${e}"`)}function yo(e,t){return(...n)=>e(...n.map(t))}function Bt(e){return yo(e,fo)}function Jl(e){const t=Number(e);if(!isNaN(t))return t;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[e];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${e}"`)}const B9=e=>yo(e,Jl),go=function(e,t){return[t.slice(0,e),t.slice(e)]},xi=(e,t,n)=>t.map((s,r)=>e(s,n[r])),Ol=function(e){const t=[];for(let n=0;n<e.length-1;++n)t.push([e[n],e[n+1]]);return t},Gi=(e,t,n)=>Math.min(Math.max(e,t),n),W9=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],N9=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],T9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],I9=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],Y9=["I","Ro","Ha","Ni","Ho","He","To"],H9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],K9=(e,t="letters")=>{const n=(t==="solfeggio"?W9:t==="indian"?N9:t==="german"?T9:t==="byzantine"?I9:t==="japanese"?Y9:H9)[e%12],s=Math.floor(e/12)-1;return n+s};function _9(e){var t={};return e.filter(function(n){return t.hasOwn(n)?!1:t[n]=!0})}function j9(e){return e.sort().filter(function(t,n,s){return!n||t!=s[n-1]})}function Ql(e){return e.sort((t,n)=>t.compare(n)).filter(function(t,n,s){return!n||t.ne(s[n-1])})}function ql(e){const t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...t))}function $l(e){const t=new Uint8Array(atob(e).split("").map(n=>n.charCodeAt(0)));return new TextDecoder().decode(t)}function U9(e){return encodeURIComponent(ql(e))}function J9(e){return $l(decodeURIComponent(e))}function ep(e,t){return Array.isArray(e)?e.map(t):Object.fromEntries(Object.entries(e).map(([n,s],r)=>[n,t(s,n,r)]))}function Da(e,t){return e/t}class tp{constructor({getTargetClockTime:t=Q9,weight:n=16,offsetDelta:s=.005,checkAfterTime:r=2,resetAfterTime:i=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=t,this.weight=n,this.offsetDelta=s,this.checkAfterTime=r,this.resetAfterTime=i,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(t){const n=this.getTargetClockTime(),s=n-this.timeAtPrevOffsetSample,r=n-t;if(s>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=r),this.prevOffsetTimes.push(r),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||s>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const i=Hl(this.prevOffsetTimes);Math.abs(i-this.offsetTime)>this.offsetDelta&&(this.offsetTime=i)}return this.offsetTime}calculateTimestamp(t,n){return this.calculateOffset(t)+n}}function O9(){return performance.now()*.001}function Q9(){return Date.now()*.001}const np=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let tr;function sp(){if(tr==null){if(typeof window>"u")return;tr={},window.addEventListener("keydown",e=>{tr[e.key]=!0}),window.addEventListener("keyup",e=>{tr[e.key]=!1})}return{...tr}}function bo(e,t=!1){return typeof e=="object"?t?JSON.stringify(e).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(e):e}Je.prototype.sam=function(){return this.floor()};Je.prototype.nextSam=function(){return this.sam().add(1)};Je.prototype.wholeCycle=function(){return new ot(this.sam(),this.nextSam())};Je.prototype.cyclePos=function(){return this.sub(this.sam())};Je.prototype.lt=function(e){return this.compare(e)<0};Je.prototype.gt=function(e){return this.compare(e)>0};Je.prototype.lte=function(e){return this.compare(e)<=0};Je.prototype.gte=function(e){return this.compare(e)>=0};Je.prototype.eq=function(e){return this.compare(e)==0};Je.prototype.ne=function(e){return this.compare(e)!=0};Je.prototype.max=function(e){return this.gt(e)?this:e};Je.prototype.maximum=function(...e){return e=e.map(t=>new Je(t)),e.reduce((t,n)=>n.max(t),this)};Je.prototype.min=function(e){return this.lt(e)?this:e};Je.prototype.mulmaybe=function(e){return e!==void 0?this.mul(e):void 0};Je.prototype.divmaybe=function(e){return e!==void 0?this.div(e):void 0};Je.prototype.addmaybe=function(e){return e!==void 0?this.add(e):void 0};Je.prototype.submaybe=function(e){return e!==void 0?this.sub(e):void 0};Je.prototype.show=function(){return this.s*this.n+"/"+this.d};Je.prototype.or=function(e){return this.eq(0)?e:this};const U=e=>Je(e),q9=(...e)=>{if(e=gs(e),e.length!==0)return e.reduce((t,n)=>t.gcd(n),U(1))},rn=(...e)=>{if(e=gs(e),e.length===0)return;const t=e.pop();return e.reduce((n,s)=>n===void 0||s===void 0?void 0:n.lcm(s),t)},$9=e=>e instanceof Je;U._original=Je;class ot{constructor(t,n){this.begin=U(t),this.end=U(n)}get spanCycles(){const t=[];var n=this.begin;const s=this.end,r=s.sam();if(n.equals(s))return[new ot(n,s)];for(;s.gt(n);){if(n.sam().equals(r)){t.push(new ot(n,this.end));break}const i=n.nextSam();t.push(new ot(n,i)),n=i}return t}get duration(){return this.end.sub(this.begin)}cycleArc(){const t=this.begin.cyclePos(),n=t.add(this.duration);return new ot(t,n)}withTime(t){return new ot(t(this.begin),t(this.end))}withEnd(t){return new ot(this.begin,t(this.end))}withCycle(t){const n=this.begin.sam(),s=n.add(t(this.begin.sub(n))),r=n.add(t(this.end.sub(n)));return new ot(s,r)}intersection(t){const n=this.begin.max(t.begin),s=this.end.min(t.end);if(!n.gt(s)&&!(n.equals(s)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(t.end)&&t.begin.lt(t.end))))return new ot(n,s)}intersection_e(t){const n=this.intersection(t);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(U(2)))}equals(t){return this.begin.equals(t.begin)&&this.end.equals(t.end)}show(){return this.begin.show()+" → "+this.end.show()}}class qe{constructor(t,n,s,r={},i=!1){this.whole=t,this.part=n,this.value=s,this.context=r,this.stateful=i,i&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let t;return typeof this.value?.duration=="number"?t=U(this.value.duration):t=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?t.mul(this.value.clip):t}get endClipped(){return this.whole.begin.add(this.duration)}isActive(t){return this.whole.begin<=t&&this.endClipped>=t}isInPast(t){return t>this.endClipped}isInNearPast(t,n){return n-t<=this.endClipped}isInFuture(t){return t<this.whole.begin}isInNearFuture(t,n){return n<this.whole.begin&&n>this.whole.begin-t}isWithinTime(t,n){return this.whole.begin<=n&&this.endClipped>=t}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(t){const n=this.whole?t(this.whole):void 0;return new qe(n,t(this.part),this.value,this.context)}withValue(t){return new qe(this.whole,this.part,t(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(t){return this.context.tags?.includes(t)}resolveState(t){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[s,r]=n(t);return[s,new qe(this.whole,this.part,r,this.context,!1)]}return[t,this]}spanEquals(t){return this.whole==null&&t.whole==null||this.whole.equals(t.whole)}equals(t){return this.spanEquals(t)&&this.part.equals(t.part)&&this.value===t.value}show(t=!1){const n=typeof this.value=="object"?t?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var s="";if(this.whole==null)s="~"+this.part.show;else{var r=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(s=this.whole.begin.show()+" ⇜ "),r||(s+="("),s+=this.part.show(),r||(s+=")"),this.whole.end.equals(this.part.end)||(s+=" ⇝ "+this.whole.end.show())}return"[ "+s+" | "+n+" ]"}showWhole(t=!1){return`${this.whole==null?"~":this.whole.show()}: ${bo(this.value,t)}`}combineContext(t){const n=this;return{...n.context,...t.context,locations:(n.context.locations||[]).concat(t.context.locations||[])}}setContext(t){return new qe(this.whole,this.part,this.value,t)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class Rs{constructor(t,n={}){this.span=t,this.controls=n}setSpan(t){return new Rs(t,this.controls)}withSpan(t){return this.setSpan(t(this.span))}setControls(t){return new Rs(this.span,{...this.controls,...t})}}function eG(e,t,n){if(t?.value!==void 0&&Object.keys(t).length===1)return yt("[warn]: Can't do arithmetic on control pattern."),e;const s=Object.keys(e).filter(r=>Object.keys(t).includes(r));return Object.assign({},e,t,Object.fromEntries(s.map(r=>[r,n(e[r],t[r])])))}Xe((e,t)=>e*t);Xe((e,t)=>t.map(e));function rp(e,t=60){let n=0,s=U(0),r=[""],i="";for(;r[0].length<t;){const a=e.queryArc(n,n+1),o=a.filter(h=>h.hasOnset()).map(h=>h.duration),u=q9(...o),c=u.inverse();r=r.map(h=>h+"|"),i+="|";for(let h=0;h<c;h++){const[d,m]=[s,s.add(u)],g=a.filter(G=>G.whole.begin.lte(d)&&G.whole.end.gte(m)),y=g.length-r.length;y>0&&(r=r.concat(Array(y).fill(i))),r=r.map((G,X)=>{const D=g[X];if(D){const L=D.whole.begin.eq(d)?""+D.value:"-";return G+L}return G+"."}),i+=".",s=s.add(u)}n++}return r.join(`
`)}const Mo={},oi=async(...e)=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="fulfilled").map(s=>s.value);return t.forEach((s,r)=>{s.status==="rejected"&&console.warn(`evalScope: module with index ${r} could not be loaded:`,s.reason)}),n.forEach(s=>{Object.entries(s).forEach(([r,i])=>{globalThis[r]=i,Mo[r]=i})}),n};function tG(e,t={}){const{wrapExpression:n=!0,wrapAsync:s=!0}=t;n&&(e=`{${e}}`),s&&(e=`(async ()=>${e})()`);const r=`"use strict";return (${e})`;return Function(r)()}const ip=async(e,t,n)=>{let s={};if(t){const r=t(e,n);e=r.output,s=r}return{mode:"javascript",pattern:await tG(e,{wrapExpression:!!t}),meta:s}};let Sa,Tt=!0;const nG=function(e){Tt=!!e},ap=e=>Sa=e;let H=class ft{constructor(t,n=void 0){this.query=t,this._Pattern=!0,this._steps=n}get _steps(){return this.__steps}set _steps(t){this.__steps=t===void 0?void 0:U(t)}setSteps(t){return this._steps=t,this}withSteps(t){return Tt?new ft(this.query,this._steps===void 0?void 0:t(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(t){const n=new ft(s=>this.query(s).map(r=>r.withValue(t)));return n._steps=this._steps,n}withState(t){return new ft(n=>this.query(t(n)))}fmap(t){return this.withValue(t)}appWhole(t,n){const s=this,r=function(i){const a=s.query(i),o=n.query(i),u=function(c,h){const d=c.part.intersection(h.part);if(d!=null)return new qe(t(c.whole,h.whole),d,c.value(h.value),h.combineContext(c))};return En(a.map(c=>gs(o.map(h=>u(c,h)))))};return new ft(r)}appBoth(t){const n=this,s=function(i,a){if(!(i==null||a==null))return i.intersection_e(a)},r=n.appWhole(s,t);return Tt&&(r._steps=rn(t._steps,n._steps)),r}appLeft(t){const n=this,s=function(i){const a=[];for(const o of n.query(i)){const u=t.query(i.setSpan(o.wholeOrPart()));for(const c of u){const h=o.whole,d=o.part.intersection(c.part);if(d){const m=o.value(c.value),g=c.combineContext(o),y=new qe(h,d,m,g);a.push(y)}}}return a},r=new ft(s);return r._steps=this._steps,r}appRight(t){const n=this,s=function(i){const a=[];for(const o of t.query(i)){const u=n.query(i.setSpan(o.wholeOrPart()));for(const c of u){const h=o.whole,d=c.part.intersection(o.part);if(d){const m=c.value(o.value),g=o.combineContext(c),y=new qe(h,d,m,g);a.push(y)}}}return a},r=new ft(s);return r._steps=t._steps,r}bindWhole(t,n){const s=this,r=function(i){const a=function(u,c){return new qe(t(u.whole,c.whole),c.part,c.value,Object.assign({},u.context,c.context,{locations:(u.context.locations||[]).concat(c.context.locations||[])}))},o=function(u){return n(u.value).query(i.setSpan(u.part)).map(c=>a(u,c))};return En(s.query(i).map(u=>o(u)))};return new ft(r)}bind(t){const n=function(s,r){if(!(s==null||r==null))return s.intersection_e(r)};return this.bindWhole(n,t)}join(){return this.bind(As)}outerBind(t){return this.bindWhole(n=>n,t).setSteps(this._steps)}outerJoin(){return this.outerBind(As)}innerBind(t){return this.bindWhole((n,s)=>s,t)}innerJoin(){return this.innerBind(As)}resetJoin(t=!1){const n=this;return new ft(s=>n.discreteOnly().query(s).map(r=>r.value.late(t?r.whole.begin:r.whole.begin.cyclePos()).query(s).map(i=>new qe(i.whole?i.whole.intersection(r.whole):void 0,i.part.intersection(r.part),i.value).setContext(r.combineContext(i))).filter(i=>i.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const t=this;function n(s){const r=t.discreteOnly().query(s);function i(a){const o=a.value._focusSpan(a.wholeOrPart()).query(s.setSpan(a.part));function u(c,h){let d;if(h.whole&&c.whole&&(d=h.whole.intersection(c.whole),!d))return;const m=h.part.intersection(c.part);if(!m)return;const g=h.combineContext(c);return new qe(d,m,h.value,g)}return o.map(c=>u(a,c))}return En(r.map(i)).filter(a=>a)}return new ft(n)}squeezeBind(t){return this.fmap(t).squeezeJoin()}polyJoin=function(){const t=this;return t.fmap(n=>n.extend(t._steps.div(n._steps))).outerJoin()};polyBind(t){return this.fmap(t).polyJoin()}queryArc(t,n,s={}){try{return this.query(new Rs(new ot(t,n),s))}catch(r){return Fr(r,"query"),[]}}splitQueries(){const t=this,n=s=>En(s.span.spanCycles.map(r=>t.query(s.setSpan(r))));return new ft(n)}withQuerySpan(t){return new ft(n=>this.query(n.withSpan(t)))}withQuerySpanMaybe(t){const n=this;return new ft(s=>{const r=s.withSpan(t);return r.span?n.query(r):[]})}withQueryTime(t){return new ft(n=>this.query(n.withSpan(s=>s.withTime(t))))}withHapSpan(t){return new ft(n=>this.query(n).map(s=>s.withSpan(t)))}withHapTime(t){return this.withHapSpan(n=>n.withTime(t))}withHaps(t){const n=new ft(s=>t(this.query(s),s));return n._steps=this._steps,n}withHap(t){return this.withHaps(n=>n.map(t))}setContext(t){return this.withHap(n=>n.setContext(t))}withContext(t){const n=this.withHap(s=>s.setContext(t(s.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(t=>t.setContext({}))}withLoc(t,n){const s={start:t,end:n},r=this.withContext(i=>{const a=(i.locations||[]).concat([s]);return{...i,locations:a}});return this.__pure&&(r.__pure=this.__pure,r.__pure_loc=s),r}filterHaps(t){return new ft(n=>this.query(n).filter(t))}filterValues(t){return new ft(n=>this.query(n).filter(s=>t(s.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(t=>t!=null)}onsetsOnly(){return this.filterHaps(t=>t.hasOnset())}discreteOnly(){return this.filterHaps(t=>t.whole)}defragmentHaps(){return this.discreteOnly().withHaps(t=>{const n=[];for(var s=0;s<t.length;++s){for(var r=!0,i=t[s];r;){const u=JSON.stringify(t[s].value);for(var a=!1,o=s+1;o<t.length;o++){const c=t[o];if(i.whole.equals(c.whole)){if(i.part.begin.eq(c.part.end)){if(u===JSON.stringify(c.value)){i=new qe(i.whole,new ot(c.part.begin,i.part.end),i.value),t.splice(o,1),a=!0;break}}else if(c.part.begin.eq(i.part.end)&&u==JSON.stringify(c.value)){i=new qe(i.whole,new ot(i.part.begin,c.part.end),i.value),t.splice(o,1),a=!0;break}}}r=a}n.push(i)}return n})}firstCycle(t=!1){var n=this;return t||(n=n.stripContext()),n.query(new Rs(new ot(U(0),U(1))))}get firstCycleValues(){return this.firstCycle().map(t=>t.value)}get showFirstCycle(){return this.firstCycle().map(t=>`${t.value}: ${t.whole.begin.toFraction()} - ${t.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(t=>t.sort((n,s)=>n.part.begin.sub(s.part.begin).or(n.part.end.sub(s.part.end)).or(n.whole.begin.sub(s.whole.begin).or(n.whole.end.sub(s.whole.end)))))}asNumber(){return this.fmap(fo)}_opIn(t,n){return this.fmap(n).appLeft(j(t))}_opOut(t,n){return this.fmap(n).appRight(j(t))}_opMix(t,n){return this.fmap(n).appBoth(j(t))}_opSqueeze(t,n){const s=j(t);return this.fmap(r=>s.fmap(i=>n(r)(i))).squeezeJoin()}_opSqueezeOut(t,n){const s=this;return j(t).fmap(r=>s.fmap(i=>n(i)(r))).squeezeJoin()}_opReset(t,n){return j(t).fmap(s=>this.fmap(r=>n(r)(s))).resetJoin()}_opRestart(t,n){return j(t).fmap(s=>this.fmap(r=>n(r)(s))).restartJoin()}_opPoly(t,n){const s=j(t);return this.fmap(r=>s.fmap(i=>n(i)(r))).polyJoin()}layer(...t){return Te(...t.map(n=>n(this)))}superimpose(...t){return this.stack(...t.map(n=>n(this)))}stack(...t){return Te(this,...t)}sequence(...t){return cn(this,...t)}seq(...t){return cn(this,...t)}cat(...t){return yr(this,...t)}fastcat(...t){return Xt(this,...t)}slowcat(...t){return qn(this,...t)}onTrigger(t,n=!0){return this.withHap(s=>s.setContext({...s.context,onTrigger:(...r)=>{s.context.onTrigger?.(...r),t(...r)},dominantTrigger:s.context.dominantTrigger||n}))}log(t=s=>`[hap] ${s.showWhole(!0)}`,n=s=>({hap:s})){return this.onTrigger((...s)=>{yt(t(...s),void 0,n(...s))},!1)}logValues(t=n=>`[hap] ${bo(n,!0)}`){return this.log(n=>t(n.value))}drawLine(){return console.log(rp(this)),this}unjoin(t,n=As){return t.withHap(s=>s.withValue(r=>r?n(this.ribbon(s.whole.begin,s.whole.duration)):this))}into(t,n){return this.unjoin(t,n).innerJoin()}};function sG(e,t){let n=[];return t.forEach(s=>{const r=n.findIndex(([i])=>e(s,i));r===-1?n.push([s]):n[r].push(s)}),n}const rG=(e,t)=>e.spanEquals(t);H.prototype.collect=function(){return this.withHaps(e=>sG(rG,e).map(t=>new qe(t[0].whole,t[0].part,t,{})))};const iG=R("arpWith",(e,t)=>t.collect().fmap(n=>j(e(n))).innerJoin().withHap(n=>new qe(n.whole,n.part,n.value.value,n.combineContext(n.value)))),aG=R("arp",(e,t)=>t.arpWith(n=>j(e).fmap(s=>n[s%n.length])),!1);function _r(e){return!Array.isArray(e)&&typeof e=="object"&&!$9(e)}function oG(e,t,n){return _r(e)||_r(t)?(_r(e)||(e={value:e}),_r(t)||(t={value:t}),eG(e,t,n)):n(e,t)}(function(){const e={set:[(n,s)=>s],keep:[n=>n],keepif:[(n,s)=>s?n:void 0],add:[Bt((n,s)=>n+s)],sub:[Bt((n,s)=>n-s)],mul:[Bt((n,s)=>n*s)],div:[Bt((n,s)=>n/s)],mod:[Bt(Ut)],pow:[Bt(Math.pow)],log2:[Bt(Math.log2)],band:[Bt((n,s)=>n&s)],bor:[Bt((n,s)=>n|s)],bxor:[Bt((n,s)=>n^s)],blshift:[Bt((n,s)=>n<<s)],brshift:[Bt((n,s)=>n>>s)],lt:[(n,s)=>n<s],gt:[(n,s)=>n>s],lte:[(n,s)=>n<=s],gte:[(n,s)=>n>=s],eq:[(n,s)=>n==s],eqt:[(n,s)=>n===s],ne:[(n,s)=>n!=s],net:[(n,s)=>n!==s],and:[(n,s)=>n&&s],or:[(n,s)=>n||s],func:[(n,s)=>s(n)]},t=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[s,r]]of Object.entries(e)){H.prototype["_"+n]=function(i){return this.fmap(a=>s(a,i))},Object.defineProperty(H.prototype,n,{get:function(){const i=this,a=(...o)=>i[n].in(...o);for(const o of t)a[o.toLowerCase()]=function(...u){var c=i;u=cn(u),r&&(c=r(c),u=r(u));var h;return n==="keepif"?(h=c["_op"+o](u,d=>m=>s(d,m)),h=h.removeUndefineds()):h=c["_op"+o](u,d=>m=>oG(d,m,s)),h};return a.squeezein=a.squeeze,a}});for(const i of t)H.prototype[i.toLowerCase()]=function(...a){return this.set[i.toLowerCase()](a)}}H.prototype.struct=function(...n){return this.keepif.out(...n)},H.prototype.structAll=function(...n){return this.keep.out(...n)},H.prototype.mask=function(...n){return this.keepif.in(...n)},H.prototype.maskAll=function(...n){return this.keep.in(...n)},H.prototype.reset=function(...n){return this.keepif.reset(...n)},H.prototype.resetAll=function(...n){return this.keep.reset(...n)},H.prototype.restart=function(...n){return this.keepif.restart(...n)},H.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const uG=Te,cG=Te,lG=Ci,Ns=e=>new H(()=>[],e),Ye=Ns(1),un=Ns(0);function je(e){function t(s){return s.span.spanCycles.map(r=>new qe(U(r.begin).wholeCycle(),r,e))}const n=new H(t,1);return n.__pure=e,n}function xo(e){return e instanceof H||e?._Pattern}function j(e){return xo(e)?e:Sa&&typeof e=="string"?Sa(e):je(e)}function op(e){let t=je([]);for(const n of e)t=t.bind(s=>n.fmap(r=>s.concat([r])));return t}function Te(...e){e=e.map(s=>Array.isArray(s)?cn(...s):j(s));const t=s=>En(e.map(r=>r.query(s))),n=new H(t);return Tt&&(n._steps=rn(...e.map(s=>s._steps))),n}function Go(e,t){if(t=t.map(i=>Array.isArray(i)?cn(...i):j(i)),t.length===0)return Ye;if(t.length===1)return t[0];const[n,...s]=t.map(i=>i._steps),r=Tt?n.maximum(...s):void 0;return Te(...e(r,t))}function up(...e){return Go((t,n)=>n.map(s=>s._steps.eq(t)?s:kt(s,Ns(t.sub(s._steps)))),e)}function cp(...e){return Go((t,n)=>n.map(s=>s._steps.eq(t)?s:kt(Ns(t.sub(s._steps)),s)),e)}function lp(...e){return Go((t,n)=>n.map(s=>{if(s._steps.eq(t))return s;const r=Ns(t.sub(s._steps).div(2));return kt(r,s,r)}),e)}function pG(e,...t){const[n,...s]=t.map(a=>a._steps),r=n.maximum(...s),i={centre:lp,left:up,right:cp,expand:Te,repeat:(...a)=>Ci(...a).steps(r)};return e.inhabit(i).fmap(a=>a(...t)).innerJoin().setSteps(r)}function qn(...e){if(e=e.map(s=>Array.isArray(s)?Xt(...s):j(s)),e.length==1)return e[0];const t=function(s){const r=s.span,i=Ut(r.begin.sam(),e.length),a=e[i];if(!a)return[];const o=r.begin.floor().sub(r.begin.div(e.length).floor());return a.withHapTime(u=>u.add(o)).query(s.setSpan(r.withTime(u=>u.sub(o))))},n=Tt?rn(...e.map(s=>s._steps)):void 0;return new H(t).splitQueries().setSteps(n)}function Co(...e){e=e.map(j);const t=function(n){const s=Math.floor(n.span.begin)%e.length;return e[s]?.query(n)||[]};return new H(t).splitQueries()}function yr(...e){return qn(...e)}function hG(...e){const t=e.reduce((n,[s])=>n+s,0);return e=e.map(([n,s])=>[n,s.fast(n)]),kt(...e).slow(t)}function dG(...e){let t=U(0);for(let n of e)n.length==2&&n.unshift(t),t=n[1];return Te(...e.map(([n,s,r])=>je(j(r)).compress(U(n).div(t),U(s).div(t)))).slow(t).innerJoin()}function Xt(...e){let t=qn(...e);return e.length>1&&(t=t._fast(e.length),t._steps=e.length),e.length==1&&e[0].__steps_source&&(e._steps=e[0]._steps),t}function cn(...e){return Xt(...e)}function pp(...e){return Xt(...e)}function La(e){return Array.isArray(e)?e.length==0?[Ye,0]:e.length==1?La(e[0]):[Xt(...e.map(t=>La(t)[0])),e.length]:[j(e),1]}const mG=Xe((e,t)=>j(t).mask(e)),fG=Xe((e,t)=>j(t).struct(e)),yG=Xe((e,t)=>j(t).superimpose(...e)),gG=Xe((e,t)=>j(t).withValue(e)),bG=Xe((e,t)=>j(t).bind(e)),MG=Xe((e,t)=>j(t).innerBind(e)),xG=Xe((e,t)=>j(t).outerBind(e)),GG=Xe((e,t)=>j(t).squeezeBind(e)),CG=Xe((e,t)=>j(t).stepBind(e)),PG=Xe((e,t)=>j(t).polyBind(e)),vG=Xe((e,t)=>j(t).set(e)),XG=Xe((e,t)=>j(t).keep(e)),wG=Xe((e,t)=>j(t).keepif(e)),ZG=Xe((e,t)=>j(t).add(e)),FG=Xe((e,t)=>j(t).sub(e)),AG=Xe((e,t)=>j(t).mul(e)),DG=Xe((e,t)=>j(t).div(e)),SG=Xe((e,t)=>j(t).mod(e)),LG=Xe((e,t)=>j(t).pow(e)),EG=Xe((e,t)=>j(t).band(e)),RG=Xe((e,t)=>j(t).bor(e)),kG=Xe((e,t)=>j(t).bxor(e)),VG=Xe((e,t)=>j(t).blshift(e)),zG=Xe((e,t)=>j(t).brshift(e)),BG=Xe((e,t)=>j(t).lt(e)),WG=Xe((e,t)=>j(t).gt(e)),NG=Xe((e,t)=>j(t).lte(e)),TG=Xe((e,t)=>j(t).gte(e)),IG=Xe((e,t)=>j(t).eq(e)),YG=Xe((e,t)=>j(t).eqt(e)),HG=Xe((e,t)=>j(t).ne(e)),KG=Xe((e,t)=>j(t).net(e)),_G=Xe((e,t)=>j(t).and(e)),jG=Xe((e,t)=>j(t).or(e)),UG=Xe((e,t)=>j(t).func(e));function R(e,t,n=!0,s=!1,r=i=>i.innerJoin()){if(Array.isArray(e)){const u={};for(const c of e)u[c]=R(c,t,n,s,r);return u}const i=t.length;var a;n?a=function(...u){u=u.map(j);const c=u[u.length-1];let h;if(i===1)h=t(c);else{const d=u.slice(0,-1);if(d.every(m=>m.__pure!=null)){const m=d.map(y=>y.__pure),g=d.filter(y=>y.__pure_loc).map(y=>y.__pure_loc);h=t(...m,c),h=h.withContext(y=>{const G=(y.locations||[]).concat(g);return{...y,locations:G}})}else{const[m,...g]=d;let y=(...G)=>t(...G,c);y=Xe(y,null,i-1),h=r(g.reduce((G,X)=>G.appLeft(X),m.fmap(y)))}}return s&&(h._steps=c._steps),h}:a=function(...u){u=u.map(j);const c=t(...u);return s&&(c._steps=u[u.length-1]._steps),c},H.prototype[e]=function(...u){if(i===2&&u.length!==1)u=[cn(...u)];else if(i!==u.length+1)throw new Error(`.${e}() expects ${i-1} inputs but got ${u.length}.`);return u=u.map(j),a(...u,this)},i>1&&(H.prototype["_"+e]=function(...u){const c=t(...u,this);return s&&c.setSteps(this._steps),c});const o=Xe(a,null,i);return Mo[e]=o,o}function Ts(e,t,n=!0,s=!1,r=i=>i.stepJoin()){return R(e,t,n,s,r)}const JG=R("round",function(e){return e.asNumber().fmap(t=>Math.round(t))}),OG=R("floor",function(e){return e.asNumber().fmap(t=>Math.floor(t))}),QG=R("ceil",function(e){return e.asNumber().fmap(t=>Math.ceil(t))}),qG=R("toBipolar",function(e){return e.fmap(t=>t*2-1)}),$G=R("fromBipolar",function(e){return e.fmap(t=>(t+1)/2)}),eC=R("range",function(e,t,n){return n.mul(t-e).add(e)}),tC=R("rangex",function(e,t,n){return n._range(Math.log(e),Math.log(t)).fmap(Math.exp)}),nC=R("range2",function(e,t,n){return n.fromBipolar()._range(e,t)}),sC=R("ratio",e=>e.fmap(t=>Array.isArray(t)?t.slice(1).reduce((n,s)=>n/s,t[0]):t)),rC=R("compress",function(e,t,n){return e=U(e),t=U(t),e.gt(t)||e.gt(1)||t.gt(1)||e.lt(0)||t.lt(0)?Ye:n._fastGap(U(1).div(t.sub(e)))._late(e)}),{compressSpan:iC,compressspan:aC}=R(["compressSpan","compressspan"],function(e,t){return t._compress(e.begin,e.end)}),{fastGap:oC,fastgap:uC}=R(["fastGap","fastgap"],function(e,t){const n=function(r){const i=r.begin.sam(),a=r.begin.sub(i).mul(e).min(1),o=r.end.sub(i).mul(e).min(1);if(!(a>=1))return new ot(i.add(a),i.add(o))},s=function(r){const i=r.part.begin,a=r.part.end,o=i.sam(),u=i.sub(o).div(e).min(1),c=a.sub(o).div(e).min(1),h=new ot(o.add(u),o.add(c)),d=r.whole?new ot(h.begin.sub(i.sub(r.whole.begin).div(e)),h.end.add(r.whole.end.sub(a).div(e))):void 0;return new qe(d,h,r.value,r.context)};return t.withQuerySpanMaybe(n).withHap(s).splitQueries()}),cC=R("focus",function(e,t,n){return e=U(e),t=U(t),n._early(e.sam())._fast(U(1).div(t.sub(e)))._late(e)}),{focusSpan:lC,focusspan:pC}=R(["focusSpan","focusspan"],function(e,t){return t._focus(e.begin,e.end)}),hC=R("ply",function(e,t){const n=t.fmap(s=>je(s)._fast(e)).squeezeJoin();return Tt&&(n._steps=U(e).mulmaybe(t._steps)),n}),{fast:dC,density:yV}=R(["fast","density"],function(e,t){return e===0?Ye:(e=U(e),t.withQueryTime(n=>n.mul(e)).withHapTime(n=>n.div(e)).setSteps(t._steps))},!0,!0),mC=R("hurry",function(e,t){return t._fast(e).mul(je({speed:e}))}),{slow:fC,sparsity:yC}=R(["slow","sparsity"],function(e,t){return e===0?Ye:t._fast(U(1).div(e))}),gC=R("inside",function(e,t,n){return t(n._slow(e))._fast(e)}),bC=R("outside",function(e,t,n){return t(n._fast(e))._slow(e)}),MC=R("lastOf",function(e,t,n){const s=Array(e-1).fill(n);return s.push(t(n)),Co(...s)}),{firstOf:xC,every:GC}=R(["firstOf","every"],function(e,t,n){const s=Array(e-1).fill(n);return s.unshift(t(n)),Co(...s)}),CC=R("apply",function(e,t){return e(t)}),PC=R("cpm",function(e,t){return t._fast(e/60/1)}),vC=R("early",function(e,t){return e=U(e),t.withQueryTime(n=>n.add(e)).withHapTime(n=>n.sub(e))},!0,!0),hp=R("late",function(e,t){return e=U(e),t._early(U(0).sub(e))},!0,!0),XC=R("zoom",function(e,t,n){if(t=U(t),e=U(e),e.gte(t))return un;const s=t.sub(e),r=Tt?n._steps?.mulmaybe(s):void 0;return n.withQuerySpan(i=>i.withCycle(a=>a.mul(s).add(e))).withHapSpan(i=>i.withCycle(a=>a.sub(e).div(s))).splitQueries().setSteps(r)}),{zoomArc:wC,zoomarc:ZC}=R(["zoomArc","zoomarc"],function(e,t){return t.zoom(e.begin,e.end)}),FC=R("bite",(e,t,n)=>t.fmap(s=>r=>{const i=U(s).div(r).mod(1),a=i.add(U(1).div(r));return n.zoom(i,a)}).appLeft(e).squeezeJoin(),!1),AC=R("linger",function(e,t){return e==0?Ye:e<0?t._zoom(e.add(1),1)._slow(e):t._zoom(0,e)._slow(e)},!0,!0),{segment:DC,seg:SC}=R(["segment","seg"],function(e,t){return t.struct(je(!0)._fast(e)).setSteps(e)}),LC=R("swingBy",(e,t,n)=>n.inside(t,hp(pp(0,e/2)))),EC=R("swing",(e,t)=>t.swingBy(1/3,e)),{invert:RC,inv:kC}=R(["invert","inv"],function(e){return e.fmap(t=>!t)},!0,!0),VC=R("when",function(e,t,n){return e?t(n):n}),zC=R("off",function(e,t,n){return Te(n,t(n.late(e)))}),BC=R("brak",function(e){return e.when(qn(!1,!0),t=>Xt(t,Ye)._late(.25))}),dp=R("rev",function(e){const t=function(n){const s=n.span,r=s.begin.sam(),i=s.begin.nextSam(),a=function(o){const u=o.withTime(h=>r.add(i.sub(h))),c=u.begin;return u.begin=u.end,u.end=c,u};return e.query(n.setSpan(a(s))).map(o=>o.withSpan(a))};return new H(t).splitQueries()},!1,!0),WC=R("revv",function(e){const t=n=>new ot(U(0).sub(n.end),U(0).sub(n.begin));return e.withQuerySpan(t).withHapSpan(t)}),NC=R("pressBy",function(e,t){return t.fmap(n=>je(n).compress(e,1)).squeezeJoin()}),TC=R("press",function(e){return e._pressBy(.5)});H.prototype.hush=function(){return Ye};const IC=R("palindrome",function(e){return e.lastOf(2,dp)},!0,!0),{juxBy:YC,juxby:HC}=R(["juxBy","juxby"],function(e,t,n){e/=2;const s=function(a,o,u){return o in a?a[o]:u},r=n.withValue(a=>Object.assign({},a,{pan:s(a,"pan",.5)-e})),i=t(n.withValue(a=>Object.assign({},a,{pan:s(a,"pan",.5)+e})));return Te(r,i).setSteps(Tt?rn(r._steps,i._steps):void 0)}),KC=R("jux",function(e,t){return t._juxBy(1,e,t)}),{echoWith:_C,echowith:jC,stutWith:UC,stutwith:JC}=R(["echoWith","echowith","stutWith","stutwith"],function(e,t,n,s){return Te(...Ar(0,e-1).map(r=>n(s.late(U(t).mul(r)),r)))}),OC=R("echo",function(e,t,n,s){return s._echoWith(e,t,(r,i)=>r.gain(Math.pow(n,i)))}),QC=R("stut",function(e,t,n,s){return s._echoWith(e,n,(r,i)=>r.gain(Math.pow(t,i)))}),mp=R("applyN",function(e,t,n){let s=n;for(let r=0;r<e;r++)s=t(s);return s}),qC=R(["plyWith","plywith"],function(e,t,n){const s=n.fmap(r=>yr(...Ar(0,e-1).map(i=>mp(i,t,r)))._fast(e)).squeezeJoin();return Tt&&(s._steps=U(e).mulmaybe(n._steps)),s}),$C=R(["plyForEach","plyforeach"],function(e,t,n){const s=n.fmap(r=>yr(yr(je(r),...Ar(1,e-1).map(i=>t(je(r),i))))._fast(e)).squeezeJoin();return Tt&&(s._steps=U(e).mulmaybe(n._steps)),s}),Po=function(e,t,n=!1){return e=U(e),qn(...Ar(0,e.sub(1)).map(s=>n?t.late(U(s).div(e)):t.early(U(s).div(e))))},eP=R("iter",function(e,t){return Po(e,t,!1)},!0,!0),{iterBack:tP,iterback:nP}=R(["iterBack","iterback"],function(e,t){return Po(e,t,!0)},!0,!0),{repeatCycles:sP}=R("repeatCycles",function(e,t){return new H(function(n){const s=n.span.begin.sam(),r=s.div(e).sam(),i=s.sub(r);return n=n.withSpan(a=>a.withTime(o=>o.sub(i))),t.query(n).map(a=>a.withSpan(o=>o.withTime(u=>u.add(i))))}).splitQueries()},!0,!0),vo=function(e,t,n,s=!1,r=!1){const i=Array(e-1).fill(!1);i.unshift(!0);const a=Po(e,cn(...i),!s);return r||(n=n.repeatCycles(e)),n.when(a,t)},{chunk:rP,slowchunk:iP,slowChunk:aP}=R(["chunk","slowchunk","slowChunk"],function(e,t,n){return vo(e,t,n,!1,!1)},!0,!0),{chunkBack:oP,chunkback:uP}=R(["chunkBack","chunkback"],function(e,t,n){return vo(e,t,n,!0)},!0,!0),{fastchunk:cP,fastChunk:lP}=R(["fastchunk","fastChunk"],function(e,t,n){return vo(e,t,n,!1,!0)},!0,!0),{chunkinto:pP,chunkInto:hP}=R(["chunkinto","chunkInto"],function(e,t,n){return n.into(Xt(!0,...Array(e-1).fill(!1))._iterback(e),t)}),{chunkbackinto:dP,chunkBackInto:mP}=R(["chunkbackinto","chunkBackInto"],function(e,t,n){return n.into(Xt(!0,...Array(e-1).fill(!1))._iter(e)._early(1),t)}),fP=R("bypass",function(e,t){return e=!!parseInt(e),e?Ye:t},!0,!0),{ribbon:yP,rib:gP}=R(["ribbon","rib"],(e,t,n)=>n.early(e).restart(je(1).slow(t))),bP=R("hsla",(e,t,n,s,r)=>r.color(`hsla(${e}turn,${t*100}%,${n*100}%,${s})`)),MP=R("hsl",(e,t,n,s)=>s.color(`hsl(${e}turn,${t*100}%,${n*100}%)`));H.prototype.tag=function(e){return this.withContext(t=>({...t,tags:(t.tags||[]).concat([e])}))};const xP=R("filter",(e,t)=>t.withHaps(n=>n.filter(e))),GP=R("filterWhen",(e,t)=>t.filter(n=>e(n.whole.begin))),CP=R("within",(e,t,n,s)=>Te(n(s.filterWhen(r=>r.cyclePos()>=e&&r.cyclePos()<=t)),s.filterWhen(r=>r.cyclePos()<e||r.cyclePos()>t)));H.prototype.stepJoin=function(){const e=this,t=kt(...Ea(Ra(e.queryArc(0,1))))._steps,n=function(s){const r=e.early(s.span.begin.sam()).query(s.setSpan(new ot(U(0),U(1))));return kt(...Ea(Ra(r))).query(s)};return new H(n,t)};H.prototype.stepBind=function(e){return this.fmap(e).stepJoin()};function Ea(e){const t=e.filter((i,a)=>a.hasSteps).reduce((i,a)=>i.add(a),U(0)),n=gs(e.map((i,a)=>a._steps)).reduce((i,a)=>i.add(a),U(0)),s=t.eq(0)?void 0:n.div(t);function r(i,a){return a._steps===void 0?[i.mulmaybe(s),a]:[a._steps,a]}return e.map(i=>r(...i))}function Ra(e){const t=En(e.map(s=>[s.part.begin,s.part.end])),n=Ql([U(0),U(1),...t]);return Ol(n).map(s=>[s[1].sub(s[0]),Te(...fp(new ot(...s),e).map(r=>r.value.withHap(i=>i.setContext(i.combineContext(r)))))])}function fp(e,t){return gs(t.map(n=>yp(e,n)))}function yp(e,t){const n=e.intersection(t.part);if(n!=null)return new qe(t.whole,n,t.value,t.context)}const gp=R("pace",function(e,t){return t._steps===void 0?t:t._steps.eq(U(0))?un:t._fast(U(e).div(t._steps)).setSteps(e)});function bp(e,...t){const n=t.map(r=>La(r));if(n.length==0)return Ye;e==0&&(e=n[0][1]);const s=[];for(const r of n)r[1]!=0&&(e==r[1]?s.push(r[0]):s.push(r[0]._fast(U(e).div(U(r[1])))));return Te(...s)}function Ci(...e){if(Array.isArray(e[0]))return bp(0,...e);if(e=e.filter(s=>s.hasSteps),e.length==0)return Ye;const t=rn(...e.map(s=>s._steps));if(t.eq(U(0)))return un;const n=Te(...e.map(s=>s.pace(t)));return n._steps=t,n}function kt(...e){if(e.length===0)return un;const t=a=>Array.isArray(a)?a:[a._steps??1,a];if(e=e.map(t),e.find(a=>a[0]===void 0)){const a=e.map(u=>u[0]).filter(u=>u!==void 0);if(a.length===0)return Xt(...e.map(u=>u[1]));if(a.length===e.length)return un;const o=a.reduce((u,c)=>u.add(c),U(0)).div(a.length);for(let u of e)u[0]===void 0&&(u[0]=o)}if(e.length==1)return j(e[0][1]).withSteps(a=>e[0][0]);const n=e.map(a=>a[0]).reduce((a,o)=>a.add(o),U(0));let s=U(0);const r=[];for(const[a,o]of e){if(U(a).eq(0))continue;const u=s.add(a);r.push(j(o)._compress(s.div(n),u.div(n))),s=u}const i=Te(...r);return i._steps=n,i}function Mp(...e){e=e.map(r=>Array.isArray(r)?r.map(j):[j(r)]);const t=rn(...e.map(r=>U(r.length)));let n=[];for(let r=0;r<t;++r)n.push(...e.map(i=>i.length==0?Ye:i[r%i.length]));n=n.filter(r=>r.hasSteps&&r._steps>0);const s=n.reduce((r,i)=>r.add(i._steps),U(0));return n=kt(...n),n._steps=s,n}const xp=Ts("take",function(e,t){if(!t.hasSteps||t._steps.lte(0)||(e=U(e),e.eq(0)))return un;const n=e<0;n&&(e=e.abs());const s=e.div(t._steps);return s.lte(0)?un:s.gte(1)?t:n?t.zoom(U(1).sub(s),1):t.zoom(0,s)}),Gp=Ts("drop",function(e,t){return t.hasSteps?(e=U(e),e.lt(0)?t.take(t._steps.add(e)):t.take(U(0).sub(t._steps.sub(e)))):un}),Cp=Ts("extend",function(e,t){return t.fast(e).expand(e)}),PP=Ts("replicate",function(e,t){return t.repeatCycles(e).fast(e).expand(e)}),Pp=Ts("expand",function(e,t){return t.withSteps(n=>n.mul(U(e)))}),vp=Ts("contract",function(e,t){return t.withSteps(n=>n.div(U(e)))});H.prototype.shrinklist=function(e){const t=this;if(!t.hasSteps)return[t];let[n,s]=Array.isArray(e)?e:[e,t._steps];if(n=U(n),s===0||n===0)return[t];const r=n>0,i=[];if(r){const a=U(1).div(t._steps).mul(n);for(let o=0;o<s;++o){const u=a.mul(o);if(u.gt(1))break;i.push([u,1])}}else{n=U(0).sub(n);const a=U(1).div(t._steps).mul(n);for(let o=0;o<s;++o){const u=U(1).sub(a.mul(o));if(u.lt(0))break;i.push([U(0),u])}}return i.map(a=>t.zoom(...a))};const Xp=(e,t)=>t.shrinklist(e),wp=R("shrink",function(e,t){if(!t.hasSteps)return un;const n=t.shrinklist(e),s=kt(...n);return s._steps=n.reduce((r,i)=>r.add(i._steps),U(0)),s},!0,!1,e=>e.stepJoin()),vP=R("grow",function(e,t){if(!t.hasSteps)return un;const n=t.shrinklist(U(0).sub(e));n.reverse();const s=kt(...n);return s._steps=n.reduce((r,i)=>r.add(i._steps),U(0)),s},!0,!1,e=>e.stepJoin()),Zp=function(e,...t){return e.tour(...t)};H.prototype.tour=function(...e){return kt(...[].concat(...e.map((t,n)=>[...e.slice(0,e.length-n),this,...e.slice(e.length-n)]),this,...e))};const Fp=function(...e){e=e.filter(s=>s.hasSteps);const t=qn(...e.map(s=>s._slow(s._steps))),n=rn(...e.map(s=>s._steps));return t._fast(n).setSteps(n)},XP=kt,Xo=kt,wP=kt,ZP=Mp,FP=Ci;H.prototype.s_polymeter=H.prototype.polymeter;const AP=wp;H.prototype.s_taper=H.prototype.shrink;const DP=Xp;H.prototype.s_taperlist=H.prototype.shrinklist;const SP=xp;H.prototype.s_add=H.prototype.take;const LP=Gp;H.prototype.s_sub=H.prototype.drop;const EP=Pp;H.prototype.s_expand=H.prototype.expand;const RP=Cp;H.prototype.s_extend=H.prototype.extend;const kP=vp;H.prototype.s_contract=H.prototype.contract;const VP=Zp;H.prototype.s_tour=H.prototype.tour;const zP=Fp;H.prototype.s_zip=H.prototype.zip;const BP=gp;H.prototype.steps=H.prototype.pace;const WP=R("chop",function(e,t){const n=Array.from({length:e},(i,a)=>a).map(i=>({begin:i/e,end:(i+1)/e})),s=function(i,a){if("begin"in i&&"end"in i&&i.begin!==void 0&&i.end!==void 0){const o=i.end-i.begin;a={begin:i.begin+a.begin*o,end:i.begin+a.end*o}}return Object.assign({},i,a)},r=function(i){return cn(n.map(a=>s(i,a)))};return t.squeezeBind(r).setSteps(Tt?U(e).mulmaybe(t._steps):void 0)}),NP=R("striate",function(e,t){const n=Array.from({length:e},(r,i)=>i).map(r=>({begin:r/e,end:(r+1)/e})),s=qn(...n);return t.set(s)._fast(e).setSteps(Tt?U(e).mulmaybe(t._steps):void 0)}),Ap=function(e,t,n=.5){return t.speed(1/e*n).unit("c").slow(e)},Dp=R("slice",function(e,t,n){return e.innerBind(s=>t.outerBind(r=>n.outerBind(i=>{i=i instanceof Object?i:{s:i};const a=Array.isArray(s)?s[r]:r/s,o=Array.isArray(s)?s[r+1]:(r+1)/s;return je({begin:a,end:o,_slices:s,...i})}))).setSteps(t._steps)},!1);H.prototype.onTriggerTime=function(e){return this.onTrigger((t,n,s,r)=>{const i=r-n;window.setTimeout(()=>{e(t)},i*1e3)},!1)};const TP=R("splice",function(e,t,n){const s=Dp(e,t,n);return new H(r=>{const i=r.controls._cps||1;return s.query(r).map(a=>a.withValue(o=>({speed:i/o._slices/a.whole.duration*(o.speed||1),unit:"c",...o})))}).setSteps(t._steps)},!1),{loopAt:IP,loopat:YP}=R(["loopAt","loopat"],function(e,t){const n=t._steps?t._steps.div(e):void 0;return new H(s=>Ap(e,t,s.controls._cps).query(s),n)}),HP=R("fit",e=>e.withHaps((t,n)=>t.map(s=>s.withValue(r=>{const i=("end"in r?r.end:1)-("begin"in r?r.begin:0);return{...r,speed:(n.controls._cps||1)/s.whole.duration*i,unit:"c"}})))),{loopAtCps:KP,loopatcps:_P}=R(["loopAtCps","loopatcps"],function(e,t,n){return Ap(e,n,t)}),jP=e=>je(1).withValue(()=>j(e())).innerJoin();let oc=e=>e<.5?1:1-(e-.5)/.5,Sp=(e,t,n)=>{t=j(t),e=j(e),n=j(n);let s=t.fmap(i=>({gain:oc(i)})),r=t.fmap(i=>({gain:oc(1-i)}));return Te(e.mul(s),n.mul(r))};H.prototype.xfade=function(e,t){return Sp(this,e,t)};const UP=e=>(t,n,s)=>{t=U(t).mod(n),n=U(n);const r=t.div(n),i=t.add(1).div(n);return e(s.fmap(a=>je(a)._compress(r,i)))},{beat:JP}=R(["beat"],UP(e=>e.innerJoin())),wo=(e,t,n)=>{n=U(n);const s=U(1).div(e.length),r=o=>{const u=[];for(const[c,h]of o.entries())h&&u.push([U(c).div(o.length),h]);return u},i=xi(([o,u],[c,h])=>{const d=n.mul(c-o).add(o),m=d.add(s);return new ot(d,m)},r(e),r(t));function a(o){const u=o.span.begin.sam(),c=o.span.cycleArc(),h=[];for(const d of i){const m=d.intersection(c);m!==void 0&&h.push(new qe(d.withTime(g=>g.add(u)),m.withTime(g=>g.add(u)),!0))}return h}return new H(a).splitQueries()},OP=(e,t,n)=>(e=j(e),t=j(t),n=j(n),e.innerBind(s=>t.innerBind(r=>n.innerBind(i=>wo(s,r,i))))),$n=function(e){const t=function(n,s){const r=j(n).fmap(i=>Array.isArray(i)?[...i,e]:[i,1,e]);return s?s.distort(r):je({}).distort(r)};return H.prototype[e]=function(n){return t(n,this)},t},QP=$n("soft"),qP=$n("hard"),$P=$n("cubic"),ev=$n("diode"),tv=$n("asym"),nv=$n("fold"),sv=$n("sinefold"),rv=$n("chebyshev"),Zo=e=>{let t=je(Xe((...n)=>n,null,e.length));for(const n of e)t=t.appBoth(j(n));return t},Pi=e=>Array.isArray(e)?Zo(e):j(e);H.prototype.partials=function(e){return this.withValue(t=>n=>({...t,partials:n})).appLeft(Pi(e))};const iv=e=>Pi(e).as("partials");H.prototype.phases=function(e){return this.withValue(t=>n=>({...t,phases:n})).appLeft(Pi(e))};const av=e=>Pi(e).as("phases");H.prototype.FX=function(...e){return e=e.map(j),this.withValue(t=>n=>{const s=t.FX??[];return{...t,FX:s.concat(n)}}).appLeft(Zo(e))};const ov=e=>{let t=je(Xe((...n)=>n,null,e.length));for(const n of e)t=t.appLeft(n);return t};H.prototype.worklet=function(e,...t){return t=t.map(j),this.outerBind(n=>ov(t).withValue(s=>{const r=n.workletInputs??[];return{...n,workletSrc:e,workletInputs:r.concat(s)}}))};const uv=(...e)=>je({}).worklet(...e);function vi(e){let t=Array.isArray(e);e=t?e:[e];const n=e[0],s=i=>{let a;if(typeof i=="object"&&i.value!==void 0&&(a={...i},i=i.value,delete a.value),t&&Array.isArray(i)){const o=a||{};return i.forEach((u,c)=>{c<e.length&&(o[e[c]]=u)}),o}else return a?(a[n]=i,a):{[n]:i}},r=function(i,a){return a?typeof i>"u"?a.fmap(s):a.set(j(i).withValue(s)):j(i).withValue(s)};return H.prototype[n]=function(i){return r(i,this)},r}const gr=new Map;function Lp(e){return gr.has(e)}function v(e,...t){const n=Array.isArray(e)?e[0]:e;let s={};return s[n]=vi(e),gr.set(n,n),t.forEach(r=>{s[r]=s[n],gr.set(r,n),H.prototype[r]=H.prototype[n]}),s}function Pn(e,t,...n){e=Array.isArray(e)?e:[e];let s={};for(let r=1;r<=t;r++){let i=[...n],a=[...e];if(r===1){const u=i.map(h=>`${h}1`),c=a.map(h=>`${h}1`);i=i.concat(u).concat(c)}else i=i.map(u=>`${u}${r}`),a=a.map(u=>`${u}${r}`);const o=v(a,...i);s={...s,...o}}return s}const{s:es,sound:Ep}=v(["s","n","gain"],"sound"),{wt:Rp,wavetablePosition:kp}=v("wt","wavetablePosition"),{wtenv:Vp}=v("wtenv"),{wtattack:zp,wtatt:Bp}=v("wtattack","wtatt"),{wtdecay:Wp,wtdec:Np}=v("wtdecay","wtdec"),{wtsustain:Tp,wtsus:Ip}=v("wtsustain","wtsus"),{wtrelease:Yp,wtrel:Hp}=v("wtrelease","wtrel"),{wtrate:Kp}=v("wtrate"),{wtsync:_p}=v("wtsync"),{wtdepth:jp}=v("wtdepth"),{wtshape:Up}=v("wtshape"),{wtdc:Jp}=v("wtdc"),{wtskew:Op}=v("wtskew"),{warp:Qp,wavetableWarp:qp}=v("warp","wavetableWarp"),{warpattack:$p,warpatt:eh}=v("warpattack","warpatt"),{warpdecay:th,warpdec:nh}=v("warpdecay","warpdec"),{warpsustain:sh,warpsus:rh}=v("warpsustain","warpsus"),{warprelease:ih,warprel:ah}=v("warprelease","warprel"),{warprate:oh}=v("warprate"),{warpdepth:uh}=v("warpdepth"),{warpshape:ch}=v("warpshape"),{warpdc:lh}=v("warpdc"),{warpskew:ph}=v("warpskew"),{warpmode:hh,wavetableWarpMode:dh}=v("warpmode","wavetableWarpMode"),{wtphaserand:mh,wavetablePhaseRand:fh}=v("wtphaserand","wavetablePhaseRand"),{warpenv:yh}=v("warpenv"),{warpsync:gh}=v("warpsync"),{source:bh,src:Mh}=v("source","src"),{n:xh}=v("n"),{note:At}=v(["note","n"]),{accelerate:Gh}=v("accelerate"),{velocity:Ch,vel:Ph}=v("velocity","vel"),{gain:vh}=v("gain"),{postgain:Xh}=v("postgain"),{amp:wh}=v("amp"),{attack:Zh,att:Fh}=v("attack","att"),{fmh:Ah,fmh1:Dh,fmh2:Sh,fmh3:Lh,fmh4:Eh,fmh5:Rh,fmh6:kh,fmh7:Vh,fmh8:zh}=Pn(["fmh","fmi"],8,"fmh"),{fmi:Bh,fmi1:Wh,fmi2:Nh,fmi3:Th,fmi4:Ih,fmi5:Yh,fmi6:Hh,fmi7:Kh,fmi8:_h,fm:jh,fm1:Uh,fm2:Jh,fm3:Oh,fm4:Qh,fm5:qh,fm6:$h,fm7:ed,fm8:td}=Pn(["fmi","fmh"],8,"fm"),{fmenv:nd,fmenv1:sd,fmenv2:rd,fmenv3:id,fmenv4:ad,fmenv5:od,fmenv6:ud,fmenv7:cd,fmenv8:ld}=Pn("fmenv",8),{fmattack:pd,fmattack1:hd,fmattack2:dd,fmattack3:md,fmattack4:fd,fmattack5:yd,fmattack6:gd,fmattack7:bd,fmattack8:Md,fmatt:xd,fmatt1:Gd,fmatt2:Cd,fmatt3:Pd,fmatt4:vd,fmatt5:Xd,fmatt6:wd,fmatt7:Zd,fmatt8:Fd}=Pn("fmattack",8,"fmatt"),{fmwave:Ad,fmwave1:Dd,fmwave2:Sd,fmwave3:Ld,fmwave4:Ed,fmwave5:Rd,fmwave6:kd,fmwave7:Vd,fmwave8:zd}=Pn("fmwave",8),{fmdecay:Bd,fmdecay1:Wd,fmdecay2:Nd,fmdecay3:Td,fmdecay4:Id,fmdecay5:Yd,fmdecay6:Hd,fmdecay7:Kd,fmdecay8:_d,fmdec:jd,fmdec1:Ud,fmdec2:Jd,fmdec3:Od,fmdec4:Qd,fmdec5:qd,fmdec6:$d,fmdec7:em,fmdec8:tm}=Pn("fmdecay",8,"fmdec"),{fmsustain:nm,fmsustain1:sm,fmsustain2:rm,fmsustain3:im,fmsustain4:am,fmsustain5:om,fmsustain6:um,fmsustain7:cm,fmsustain8:lm,fmsus:pm,fmsus1:hm,fmsus2:dm,fmsus3:mm,fmsus4:fm,fmsus5:ym,fmsus6:gm,fmsus7:bm,fmsus8:Mm}=Pn("fmsustain",8,"fmsus"),{fmrelease:xm,fmrelease1:Gm,fmrelease2:Cm,fmrelease3:Pm,fmrelease4:vm,fmrelease5:Xm,fmrelease6:wm,fmrelease7:Zm,fmrelease8:Fm,fmrel:Am,fmrel1:Dm,fmrel2:Sm,fmrel3:Lm,fmrel4:Em,fmrel5:Rm,fmrel6:km,fmrel7:Vm,fmrel8:zm}=Pn("fmrelease",8,"fmrel");for(let e=0;e<=8;e++)for(let t=0;t<=8;t++)v(`fmi${e}${t}`,`fm${e}${t}`);const{bank:Bm}=v("bank"),{chorus:Wm}=v("chorus"),{analyze:Nm}=v("analyze"),{fft:Tm}=v("fft"),{decay:Im,dec:Ym}=v("decay","dec"),{sustain:Hm,sus:Km}=v("sustain","sus"),{release:_m,rel:jm}=v("release","rel"),{hold:Um}=v("hold"),{bandf:Jm,bpf:Om,bp:Qm}=v(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:qm,bpq:$m}=v("bandq","bpq"),{begin:e0}=v("begin"),{end:t0}=v("end"),{loop:n0}=v("loop"),{loopBegin:s0,loopb:r0}=v("loopBegin","loopb"),{loopEnd:i0,loope:a0}=v("loopEnd","loope"),{crush:o0}=v("crush"),{coarse:u0}=v("coarse"),{tremolo:c0,trem:l0}=v(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:p0}=v(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:h0}=v("tremolodepth","tremdepth"),{tremoloskew:d0}=v("tremoloskew","tremskew"),{tremolophase:m0}=v("tremolophase","tremphase"),{tremoloshape:f0}=v("tremoloshape","tremshape"),{drive:y0}=v("drive"),{duck:g0}=v("duckorbit","duck"),{duckdepth:b0}=v("duckdepth"),{duckonset:M0}=v("duckonset","duckons"),{duckattack:x0}=v("duckattack","duckatt"),{byteBeatExpression:G0,bbexpr:C0}=v("byteBeatExpression","bbexpr"),{byteBeatStartTime:P0,bbst:v0}=v("byteBeatStartTime","bbst"),{channels:X0,ch:w0}=v("channels","ch"),{pw:Z0}=v(["pw","pwrate","pwsweep"]),{pwrate:F0}=v("pwrate"),{pwsweep:A0}=v("pwsweep"),{phaserrate:D0,ph:S0,phaser:L0}=v(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:E0,phs:R0}=v("phasersweep","phs"),{phasercenter:k0,phc:V0}=v("phasercenter","phc"),{phaserdepth:z0,phd:B0,phasdp:W0}=v("phaserdepth","phd","phasdp"),{channel:N0}=v("channel"),{cut:T0}=v("cut"),{cutoff:I0,ctf:Y0,lpf:H0,lp:K0}=v(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:_0,lpe:j0}=v("lpenv","lpe"),{hpenv:U0,hpe:J0}=v("hpenv","hpe"),{bpenv:O0,bpe:Q0}=v("bpenv","bpe"),{lpattack:q0,lpa:$0}=v("lpattack","lpa"),{hpattack:e1,hpa:t1}=v("hpattack","hpa"),{bpattack:n1,bpa:s1}=v("bpattack","bpa"),{lpdecay:r1,lpd:i1}=v("lpdecay","lpd"),{hpdecay:a1,hpd:o1}=v("hpdecay","hpd"),{bpdecay:u1,bpd:c1}=v("bpdecay","bpd"),{lpsustain:l1,lps:p1}=v("lpsustain","lps"),{hpsustain:h1,hps:d1}=v("hpsustain","hps"),{bpsustain:m1,bps:f1}=v("bpsustain","bps"),{lprelease:y1,lpr:g1}=v("lprelease","lpr"),{hprelease:b1,hpr:M1}=v("hprelease","hpr"),{bprelease:x1,bpr:G1}=v("bprelease","bpr"),{ftype:C1}=v("ftype"),{fanchor:P1}=v("fanchor"),{lprate:v1}=v("lprate"),{lpsync:X1}=v("lpsync"),{lpdepth:w1}=v("lpdepth"),{lpdepthfrequency:Z1,lpdepthfreq:F1}=v("lpdepthfrequency","lpdepthfreq"),{lpshape:A1}=v("lpshape"),{lpdc:D1}=v("lpdc"),{lpskew:S1}=v("lpskew"),{bprate:L1}=v("bprate"),{bpsync:E1}=v("bpsync"),{bpdepth:R1}=v("bpdepth"),{bpdepthfrequency:k1,bpdepthfreq:V1}=v("bpdepthfrequency","bpdepthfreq"),{bpshape:z1}=v("bpshape"),{bpdc:B1}=v("bpdc"),{bpskew:W1}=v("bpskew"),{hprate:N1}=v("hprate"),{hpsync:T1}=v("hpsync"),{hpdepth:I1}=v("hpdepth"),{hpdepthfrequency:Y1,hpdepthfreq:H1}=v("hpdepthfrequency","hpdepthfreq"),{hpshape:K1}=v("hpshape"),{hpdc:_1}=v("hpdc"),{hpskew:j1}=v("hpskew"),{vib:U1,vibrato:J1,v:O1}=v(["vib","vibmod"],"vibrato","v"),{noise:Q1}=v("noise"),{vibmod:q1,vmod:$1}=v(["vibmod","vib"],"vmod"),{hcutoff:ef,hpf:tf,hp:nf}=v(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:sf,hpq:rf}=v("hresonance","hpq"),{resonance:af,lpq:of}=v("resonance","lpq"),{djf:uf}=v("djf"),{delay:cf}=v(["delay","delaytime","delayfeedback"]),{delayfeedback:lf,delayfb:pf,dfb:hf}=v("delayfeedback","delayfb","dfb"),{delayspeed:df}=v("delayspeed"),{delaytime:mf,delayt:ff,dt:yf}=v("delaytime","delayt","dt"),{delaysync:gf}=v("delaysync"),{lock:bf}=v("lock"),{detune:Mf,det:xf}=v("detune","det"),{unison:Gf}=v("unison"),{spread:Cf}=v("spread"),{dry:Pf}=v("dry"),{fadeTime:vf,fadeOutTime:Xf}=v("fadeTime","fadeOutTime"),{fadeInTime:wf}=v("fadeInTime"),{freq:Zf}=v("freq"),{pattack:Ff,patt:Af}=v("pattack","patt"),{pdecay:Df,pdec:Sf}=v("pdecay","pdec"),{psustain:Lf,psus:Ef}=v("psustain","psus"),{prelease:Rf,prel:kf}=v("prelease","prel"),{penv:Vf}=v("penv"),{pcurve:zf}=v("pcurve"),{panchor:Bf}=v("panchor"),{gate:Wf,gat:Nf}=v("gate","gat"),{leslie:Tf}=v("leslie"),{lrate:If}=v("lrate"),{lsize:Yf}=v("lsize"),{activeLabel:Hf}=v("activeLabel"),{label:Kf}=v(["label","activeLabel"]),{degree:_f}=v("degree"),{mtranspose:jf}=v("mtranspose"),{ctranspose:Uf}=v("ctranspose"),{harmonic:Jf}=v("harmonic"),{stepsPerOctave:Of}=v("stepsPerOctave"),{octaveR:Qf}=v("octaveR"),{nudge:qf}=v("nudge"),{octave:$f,oct:ey}=v("octave","oct"),{orbit:ty}=v("orbit","o"),{bus:ny}=v("bus"),{busgain:sy,bgain:ry}=v("busgain","bgain"),{overgain:iy}=v("overgain"),{overshape:ay}=v("overshape"),{pan:oy}=v("pan"),{panspan:uy}=v("panspan"),{pansplay:cy}=v("pansplay"),{panwidth:ly}=v("panwidth"),{panorient:py}=v("panorient"),{slide:hy}=v("slide"),{semitone:dy}=v("semitone"),{voice:my}=v("voice"),{chord:fy}=v("chord"),{dictionary:yy,dict:gy}=v("dictionary","dict"),{anchor:by}=v("anchor"),{offset:My}=v("offset"),{octaves:xy}=v("octaves"),{mode:Gy}=v(["mode","anchor"]),{room:Cy}=v(["room","size"]),{roomlp:Py,rlp:vy}=v("roomlp","rlp"),{roomdim:Xy,rdim:wy}=v("roomdim","rdim"),{roomfade:Zy,rfade:Fy}=v("roomfade","rfade"),{ir:Ay,iresponse:Dy}=v(["ir","i"],"iresponse"),{irspeed:Sy}=v("irspeed"),{irbegin:Ly}=v("irbegin"),{roomsize:Ey,size:Ry,sz:ky,rsize:Vy}=v("roomsize","size","sz","rsize"),{shape:zy}=v(["shape","shapevol"]),{distort:By,dist:Wy}=v(["distort","distortvol","distorttype"],"dist"),{distortvol:Ny}=v("distortvol","distvol"),{distorttype:Ty}=v("distorttype","disttype"),{compressor:Iy}=v(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:Yy}=v("compressorKnee"),{compressorRatio:Hy}=v("compressorRatio"),{compressorAttack:Ky}=v("compressorAttack"),{compressorRelease:_y}=v("compressorRelease"),{speed:Fo}=v("speed"),{stretch:jy}=v("stretch"),{unit:Uy}=v("unit"),{squiz:Jy}=v("squiz"),{vowel:Oy}=v("vowel"),{waveloss:Qy}=v("waveloss"),{density:cv}=v("density"),{expression:qy}=v("expression"),{sustainpedal:$y}=v("sustainpedal"),{fshift:eg}=v("fshift"),{fshiftnote:tg}=v("fshiftnote"),{fshiftphase:ng}=v("fshiftphase"),{triode:sg}=v("triode"),{krush:rg}=v("krush"),{kcutoff:ig}=v("kcutoff"),{octer:ag}=v("octer"),{octersub:og}=v("octersub"),{octersubsub:ug}=v("octersubsub"),{ring:cg}=v("ring"),{ringf:lg}=v("ringf"),{ringdf:pg}=v("ringdf"),{freeze:hg}=v("freeze"),{xsdelay:dg}=v("xsdelay"),{tsdelay:mg}=v("tsdelay"),{real:fg}=v("real"),{imag:yg}=v("imag"),{enhance:gg}=v("enhance"),{comb:bg}=v("comb"),{smear:Mg}=v("smear"),{scram:xg}=v("scram"),{binshift:Gg}=v("binshift"),{hbrick:Cg}=v("hbrick"),{lbrick:Pg}=v("lbrick"),{frameRate:vg}=v("frameRate"),{frames:Xg}=v("frames"),{hours:wg}=v("hours"),{minutes:Zg}=v("minutes"),{seconds:Fg}=v("seconds"),{songPtr:Ag}=v("songPtr"),{uid:Dg}=v("uid"),{val:Sg}=v("val"),{cps:Lg}=v("cps"),{clip:Eg,legato:Rg}=v("clip","legato"),{duration:kg,dur:Vg}=v("duration","dur"),{zrand:zg}=v("zrand"),{curve:Bg}=v("curve"),{deltaSlide:Wg}=v("deltaSlide"),{pitchJump:Ng}=v("pitchJump"),{pitchJumpTime:Tg}=v("pitchJumpTime"),{znoise:Ig}=v("znoise"),{zmod:Yg}=v("zmod"),{zcrush:Hg}=v("zcrush"),{zdelay:Kg}=v("zdelay"),{zzfx:_g}=v("zzfx"),{color:jg,colour:Ug}=v(["color","colour"]);let Ao=(...e)=>e.reduce((t,n)=>Object.assign(t,{[n]:vi(n)}),{});const Jg=R("adsr",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s,r,i]=e;return t.set({attack:n,decay:s,sustain:r,release:i})}),Og=R("ad",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s=n]=e;return t.attack(n).decay(s)}),Qg=R("ds",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s=0]=e;return t.set({decay:n,sustain:s})}),qg=R("ar",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s=n]=e;return t.set({attack:n,release:s})}),{midichan:$g}=v("midichan"),{midimap:eb}=v("midimap"),{midiport:tb}=v("midiport"),{midicmd:nb}=v("midicmd"),sb=R("control",(e,t)=>{if(!Array.isArray(e))throw new Error("control expects an array of [ccn, ccv]");const[n,s]=e;return t.ccn(n).ccv(s)}),{ccn:rb}=v("ccn"),{ccv:ib}=v("ccv"),{ctlNum:ab}=v("ctlNum"),{nrpnn:ob}=v("nrpnn"),{nrpv:ub}=v("nrpv"),{progNum:cb}=v("progNum"),lb=R("sysex",(e,t)=>{if(!Array.isArray(e))throw new Error("sysex expects an array of [id, data]");const[n,s]=e;return t.sysexid(n).sysexdata(s)}),{sysexid:pb}=v("sysexid"),{sysexdata:hb}=v("sysexdata"),{midibend:db}=v("midibend"),{miditouch:mb}=v("miditouch"),{polyTouch:fb}=v("polyTouch"),{oschost:yb}=v("oschost"),{oscport:gb}=v("oscport"),br=e=>gr.has(e)?gr.get(e):e,bb=R("as",(e,t)=>(e=Array.isArray(e)?e:[e],t.fmap(n=>{n=Array.isArray(n)?n:[n];const s=[];for(let r=0;r<e.length;++r)n[r]!==void 0&&s.push([br(e[r]),n[r]]);return Object.fromEntries(s)}))),Mb=R("scrub",(e,t)=>e.outerBind(n=>{Array.isArray(n)||(n=[n]);const[s,r=1]=n;return t.begin(s).mul(Fo(r)).clip(1)}),!1),ka=new Map,lv=(e,t,...n)=>{const s=ka.get(e)??new Map,r=new Set([t,...n]);for(const i of r)s.set(String(i).toLowerCase(),t);ka.set(e,s)},Do=(e,t=[])=>{for(const[n,...s]of t)lv(e,n,...s)},pv=(e,t)=>{const n=ka.get(e);return n?n.get(String(t).toLowerCase())??t:t};Do("lfo",[["control","c"],["subControl","sc"],["rate","r"],["depth","dep","dr"],["depthabs","da"],["dcoffset","dc"],["shape","sh"],["skew","sk"],["curve","cu"],["sync","s"],["fxi"]]);Do("env",[["control","c"],["subControl","sc"],["attack","att","a"],["decay","dec","d"],["sustain","sus","s"],["release","rel","r"],["depth","dep","dr"],["depthabs","da"],["acurve","ac"],["dcurve","dc"],["rcurve","rc"],["fxi"]]);Do("bmod",[["bus","b"],["control","c"],["subControl","sc"],["depth","dep","dr"],["depthabs","da"],["dc"],["fxi"]]);H.prototype.modulate=function(e,t,n){t={control:void 0,...t};const s=["lfo","env","bmod"];if(!s.includes(e))return yt(`[core] Modulation type ${e} not found. Please use one of 'lfo', 'env', 'bmod'`),this;let r=this,i;r=r.fmap(a=>o=>({v:a,id:o})).appLeft(j(n));for(const[a,o]of Object.entries(t)){const u=pv(e,a),c=j(o);r=r.fmap(({v:h,id:d})=>m=>{if(i===void 0){let y=br(Object.keys(h).at(-1));s.includes(y)&&(y=`${y}_${[...h[y].__ids].at(-1)}`),i=y}h[e]??={__ids:new Set};const g=h[e];return d??=g.__ids.size,g[d]??={control:i},g.__ids.add(d),m===void 0?{v:h,id:d}:(u==="control"||u==="subControl"?g[d][u]=br(m):g[d][u]=m,{v:h,id:d})}).appLeft(c)}return r.fmap(({v:a})=>a)};H.prototype.lfo=function(e,t){return this.modulate("lfo",e,t)};const xb=e=>je({}).lfo(e);H.prototype.env=function(e,t){return this.modulate("env",e,t)};const Gb=e=>je({}).env(e);H.prototype.bmod=function(e,t){return this.modulate("bmod",e,t)};const Cb=e=>je({}).bmod(e),{transient:Pb}=v(["transient","transsustain"]),{FXrelease:vb,FXrel:Xb,FXr:wb,fxr:Zb}=v("FXrelease","FXrel","FXr","fxr"),hv=Object.freeze(Object.defineProperty({__proto__:null,FXr:wb,FXrel:Xb,FXrelease:vb,accelerate:Gh,activeLabel:Hf,ad:Og,adsr:Jg,amp:wh,analyze:Nm,anchor:by,ar:qg,as:bb,att:Fh,attack:Zh,bandf:Jm,bandq:qm,bank:Bm,bbexpr:C0,bbst:v0,begin:e0,bgain:ry,binshift:Gg,bmod:Cb,bp:Qm,bpa:s1,bpattack:n1,bpd:c1,bpdc:B1,bpdecay:u1,bpdepth:R1,bpdepthfreq:V1,bpdepthfrequency:k1,bpe:Q0,bpenv:O0,bpf:Om,bpq:$m,bpr:G1,bprate:L1,bprelease:x1,bps:f1,bpshape:z1,bpskew:W1,bpsustain:m1,bpsync:E1,bus:ny,busgain:sy,byteBeatExpression:G0,byteBeatStartTime:P0,ccn:rb,ccv:ib,ch:w0,channel:N0,channels:X0,chord:fy,chorus:Wm,clip:Eg,coarse:u0,color:jg,colour:Ug,comb:bg,compressor:Iy,compressorAttack:Ky,compressorKnee:Yy,compressorRatio:Hy,compressorRelease:_y,control:sb,cps:Lg,createParam:vi,createParams:Ao,crush:o0,ctf:Y0,ctlNum:ab,ctranspose:Uf,curve:Bg,cut:T0,cutoff:I0,dec:Ym,decay:Im,degree:_f,delay:cf,delayfb:pf,delayfeedback:lf,delayspeed:df,delaysync:gf,delayt:ff,delaytime:mf,deltaSlide:Wg,density:cv,det:xf,detune:Mf,dfb:hf,dict:gy,dictionary:yy,dist:Wy,distort:By,distorttype:Ty,distortvol:Ny,djf:uf,drive:y0,dry:Pf,ds:Qg,dt:yf,duck:g0,duckattack:x0,duckdepth:b0,duckonset:M0,dur:Vg,duration:kg,end:t0,enhance:gg,env:Gb,expression:qy,fadeInTime:wf,fadeOutTime:Xf,fadeTime:vf,fanchor:P1,fft:Tm,fm:jh,fm1:Uh,fm2:Jh,fm3:Oh,fm4:Qh,fm5:qh,fm6:$h,fm7:ed,fm8:td,fmatt:xd,fmatt1:Gd,fmatt2:Cd,fmatt3:Pd,fmatt4:vd,fmatt5:Xd,fmatt6:wd,fmatt7:Zd,fmatt8:Fd,fmattack:pd,fmattack1:hd,fmattack2:dd,fmattack3:md,fmattack4:fd,fmattack5:yd,fmattack6:gd,fmattack7:bd,fmattack8:Md,fmdec:jd,fmdec1:Ud,fmdec2:Jd,fmdec3:Od,fmdec4:Qd,fmdec5:qd,fmdec6:$d,fmdec7:em,fmdec8:tm,fmdecay:Bd,fmdecay1:Wd,fmdecay2:Nd,fmdecay3:Td,fmdecay4:Id,fmdecay5:Yd,fmdecay6:Hd,fmdecay7:Kd,fmdecay8:_d,fmenv:nd,fmenv1:sd,fmenv2:rd,fmenv3:id,fmenv4:ad,fmenv5:od,fmenv6:ud,fmenv7:cd,fmenv8:ld,fmh:Ah,fmh1:Dh,fmh2:Sh,fmh3:Lh,fmh4:Eh,fmh5:Rh,fmh6:kh,fmh7:Vh,fmh8:zh,fmi:Bh,fmi1:Wh,fmi2:Nh,fmi3:Th,fmi4:Ih,fmi5:Yh,fmi6:Hh,fmi7:Kh,fmi8:_h,fmrel:Am,fmrel1:Dm,fmrel2:Sm,fmrel3:Lm,fmrel4:Em,fmrel5:Rm,fmrel6:km,fmrel7:Vm,fmrel8:zm,fmrelease:xm,fmrelease1:Gm,fmrelease2:Cm,fmrelease3:Pm,fmrelease4:vm,fmrelease5:Xm,fmrelease6:wm,fmrelease7:Zm,fmrelease8:Fm,fmsus:pm,fmsus1:hm,fmsus2:dm,fmsus3:mm,fmsus4:fm,fmsus5:ym,fmsus6:gm,fmsus7:bm,fmsus8:Mm,fmsustain:nm,fmsustain1:sm,fmsustain2:rm,fmsustain3:im,fmsustain4:am,fmsustain5:om,fmsustain6:um,fmsustain7:cm,fmsustain8:lm,fmwave:Ad,fmwave1:Dd,fmwave2:Sd,fmwave3:Ld,fmwave4:Ed,fmwave5:Rd,fmwave6:kd,fmwave7:Vd,fmwave8:zd,frameRate:vg,frames:Xg,freeze:hg,freq:Zf,fshift:eg,fshiftnote:tg,fshiftphase:ng,ftype:C1,fxr:Zb,gain:vh,gat:Nf,gate:Wf,getControlName:br,harmonic:Jf,hbrick:Cg,hcutoff:ef,hold:Um,hours:wg,hp:nf,hpa:t1,hpattack:e1,hpd:o1,hpdc:_1,hpdecay:a1,hpdepth:I1,hpdepthfreq:H1,hpdepthfrequency:Y1,hpe:J0,hpenv:U0,hpf:tf,hpq:rf,hpr:M1,hprate:N1,hprelease:b1,hps:d1,hpshape:K1,hpskew:j1,hpsustain:h1,hpsync:T1,hresonance:sf,imag:yg,ir:Ay,irbegin:Ly,iresponse:Dy,irspeed:Sy,isControlName:Lp,kcutoff:ig,krush:rg,label:Kf,lbrick:Pg,legato:Rg,leslie:Tf,lfo:xb,lock:bf,loop:n0,loopBegin:s0,loopEnd:i0,loopb:r0,loope:a0,lp:K0,lpa:$0,lpattack:q0,lpd:i1,lpdc:D1,lpdecay:r1,lpdepth:w1,lpdepthfreq:F1,lpdepthfrequency:Z1,lpe:j0,lpenv:_0,lpf:H0,lpq:of,lpr:g1,lprate:v1,lprelease:y1,lps:p1,lpshape:A1,lpskew:S1,lpsustain:l1,lpsync:X1,lrate:If,lsize:Yf,midibend:db,midichan:$g,midicmd:nb,midimap:eb,midiport:tb,miditouch:mb,minutes:Zg,mode:Gy,mtranspose:jf,n:xh,noise:Q1,note:At,nrpnn:ob,nrpv:ub,nudge:qf,oct:ey,octave:$f,octaveR:Qf,octaves:xy,octer:ag,octersub:og,octersubsub:ug,offset:My,orbit:ty,oschost:yb,oscport:gb,overgain:iy,overshape:ay,pan:oy,panchor:Bf,panorient:py,panspan:uy,pansplay:cy,panwidth:ly,patt:Af,pattack:Ff,pcurve:zf,pdec:Sf,pdecay:Df,penv:Vf,ph:S0,phasdp:W0,phaser:L0,phasercenter:k0,phaserdepth:z0,phaserrate:D0,phasersweep:E0,phc:V0,phd:B0,phs:R0,pitchJump:Ng,pitchJumpTime:Tg,polyTouch:fb,postgain:Xh,prel:kf,prelease:Rf,progNum:cb,psus:Ef,psustain:Lf,pw:Z0,pwrate:F0,pwsweep:A0,rdim:wy,real:fg,registerControl:v,registerMultiControl:Pn,rel:jm,release:_m,resonance:af,rfade:Fy,ring:cg,ringdf:pg,ringf:lg,rlp:vy,room:Cy,roomdim:Xy,roomfade:Zy,roomlp:Py,roomsize:Ey,rsize:Vy,s:es,scram:xg,scrub:Mb,seconds:Fg,semitone:dy,shape:zy,size:Ry,slide:hy,smear:Mg,songPtr:Ag,sound:Ep,source:bh,speed:Fo,spread:Cf,squiz:Jy,src:Mh,stepsPerOctave:Of,stretch:jy,sus:Km,sustain:Hm,sustainpedal:$y,sysex:lb,sysexdata:hb,sysexid:pb,sz:ky,transient:Pb,trem:l0,tremolo:c0,tremolodepth:h0,tremolophase:m0,tremoloshape:f0,tremoloskew:d0,tremolosync:p0,triode:sg,tsdelay:mg,uid:Dg,unison:Gf,unit:Uy,v:O1,val:Sg,vel:Ph,velocity:Ch,vib:U1,vibmod:q1,vibrato:J1,vmod:$1,voice:my,vowel:Oy,warp:Qp,warpatt:eh,warpattack:$p,warpdc:lh,warpdec:nh,warpdecay:th,warpdepth:uh,warpenv:yh,warpmode:hh,warprate:oh,warprel:ah,warprelease:ih,warpshape:ch,warpskew:ph,warpsus:rh,warpsustain:sh,warpsync:gh,waveloss:Qy,wavetablePhaseRand:fh,wavetablePosition:kp,wavetableWarp:qp,wavetableWarpMode:dh,wt:Rp,wtatt:Bp,wtattack:zp,wtdc:Jp,wtdec:Np,wtdecay:Wp,wtdepth:jp,wtenv:Vp,wtphaserand:mh,wtrate:Kp,wtrel:Hp,wtrelease:Yp,wtshape:Up,wtskew:Op,wtsus:Ip,wtsustain:Tp,wtsync:_p,xsdelay:dg,zcrush:Hg,zdelay:Kg,zmod:Yg,znoise:Ig,zrand:zg,zzfx:_g},Symbol.toStringTag,{value:"Module"})),dv=function(e,t){const[n,s]=e,[r,i]=t,[a,o]=go(s,r);return[[s,n-s],[xi((u,c)=>u.concat(c),a,i),o]]},mv=function(e,t){const[n,s]=e,[r,i]=t,[a,o]=go(n,i);return[[n,s-n],[xi((u,c)=>u.concat(c),r,a),o]]},Fb=function(e,t){const[n,s]=e;return Math.min(n,s)<=1?[e,t]:Fb(...n>s?dv(e,t):mv(e,t))},So=function(e,t){const n=e<0,s=Math.abs(e),r=t-s,i=Array(s).fill([1]),a=Array(r).fill([0]),o=Fb([s,r],[i,a]),u=En(o[1][0]).concat(En(o[1][1]));return n?u.map(c=>1-c):u},Xi=function(e,t,n){const s=So(e,t);return n?jl(s,-n):s},fv=R("euclid",function(e,t,n){return n.struct(Xi(e,t,0))}),yv=R("bjork",function(e,t){Array.isArray(e)||(e=[e]);const[n,s=n,r=0]=e;return t.struct(Xi(n,s,r))}),{euclidrot:gv,euclidRot:bv}=R(["euclidrot","euclidRot"],function(e,t,n,s){return s.struct(Xi(e,t,n))}),Ab=function(e,t,n,s){if(e<1)return Ye;const r=Xi(e,t,0).join("").split("1").slice(1).map(i=>[i.length+1,!0]);return s.struct(Xo(...r)).late(U(n).div(t))},Mv=R(["euclidLegato"],function(e,t,n){return Ab(e,t,0,n)}),xv=R(["euclidLegatoRot"],function(e,t,n,s){return Ab(e,t,n,s)}),{euclidish:Gv,eish:Cv}=R(["euclidish","eish"],function(e,t,n,s){const r=wo(So(e,t),new Array(e).fill(1),n);return s.struct(r).setSteps(t)});function Db(e,t,n=.05,s=.1,r=.1,i=globalThis.setInterval,a=globalThis.clearInterval,o=!0){let u=0,c=0,h=10**4,d=.01;const m=D=>n=D(n);r=r||s/2;const g=()=>{const D=e(),L=D+s+r;for(c===0&&(c=D+d);c<L;)c=o?Math.round(c*h)/h:c,t(c,n,u,D),c+=n,u++};let y;const G=()=>{X(),g(),y=i(g,s*1e3)},X=()=>{y!==void 0&&a(y),y=void 0};return{setDuration:m,start:G,stop:()=>{u=0,c=0,X()},pause:()=>X(),duration:n,interval:s,getPhase:()=>c,minLatency:d}}class Sb{constructor({interval:t,onTrigger:n,onToggle:s,onError:r,getTime:i,latency:a=.1,setInterval:o,clearInterval:u,beforeStart:c}){this.started=!1,this.beforeStart=c,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=i,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=s,this.latency=a,this.clock=Db(i,(h,d,m,g)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=h),this.num_ticks_since_cps_change++;const y=this.num_ticks_since_cps_change*d*this.cps;try{const G=this.lastEnd;this.lastBegin=G;const X=this.num_cycles_at_cps_change+y;if(this.lastEnd=X,this.lastTick=h,h<g){console.log("skip query: too late");return}this.pattern.queryArc(G,X,{_cps:this.cps,cyclist:"cyclist"}).forEach(D=>{if(D.hasOnset()){const L=(D.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+a,B=D.duration/this.cps,A=L-h;n?.(D,A,B,this.cps,L),D.value.cps!==void 0&&this.cps!=D.value.cps&&(this.cps=D.value.cps,this.num_ticks_since_cps_change=0)}})}catch(G){Fr(G),r?.(G)}},t,.1,.1,o,u)}now(){if(!this.started)return 0;const t=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+t*this.cps}setStarted(t){this.started=t,this.onToggle?.(t)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");yt("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){yt("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){yt("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(t,n=!1){this.pattern=t,n&&!this.started&&await this.start()}setCps(t=.5){this.cps!==t&&(this.cps=t,this.num_ticks_since_cps_change=0)}log(t,n,s){const r=s.filter(i=>i.hasOnset());console.log(`${t.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}let lr={};const Lb=function(){Eb()},Eb=function(){lr={}},Pv=R("timeline",function(e,t){e=j(e);const n=function(s){const r=!!s.controls.cyclist,i=e.query(s),a=[];for(const o of i){const u=o.value;let c;if(u===0)c=0;else if(u in lr)c=lr[u];else{const d=o.wholeOrPart();!r||s.span.begin.lt(d.midpoint())?c=d.begin:c=d.end}r&&(lr[u]=c,u!==0&&delete lr[-u]);const h=t.late(c).query(s.setSpan(o.part)).map(d=>d.setContext(d.combineContext(o)));a.push(...h)}return a};return new H(n,t._steps)},!1),vn=function(e,t,n=!0){const s=Array.isArray(e),r=Object.keys(e).length;return e=ep(e,j),r===0?Ye:t.fmap(i=>{let a=i;return s&&(a=n?Math.round(a)%r:Gi(Math.round(a),0,e.length-1)),e[a]})},Rb=function(e,t){return Array.isArray(t)&&([t,e]=[e,t]),vv(e,t)},vv=R("pick",function(e,t){return vn(e,t,!1).innerJoin()}),kb=R("pickmod",function(e,t){return vn(e,t,!0).innerJoin()}),Xv=R("pickF",function(e,t,n){return n.apply(Rb(e,t))}),wv=R("pickmodF",function(e,t,n){return n.apply(kb(e,t))}),Zv=R("pickOut",function(e,t){return vn(e,t,!1).outerJoin()}),Fv=R("pickmodOut",function(e,t){return vn(e,t,!0).outerJoin()}),Av=R("pickRestart",function(e,t){return vn(e,t,!1).restartJoin()}),Dv=R("pickmodRestart",function(e,t){return vn(e,t,!0).restartJoin()}),Sv=R("pickReset",function(e,t){return vn(e,t,!1).resetJoin()}),Lv=R("pickmodReset",function(e,t){return vn(e,t,!0).resetJoin()}),{inhabit:Ev,pickSqueeze:Rv}=R(["inhabit","pickSqueeze"],function(e,t){return vn(e,t,!1).squeezeJoin()}),{inhabitmod:kv,pickmodSqueeze:Vv}=R(["inhabitmod","pickmodSqueeze"],function(e,t){return vn(e,t,!0).squeezeJoin()}),zv=(e,t)=>(t=t.map(j),t.length==0?Ye:e.fmap(n=>{const s=Ut(Math.round(n),t.length);return t[s]}).squeezeJoin());class Bv{constructor({onTrigger:t,onToggle:n,getTime:s}){this.started=!1,this.cps=.5,this.getTime=s,this.time_at_last_tick_message=0,this.collator=new tp({getTargetClockTime:s}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEwoKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkqLjAwMX1sZXQgXz0wLHI9MCxvPS41O2NvbnN0IGg9bmV3IE1hcCxtPS4xLE09bmV3IEJyb2FkY2FzdENoYW5uZWwoInN0cnVkZWx0aWNrIiksYj0ocyxlKT0+e00ucG9zdE1lc3NhZ2Uoe3R5cGU6cyxwYXlsb2FkOmV9KX0sQz1FKEwsKHMsZSx0LG4pPT57Y29uc3QgaT1yKmUsZD1zLW4sYz1uK2QsdT1pKm8sbD1fK3UsZz1uLWMtZSxmPWUqbyxwPWwrZix5PWwrZypvO2IoInRpY2siLHtiZWdpbjpsLGVuZDpwLGNwczpvLHRpbWU6bixjeWNsZTp5fSkscisrfSxtKTtsZXQgaz0hMTtjb25zdCBJPXM9PntoLnNldChzLHtzdGFydGVkOiEwfSksIWsmJihDLnN0YXJ0KCksaz0hMCl9LEE9YXN5bmMgcz0+e2guc2V0KHMse3N0YXJ0ZWQ6ITF9KTtjb25zdCBlPUFycmF5LmZyb20oaC52YWx1ZXMoKSkuc29tZSh0PT50LnN0YXJ0ZWQpOyFrfHxlfHwoQy5zdG9wKCksdygwKSxrPSExKX0sdz1zPT57cj0wLF89c30sRD1zPT57Y29uc3R7dHlwZTplLHBheWxvYWQ6dH09cztzd2l0Y2goZSl7Y2FzZSJjcHNjaGFuZ2UiOntpZih0LmNwcyE9PW8pe2NvbnN0IG49ciptO189XytuKm8sbz10LmNwcyxyPTB9YnJlYWt9Y2FzZSJzZXRjeWNsZSI6e3codC5jeWNsZSk7YnJlYWt9Y2FzZSJ0b2dnbGUiOnt0LnN0YXJ0ZWQ/SShzLmlkKTpBKHMuaWQpO2JyZWFrfX19O3NlbGYub25jb25uZWN0PWZ1bmN0aW9uKHMpe2NvbnN0IGU9cy5wb3J0c1swXTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKHQpe0QodC5kYXRhKX0pLGUuc3RhcnQoKX07ZnVuY3Rpb24gRShzLGUsdD0uMDUsbj0uMSxpPS4xKXtsZXQgZD0wLGM9MCx1PTEwKio0LGw9LjAxO2NvbnN0IGc9YT0+dD1hKHQpO2k9aXx8bi8yO2NvbnN0IGY9KCk9Pntjb25zdCBhPXMoKSxPPWErbitpO2ZvcihjPT09MCYmKGM9YStsKTtjPE87KWM9TWF0aC5yb3VuZChjKnUpL3UsYz49YSYmZShjLHQsZCxhKSxjPGEmJmNvbnNvbGUubG9nKCJUT08gTEFURSIsYyksYys9dCxkKyt9O2xldCBwO2NvbnN0IHk9KCk9PntUKCksZigpLHA9c2V0SW50ZXJ2YWwoZixuKjFlMyl9LFQ9KCk9PnAhPT12b2lkIDAmJmNsZWFySW50ZXJ2YWwocCk7cmV0dXJue3NldER1cmF0aW9uOmcsc3RhcnQ6eSxzdG9wOigpPT57ZD0wLGM9MCxUKCl9LHBhdXNlOigpPT5UKCksZHVyYXRpb246dCxpbnRlcnZhbDpuLGdldFBoYXNlOigpPT5jLG1pbkxhdGVuY3k6bH19fSkoKTsK",import.meta.url).href,import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const r=a=>{const{cps:o,begin:u,end:c,cycle:h,time:d}=a;this.cps=o,this.cycle=h;const m=this.collator.calculateOffset(d)+d;i(u,c,m),this.time_at_last_tick_message=m},i=(a,o,u)=>{this.started!==!1&&this.pattern.queryArc(a,o,{_cps:this.cps,cyclist:"neocyclist"}).forEach(c=>{if(c.hasOnset()){const h=Da(c.whole.begin-this.cycle,this.cps)+u+this.latency,d=Da(c.duration,this.cps);t?.(c,0,d,this.cps,h)}})};this.channel.onmessage=a=>{if(!this.started)return;const{payload:o,type:u}=a.data;u==="tick"&&r(o)}}sendMessage(t,n){this.worker.port.postMessage({type:t,payload:n,id:this.id})}now(){const t=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+t}setCps(t=1){this.sendMessage("cpschange",{cps:t})}setCycle(t){this.sendMessage("setcycle",{cycle:t})}setStarted(t){this.sendMessage("toggle",{started:t}),this.started=t,this.onToggle?.(t)}start(){yt("[cyclist] start"),this.setStarted(!0)}stop(){yt("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(t,n=!1){this.pattern=t,n&&!this.started&&this.start()}log(t,n,s){const r=s.filter(i=>i.hasOnset());console.log(`${t.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}let Va,Vb,zb,Bb,Wb;function za(){if(!Va)throw new Error("no time set! use setTime to define a time source");return Va()}function ui(e){Va=e}function Nb(e){Vb=e}function Wv(){return Vb?.()}function Tb(e){zb=e}function Nv(){return zb}function Ib(e){Bb=e}function Tv(){return Bb}function Yb(e){Wb=!!e}function Iv(){return Wb}function Ba(e,t){if(t||(t="assertion failed"),!e)throw new Error(t)}let Ae=class{constructor(e,t){this.type=e,t!==void 0&&(this.value=t),this.ins=[]}static parseInput(e,t){if(typeof e=="function"){if(!t)throw new Error("tried to parse function input without without passing node..");return e(t)}return typeof e=="object"?e:typeof e=="number"&&!isNaN(e)||typeof e=="string"?Jt(e):(console.log(`invalid input type "${typeof e}" for node of type "${t.type}", falling back to 0. The input was:`,e),0)}};const ks=(e,t)=>new Ae(e,t);let Pt=new Map;const _n="poly",Wa="exit";Ae.prototype.inherit=function(e){return e.inputOf&&(this.inputOf=e.inputOf),e.outputOf&&(this.outputOf=e.outputOf),this};Ae.prototype.toObject=function(){return JSON.parse(JSON.stringify(this))};Ae.prototype.stringify=function(){return JSON.stringify(this,null,2).replaceAll('"',"'")};function Hb(e,...t){let n=1;if(t=t.map(r=>{if(Array.isArray(r)){if(r.length===1)return r[0];r=new Ae(_n).withIns(...r)}if(typeof r=="function"){const i=r(new Ae("peek"));i.type===_n&&(n=Math.max(i.ins.length,n))}return r.type===_n&&(n=Math.max(r.ins.length,n)),r}),n===1){const r=ks(e);return r.withIns(...t.map(i=>Ae.parseInput(i,r)))}if(e===Wa){const r=t.map(i=>i.type===_n?i.ins.map(a=>Ae.parseInput(a).inherit(a)):i).flat();return ks(Wa).withIns(...r)}const s=Array.from({length:n},(r,i)=>{const a=new Ae(e),o=t.map(u=>u.type===_n?Ae.parseInput(u.ins[i%u.ins.length],a).inherit(u):(u=Ae.parseInput(u,a),u.type===_n&&(u=u.ins[i]),u));return a.withIns(...o)});return new Ae(_n).withIns(...s)}function Yv(e,t){const n=Pt.get(e);return n?.ins?.[t]?n.ins[t].name:""}let $=(e,t)=>gt(e,(...n)=>Hb(e,...n),t);Pt.set("register",{tags:["meta"],graph:!1,description:"Registers a new Node function. Sets it on the prototype + returns the function itself. Like `module` but doesn't hide complexity in graph viz.",examples:[`let kick = register('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let gt=(e,t,n)=>(n&&Pt.set(e,n),Ae.prototype[e]=function(...s){return t(this,...s)},Ae.prototype["_"+e]=function(){return this},t);Pt.set("module",{tags:["meta"],graph:!0,description:"Creates a module. Like `register`, but the graph viz will hide the internal complexity of the module.",examples:[`let kick = module('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let Hv=0;function It(e,t,n){return gt(e,(...s)=>{const r=Hv++;return s=s.map((i,a)=>Ae.parseInput(i).asModuleInput?.(e,r,a)),t(...s).asModuleOutput?.(e,r)},n)}Pt.set("n",{tags:["math"],description:"Constant value node. Turns a number into a Node.",ins:[{name:"value",default:0}]});function Jt(e){return Array.isArray(e)?poly(...e.map(t=>Jt(t))):typeof e=="object"?e:ks("n",e)}Pt.set("out",{tags:["meta"],description:"Sends the node to the audio output"});Pt.set("withIns",{internal:!0,tags:["innards"],description:"Sets the inputs of a node. Returns the node itself",ins:[{name:"in",dynamic:!0}]});Ae.prototype.withIns=function(...e){return this.ins=e,this};Pt.set("flatten",{internal:!0,tags:["innards"],description:"Flattens the node to a list of all nodes in the graph, where each Node's ins are now indices"});Ae.prototype.flatten=function(){return _v(this)};Pt.set("apply",{graph:!0,tags:["meta"],description:"Applies the given function to the Node. Useful when a node has to be used multiple times.",examples:[`impulse(4)
.apply(imp=>imp
  .seq(110,220,330,440)
  .sine()
  .mul( imp.ad(.1,.1) )
).out()`]});Ae.prototype.apply=function(e){return e(this)};Pt.set("clone",{internal:!0,tags:["innards"],description:"Clones the node"});Ae.prototype.clone=function(){return new Ae(this.type,this.value).withIns(...this.ins)};Pt.set("map",{tags:["meta"],description:"Applies the given function to all ins if it's poly node. Otherwise it applies the function to itself.",examples:[`n([110,220,330])
.map( freq=>freq.mul([1,1.007]).saw().mix() )
.mix(2).mul(.5).out()`]});Ae.prototype.map=function(e){return this.type!=="poly"?e(this):poly(...this.ins.map(e))};Ae.prototype.channel=function(e){return this.type!=="poly"?this:this.ins[e%this.ins.length]};Pt.set("select",{tags:["meta"],graph:!0,description:"Find the first occurence of the given type up in the graph and returns the match. Useful to exit a feedback loop at another point.",examples:[`sine(220).mul(impulse(1).ad(.001,.2))
.add( x=>x.delay(.2).mul(.8) )
.select('delay').out()
`]});Ae.prototype.select=function(e){for(let t of this.ins){if(t.type===e)return t;const n=t.select(e);if(n)return n}};Pt.set("debug",{tags:["meta"],description:"Logs the node to the console"});Ae.prototype.debug=function(e=t=>t){return console.log(e(this)),this};function Kv(e){const t=modules.get(e),n=Array.from({length:t.length},(r,i)=>ks(`$INPUT${i}`)),s=t(...n);return JSON.stringify(s,null,2)}function _v(e){const t=[];return Lo(e,n=>(t.push(n),n)),t.map(n=>{let s={...n,type:n.type,ins:n.ins.map(r=>t.indexOf(r)+"")};return n.value!==void 0&&(s.value=n.value),n.to!==void 0&&(s.to=t.indexOf(n.to)),s})}let Kb=$("exit",{internal:!0});function _b(e,t){let n=[];const s=gt("out",function(r,i=[0,1]){return n.push(r.output(i)),r});return t?(t.out=s,Function(...Object.keys(t),e)(...Object.values(t))):(globalThis.out=s,Function(e)()),Kb(...n)}Ae.prototype.over=function(e){return this.apply(t=>add(t,e(t)))};Ae.prototype.dfs=function(e,t){return this.apply(n=>Lo(n,e,t))};Ae.prototype.apply2=function(e){return e(this,this)};let Lo=(e,t,n=[])=>(e=t(e,n),n.push(e),e.ins=e.ins.map(s=>n.includes(s)?s:Lo(s,t,n)),e);Ae.prototype.asModuleInput=function(e,t,n){return this.inputOf=this.inputOf||[],this.inputOf.push([e,t,n]),this};Ae.prototype.asModuleOutput=function(e,t){return this.outputOf=[e,t],this};function Eo(e,t={}){const{log:n=!1,lang:s="js",fallbackType:r="thru",constType:i="n",getRegister:a=y=>`r[${y}]`,getOutput:o=y=>`o[${y}]`,getSource:u=y=>`s[${y}]`}=t;n&&console.log("compile",e);const c=jv(e);let h=[],d=y=>c[y].type!==i?a(y):typeof c[y].value=="string"?`"${c[y].value}"`:c[y].value;const m=[];for(let y in c){const G=c[y],X=c[y].ins.map(A=>d(c.indexOf(A))),D=m.length;let L=Pt.get(G.type);L||(console.warn(`unhandled node type "${c[y].type}". falling back to "${r}"`),L=Pt.get(r));const B={vars:X,node:G,nodes:c,id:y,ugenIndex:D,ugen:L.ugen,name:d(y),lang:s,getRegister:a,getOutput:o,getSource:u};L.compile&&h.push(L.compile(B)),L.ugen&&m.push({type:L.ugen,inputs:X})}const g=h.join(`
`);return n&&(console.log("compiled code:"),console.log(g)),{src:g,ugens:m,registers:c.length}}Ae.prototype.compile=function(e){return Eo(this,e)};function jv(e){const t=[],n=new Set;function s(r){if(!(typeof r!="object"||n.has(r))){n.add(r);for(let i in r.ins)s(r.ins[i]);t.push(r)}}return s(e),t}const uc=Object.freeze(Object.defineProperty({__proto__:null,compile:Eo},Symbol.toStringTag,{value:"Module"}));class jb{constructor(){this._events={}}on(t,n){this._events[t]||(this._events[t]=[]);let s=this._events[t];Ba(s.indexOf(n)==-1),s.push(n)}removeListener(t,n){let s=this._events[t],r=s.indexOf(n);r!=-1&&s.splice(r,1)}trigger(t,...n){let s=this._events[t]||[];for(let r=0;r<s.length;r++)s[r].apply(null,n)}}class Uv extends jb{constructor(t=navigator){super(),this.midiAccess=null,this.getMIDIAccess(t)}async getMIDIAccess(t){if("requestMIDIAccess"in t){this.midiAccess=await t.requestMIDIAccess({sysex:!1}),console.log("got MIDI access");for(let n of this.midiAccess.inputs.values())n.state=="connected"&&(n.onmidimessage=s=>this.trigger("midimessage",n.id,s.data));this.midiAccess.onstatechange=n=>{n.port.type=="input"&&n.port.state=="connected"&&(console.log("MIDI device connected:",n.port.name,"PORT:",n.port.id),n.port.onmidimessage=s=>this.trigger("midimessage",n.port.id,s.data))}}}broadcast(t,n){if(midi)for(let s of this.midiAccess.outputs.values())s.send(t,n)}}function Jv(e){let t=e[0]&240,n=(e[0]&15)+1;if(t==176&&e.length==3){let s=e[1],r=e[2]/127*2-1;return{type:"CC",channel:n,cc:s,value:r}}if(t==224&&e.length==3){let s=e[1],r=(e[2]<<7|s)/16383*2-1;return{type:"PITCHBEND",channel:n,value:r}}if(t==144&&e.length==3){let s=e[1],r=e[2]/127;return{type:"NOTE_ON",channel:n,note:s,velocity:r}}if(t==128&&e.length==3){let s=e[1];return{type:"NOTE_ON",channel:n,note:s,velocity:0}}}class Ov extends jb{constructor(){super(),this.attach()}attach(){typeof window<"u"&&(this.handleMouseMove=t=>{const n=t.clientX/document.body.clientWidth*2-1,s=t.clientY/document.body.clientHeight*2-1;this.trigger("move",n,s)},document.addEventListener("mousemove",this.handleMouseMove))}detach(){typeof window<"u"&&document.removeEventListener("mousemove",this.handleMouseMove)}}const Qv="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGcoaCx0KXtpZih0fHwodD0iYXNzZXJ0aW9uIGZhaWxlZCIpLCFoKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBTKGgsdCxzKXtyZXR1cm4gaDw9MD90Omg+PTE/czp0K2gqKHMtdCl9ZnVuY3Rpb24gUChoLHQscyl7cmV0dXJuIGg8PXQ/MDpoPj1zPzE6cz09PXQ/MDooaC10KS8ocy10KX1mdW5jdGlvbiBFKGgsdCl7cmV0dXJuIGg8dD8oaC89dCxoK2gtaCpoLTEpOmg+MS10PyhoPShoLTEpL3QsaCpoK2graCsxKTowfWZ1bmN0aW9uIFUoaCl7cmV0dXJuIE1hdGguZmxvb3IoaCk9PT1ofWZ1bmN0aW9uIF8oaCl7cmV0dXJuIFUoaCkmJmg+MH1mdW5jdGlvbiBrKGgsdCl7dD1NYXRoLm1pbihNYXRoLm1heCh0LDApLDEpLHQtPS4wMTt2YXIgcz0yKnQvKDEtdCksZT0oMStzKSpoLygxK3MqTWF0aC5hYnMoaCkpO3JldHVybiBlfWZ1bmN0aW9uIHcoaCx0LHMpe3JldHVybiBoPj0xP3M6dCtoKihzLXQpfWZ1bmN0aW9uIFQoKXt0aGlzLnN0YXRlPSJvZmYiLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5zdGFydFZhbD0wfVQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oaCx0LHMsZSxpLG4pe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcj1oLXRoaXMuc3RhcnRUaW1lO3JldHVybiByPnM/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1oLDEpOncoci9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCByPWgtdGhpcy5zdGFydFRpbWUsbD13KHIvZSwxLGkpO3JldHVybiB0PD0wPyh0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1oLHRoaXMuc3RhcnRWYWw9bCxsKTpyPmU/KHRoaXMuc3RhdGU9InN1c3RhaW4iLHRoaXMuc3RhcnRUaW1lPWgsaSk6bH1jYXNlInN1c3RhaW4iOnJldHVybiB0PD0wJiYodGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPWkpLGk7Y2FzZSJyZWxlYXNlIjp7bGV0IHI9aC10aGlzLnN0YXJ0VGltZTtpZihyPm4pcmV0dXJuIHRoaXMuc3RhdGU9Im9mZiIsMDtsZXQgbD13KHIvbix0aGlzLnN0YXJ0VmFsLDApO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPWgsdGhpcy5zdGFydFZhbD1sKSxsfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn07ZnVuY3Rpb24gdigpe3RoaXMuczA9MCx0aGlzLnMxPTB9di5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oaCx0LHMpe2coIWlzTmFOKGgpLCJOYU4gdmFsdWUgZmVkIGluIFR3b1BvbGVGaWx0ZXIiKSx0PU1hdGgubWluKHQsMSkscz1NYXRoLm1heChzLDApO3ZhciBlPU1hdGgucG93KC41LCgxLXQpLy4xMjUpLGk9TWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSksbj0xLWkqZSxyPXRoaXMuczAsbD10aGlzLnMxO3JldHVybiByPW4qci1lKmwrZSpoLGw9bipsK2UqcixoPWwsdGhpcy5zMD1yLHRoaXMuczE9bCxofTtsZXQgQT1jbGFzcyBDe2NvbnN0cnVjdG9yKHQscyl7dGhpcy5zYW1wbGVSYXRlPXQscz90aGlzLmJ1ZmZlcj1zLnNsaWNlKDApOih0aGlzLmJ1ZmZlcj1uZXcgRmxvYXQzMkFycmF5KDEwKnQpLHRoaXMuYnVmZmVyLmZpbGwoMCkpLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1yZXNldCgpe3RoaXMuYnVmZmVyLmZpbGwoMCksdGhpcy53cml0ZUlkeD0wLHRoaXMucmVhZElkeD0wfWNsb25lKCl7Y29uc3QgdD1uZXcgQyh0aGlzLnNhbXBsZVJhdGUsdGhpcy5idWZmZXIpO3JldHVybiB0LndyaXRlSWR4PXRoaXMud3JpdGVJZHgsdC5yZWFkSWR4PXRoaXMucmVhZElkeCx0fXdyaXRlKHQscyl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09dDtsZXQgZT1NYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuc2FtcGxlUmF0ZSpzKSx0aGlzLmJ1ZmZlci5sZW5ndGgtMSk7dGhpcy5yZWFkSWR4PXRoaXMud3JpdGVJZHgtZSx0aGlzLnJlYWRJZHg8MCYmKHRoaXMucmVhZElkeCs9dGhpcy5idWZmZXIubGVuZ3RoKX1yZWFkKCl7cmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMucmVhZElkeF19fTtjb25zdCB5PTEvNDhlMyxNPTI0LE49TS80O2NsYXNzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgcSBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5lbnY9bmV3IFR9dXBkYXRlKHQscyxlLGksbixyKXtyZXR1cm4gdGhpcy5lbnYuZXZhbCh0LHMsZSxpLG4scil9fWNsYXNzIEYgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9TSp0LzYwLGU9LjU7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSpzLHRoaXMucGhhc2UlMTxlPzE6LTF9fWNsYXNzIEQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuaW5TZ249ITAsdGhpcy5vdXRTZ249ITAsdGhpcy5jbG9ja0NudD0wfXVwZGF0ZSh0LHMpe2xldCBlPXQ+MDtyZXR1cm4gdGhpcy5pblNnbiE9ZSYmKHRoaXMuY2xvY2tDbnQrKyx0aGlzLmNsb2NrQ250Pj1zJiYodGhpcy5jbG9ja0NudD0wLHRoaXMub3V0U2duPSF0aGlzLm91dFNnbikpLHRoaXMuaW5TZ249ZSx0aGlzLm91dFNnbj8xOi0xfX1jbGFzcyBMIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBPPW5ldyBNYXA7Y2xhc3MgViBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1zLmlucHV0c1syXTtuJiZPLmhhcyhuKT90aGlzLmRlbGF5PU8uZ2V0KG4pLmNsb25lKCk6dGhpcy5kZWxheT1uZXcgQShlKSxuJiZPLnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIEcgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBrKHQscyl9fWNsYXNzIFIgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIEJ7Y29uc3RydWN0b3IoKXt0aGlzLnZhbHVlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnZhbHVlPXQsdGhpcy52YWx1ZX19Y29uc3QgJD0zNDA7bGV0IEk9MDtjbGFzcyBIe2NvbnN0cnVjdG9yKCl7dGhpcy5jaD1JLHRoaXMuc3RhcnRfc2VlZD0kKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9MS8oMTw8MjQpLEkrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT1NYXRoLnJhbmRvbSgpKjItMX11cGRhdGUodCl7cmV0dXJuIHQ/KHRoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTEsdGhpcy52YWx1ZSk6dGhpcy52YWx1ZX19Y2xhc3MgS3t1cGRhdGUodCl7cmV0dXJuIE1hdGgucmFuZG9tKCk8dCp5P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgV3tjb25zdHJ1Y3Rvcigpe3RoaXMub3V0PTB9dXBkYXRlKCl7bGV0IHQ9TWF0aC5yYW5kb20oKSoyLTE7cmV0dXJuIHRoaXMub3V0PSh0aGlzLm91dCsuMDIqdCkvMS4wMix0aGlzLm91dH19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe3RoaXMuYjA9MCx0aGlzLmIxPTAsdGhpcy5iMj0wLHRoaXMuYjM9MCx0aGlzLmI0PTAsdGhpcy5iNT0wLHRoaXMuYjY9MH11cGRhdGUoKXtjb25zdCB0PU1hdGgucmFuZG9tKCkqMi0xO3RoaXMuYjA9Ljk5ODg2KnRoaXMuYjArdCouMDU1NTE3OSx0aGlzLmIxPS45OTMzMip0aGlzLmIxK3QqLjA3NTA3NTksdGhpcy5iMj0uOTY5KnRoaXMuYjIrdCouMTUzODUyLHRoaXMuYjM9Ljg2NjUqdGhpcy5iMyt0Ki4zMTA0ODU2LHRoaXMuYjQ9LjU1KnRoaXMuYjQrdCouNTMyOTUyMix0aGlzLmI1PS0uNzYxNip0aGlzLmI1LXQqLjAxNjg5ODtjb25zdCBzPXRoaXMuYjArdGhpcy5iMSt0aGlzLmIyK3RoaXMuYjMrdGhpcy5iNCt0aGlzLmI1K3RoaXMuYjYrdCouNTM2MjtyZXR1cm4gdGhpcy5iNj10Ki4xMTU5MjYscyouMTF9fWNsYXNzIFkgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIHogZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCxzKXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxPHM/MTotMX19Y2xhc3MgWiBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5waGFzZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxKjItMX19Y2xhc3MgSntjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9RSh0aGlzLnBoYXNlLHMpLGk9Mip0aGlzLnBoYXNlLTEtZTtyZXR1cm4gdGhpcy5waGFzZSs9cyx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlLT0xKSxpfX1jbGFzcyBRIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTAsdGhpcy5zeW5jU2duPSExfXVwZGF0ZSh0LHMsZSl7IXRoaXMuc3luY1NnbiYmcz4wJiYodGhpcy5waGFzZT0wKSx0aGlzLnN5bmNTZ249cz4wO2xldCBpPSh0aGlzLnBoYXNlK2UpJTE7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LE1hdGguc2luKGkqMipNYXRoLlBJKX19Y2xhc3MgdHR7ZEJUb0xpbmVhcih0KXtyZXR1cm4gTWF0aC5wb3coMTAsdC8yMCl9bGluZWFyVG9EQih0KXtyZXR1cm4gMjAqTWF0aC5sb2cxMCh0KX11cGRhdGUodCxzLGUpe2xldCBpPXRoaXMubGluZWFyVG9EQihNYXRoLmFicyh0KSksbj0wO3JldHVybiBpPnMmJihuPShpLXMpKigxLTEvZSkpLHRoaXMuZEJUb0xpbmVhcigtbil9fWNsYXNzIHN0IGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3RoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0O2xldCBzPXRoaXMucGhhc2UlMTtyZXR1cm4oczwuNT8yKnM6MS0yKihzLS41KSkqMi0xfX1jbGFzcyBldCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1lLzMwO2coXyhuKSksdGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheShuKSx0aGlzLndyaXRlUG9zPTB9dXBkYXRlKHQscyxlLGkpe3JldHVybiB0aGlzLmJ1ZmZlclt0aGlzLndyaXRlUG9zXT10LHRoaXMud3JpdGVQb3MrKyx0aGlzLndyaXRlUG9zJXRoaXMuYnVmZmVyLmxlbmd0aD09MCYmKHRoaXMud3JpdGVQb3M9MCx0aGlzLnNlbmQoe3R5cGU6IlNFTkRfU0FNUExFUyIsaWQ6cyxzYW1wbGVzOnRoaXMuYnVmZmVyLGNoYW5uZWxzOmUsY2hhbm5lbDppfSkpLHR9fWNsYXNzIGl0e2NvbnN0cnVjdG9yKCl7dGhpcy5sYWdVbml0PTQ0MTAsdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyp0aGlzLmxhZ1VuaXQsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgaHR7Y29uc3RydWN0b3IoKXt0aGlzLmxhc3Q9MH11cGRhdGUodCxzLGUpe2NvbnN0IGk9cyp5LG49ZSp5O2xldCByPXQtdGhpcy5sYXN0O3JldHVybiByPmk/cj1pOnI8LW4mJihyPS1uKSx0aGlzLmxhc3QrPXIsdGhpcy5sYXN0fX1jbGFzcyBhdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgbnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMX19Y2xhc3MgcnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMH19Y2xhc3MgdXQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBzPDAmJihzPTApLHM9cysxLHQ9dCpzLDQqKE1hdGguYWJzKC4yNSp0Ky4yNS1NYXRoLnJvdW5kKC4yNSp0Ky4yNSkpLS4yNSl9fWNsYXNzIGx0IGV4dGVuZHMgb3t1cGRhdGUodCl7cmV0dXJuIHR9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmcoITEpfX1nZXRGcmVxKCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMuZnJlcTtjYXNlIm9mZiI6cmV0dXJuIHRoaXMuZnJlcTtkZWZhdWx0OmcoITEpfX1nZXRWZWxvY2l0eSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLnZlbG9jaXR5O2Nhc2Uib2ZmIjpyZXR1cm4gdGhpcy52ZWxvY2l0eTtkZWZhdWx0OmcoITEpfX19Y2xhc3Mgb3QgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWdhdGUifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRHYXRlKCl9fWNsYXNzIGN0IGV4dGVuZHMgbXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlmcmVxIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0RnJlcSgpfX1jbGFzcyBkdCBleHRlbmRzIG17Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgZnR7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBwdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgYnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBndCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBtdCBleHRlbmRzIG97dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyBTdHt1cGRhdGUodCxzLGUsaSxuKXtsZXQgcj1QKHQscyxlKTtyZXR1cm4gUyhyLGksbil9fWNsYXNzIHd0e3VwZGF0ZSh0LHMsZSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQscyksZSl9fWNsYXNzIHZ0e2NvbnN0cnVjdG9yKCl7dGhpcy5oaT0hMX11cGRhdGUodCl7cmV0dXJuIXRoaXMuaGkmJnQ+MD8odGhpcy5oaT0hMCwxKToodGhpcy5oaSYmdDw9MCYmKHRoaXMuaGk9ITEpLDApfX1jbGFzcyB5dHtjb25zdHJ1Y3Rvcigpe3RoaXMueDE9MCx0aGlzLngyPTAsdGhpcy55MT0wLHRoaXMueTI9MCx0aGlzLmEwPTEsdGhpcy5hMT0wLHRoaXMuYTI9MCx0aGlzLmIwPTEsdGhpcy5iMT0wLHRoaXMuYjI9MH11cGRhdGUodD0wLHM9MCxlPTUwMCxpPTEsbj0xKXtjb25zdCByPTIqTWF0aC5QSSplL3NhbXBsZVJhdGUsbD1NYXRoLnNpbihyKTtpPU1hdGgucG93KDEwLGkvMjApO2NvbnN0IHU9bC8oMippKSxjPU1hdGguY29zKHIpO2lmKHM9PT0wKXRoaXMuYjE9MS1jLHRoaXMuYjA9dGhpcy5iMS8yLHRoaXMuYjI9dGhpcy5iMCx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09MSl0aGlzLmIwPSgxK2MpLzIsdGhpcy5iMT0tKDErYyksdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0yKXRoaXMuYjA9bC8yLHRoaXMuYjE9MCx0aGlzLmIyPS10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0zKXRoaXMuYjA9MSx0aGlzLmIxPS0yKmMsdGhpcy5iMj0xLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT00KXRoaXMuYjA9MS11LHRoaXMuYjE9LTIqYyx0aGlzLmIyPTErdSx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09NSl7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKTt0aGlzLmIwPTErdSphLHRoaXMuYjE9LTIqYyx0aGlzLmIyPTEtdSphLHRoaXMuYTA9MSt1L2EsdGhpcy5hMT0tMipjLHRoaXMuYTI9MS11L2F9ZWxzZSBpZihzPT09Nil7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKSxkPTIqTWF0aC5zcXJ0KGEpKnUsZj0oYS0xKSpjLHA9KGErMSkqYzt0aGlzLmIwPWEqKGErMS1mK2QpLHRoaXMuYjE9MiphKihhLTEtcCksdGhpcy5iMj1hKihhKzEtZi1kKSx0aGlzLmEwPWErMStmK2QsdGhpcy5hMT0tMiooYS0xK3ApLHRoaXMuYTI9YSsxK2YtZH1lbHNlIGlmKHM9PT03KXtjb25zdCBhPU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQoYSkqdSxmPShhLTEpKmMscD0oYSsxKSpjO3RoaXMuYjA9YSooYSsxK2YrZCksdGhpcy5iMT0tMiphKihhLTErcCksdGhpcy5iMj1hKihhKzErZi1kKSx0aGlzLmEwPWErMS1mK2QsdGhpcy5hMT0yKihhLTEtcCksdGhpcy5hMj1hKzEtZi1kfXRoaXMuYjAvPXRoaXMuYTAsdGhpcy5iMS89dGhpcy5hMCx0aGlzLmIyLz10aGlzLmEwLHRoaXMuYTEvPXRoaXMuYTAsdGhpcy5hMi89dGhpcy5hMCx0aGlzLmEwPTE7Y29uc3QgYj10aGlzLmIwKnQrdGhpcy5iMSp0aGlzLngxK3RoaXMuYjIqdGhpcy54Mi10aGlzLmExKnRoaXMueTEtdGhpcy5hMip0aGlzLnkyO3JldHVybiB0aGlzLngyPXRoaXMueDEsdGhpcy54MT10LHRoaXMueTI9dGhpcy55MSx0aGlzLnkxPWIsYn19Y29uc3QgTXQ9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLEFEU1JOb2RlOnEsQXVkaW9JbjpsdCxBdWRpb05vZGU6byxCUEY6cnQsQmlxdWFkRmlsdGVyOnl0LEJyb3duTm9pc2VPc2M6VyxDQzpwdCxDTE9DS19QUFE6TSxDTE9DS19QUFM6TixDbGlwOnd0LENsb2NrOkYsQ2xvY2tEaXY6RCxDbG9ja091dDpMLERlbGF5OlYsRGlzdG9ydDpHLER1c3RPc2M6SyxGaWx0ZXI6bnQsRm9sZDp1dCxIb2xkOlIsSW1wdWxzZU9zYzpZLExhZzppdCxMY2dOb2lzZTpILE1pZGlDQzpidCxNaWRpRnJlcTpjdCxNaWRpR2F0ZTpvdCxNaWRpSW46bSxNaWRpVmVsOmR0LE5vaXNlT3NjOmosT3V0cHV0OkIsUGljazptdCxQaW5rTm9pc2U6WCxQdWxzZU9zYzp6LFJlbWFwOlN0LFNhd09zYzpKLFNjb3BlOmV0LFNlcXVlbmNlOmd0LFNpZGVjaGFpbkNvbXByZXNzb3I6dHQsU2lnbmFsOmZ0LFNpbmVPc2M6USxTbGV3Omh0LFNsaWRlOmF0LFRyaU9zYzpzdCxUcmlnOnZ0LFphd09zYzpafSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpLHg9bmV3IE1hcChPYmplY3QuZW50cmllcyhNdCkpO2NsYXNzIE90e2NvbnN0cnVjdG9yKHQscyl7Zyh0PT00OGUzKSx0aGlzLnNhbXBsZVJhdGU9dCx0aGlzLnBsYXlQb3M9MCx0aGlzLnNlbmQ9cyx0aGlzLnVuaXRzPVtdLHRoaXMudW5pdElEPTAsdGhpcy5mYWRlVGltZT0uMDEsdGhpcy5tYXhVbml0cz0xLHRoaXMucT1bXX1mYWRlT3V0VW5pdCh0KXt0LmZhZGVPdXQodGhpcy5wbGF5UG9zLHRoaXMuZmFkZVRpbWUpLHRoaXMuZnJlZVVuaXQodC5pZCx0aGlzLmZhZGVUaW1lKX1mYWRlT3V0VW5pdEJ5SWQodCl7Y29uc3Qgcz10aGlzLnVuaXRzLmZpbmQoZT0+ZS5pZD09PXQpO3MmJnRoaXMuZmFkZU91dFVuaXQocyl9ZmFkZU91dEFsbFVuaXRzKCl7dGhpcy51bml0cy5mb3JFYWNoKHQ9PnRoaXMuZmFkZU91dFVuaXQodCkpfWZhZGVPdXRPbGRVbml0cygpe2NvbnN0IHQ9dGhpcy51bml0cy5maWx0ZXIoZT0+ZS5hY3RpdmUpLHM9dC5sZW5ndGgtdGhpcy5tYXhVbml0cztzPD0wfHx0LnNsaWNlKDAscykuZm9yRWFjaChlPT50aGlzLmZhZGVPdXRVbml0KGUpKX1zdG9wKCl7dGhpcy5mYWRlT3V0QWxsVW5pdHMoKSx0aGlzLnNlbmQoe3R5cGU6IlNUT1AiLGZhZGVUaW1lOnRoaXMuZmFkZVRpbWV9KX1zcGF3blVuaXQodCxzKXtjb25zdCBlPW5ldyB4dCh0aGlzLnVuaXRJRCsrLHQsdGhpcy5zYW1wbGVSYXRlLHRoaXMuc2VuZCk7dGhpcy51bml0cy5wdXNoKGUpLGUuZmFkZUluKHRoaXMucGxheVBvcyx0aGlzLmZhZGVUaW1lKSx0aGlzLmZhZGVPdXRPbGRVbml0cygpLGNvbnNvbGUubG9nKGBzcGF3biB1bml0ICR7ZS5pZH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApLHMmJnRoaXMuc2NoZWR1bGVNZXNzYWdlKHttc2c6e3R5cGU6IkZBREVfT1VUX1VOSVQiLGlkOmUuaWR9LHRpbWU6c30pfWZyZWVVbml0KHQscyl7aWYocyl7dGhpcy5zY2hlZHVsZU1lc3NhZ2Uoe21zZzp7dHlwZToiRlJFRV9VTklUIixpZDp0fSx0aW1lOnN9KTtyZXR1cm59Y29uc3QgZT10aGlzLnVuaXRzLmxlbmd0aDt0aGlzLnVuaXRzPXRoaXMudW5pdHMuZmlsdGVyKGk9PmkuaWQhPT10KSxlPnRoaXMudW5pdHMubGVuZ3RoJiZjb25zb2xlLmxvZyhgZnJlZSB1bml0ICR7dH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApfXBhcnNlTXNnKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UiU1BBV05fVU5JVCI6dGhpcy5zcGF3blVuaXQodC51bml0LHQuZHVyYXRpb24pO2JyZWFrO2Nhc2UiRlJFRV9VTklUIjp0aGlzLmZyZWVVbml0KHQuaWQpO2JyZWFrO2Nhc2UiRkFERV9PVVRfVU5JVCI6dGhpcy5mYWRlT3V0VW5pdEJ5SWQodC5pZCk7YnJlYWs7Y2FzZSJOT1RFX09OIjp0aGlzLm5vdGVPbih0KTticmVhaztjYXNlIkNDIjp0aGlzLm1pZGlDQyh0KTticmVhaztjYXNlIlNFVF9DT05UUk9MIjp0aGlzLnNldENvbnRyb2wodCk7YnJlYWs7Y2FzZSJGQURFX1RJTUUiOnRoaXMuZmFkZVRpbWU9TnVtYmVyKHQuZmFkZVRpbWUpO2JyZWFrO2Nhc2UiTUFYX1VOSVRTIjp0aGlzLm1heFVuaXRzPU51bWJlcih0Lm1heFVuaXRzKTticmVhaztjYXNlIlNUT1AiOnRoaXMuc3RvcCgpO2JyZWFrO2Nhc2UiU0VUX1VHRU4iOnRoaXMuYWRkVWdlbih0LmNsYXNzTmFtZSx0LnVnZW4pO2JyZWFrO2Nhc2UiU0NIRURVTEVfTVNHIjp0aGlzLnNjaGVkdWxlTWVzc2FnZSh0KTticmVhaztjYXNlIkJBVENIX01TRyI6dC5tZXNzYWdlcy5mb3JFYWNoKHM9PnRoaXMucGFyc2VNc2cocykpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihgdW5rbm93biBtZXNzYWdlIHR5cGUgJHt0LnR5cGV9YCl9fW5vdGVPbih0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5ub3RlT24odCkpfW1pZGlDQyh0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5taWRpQ0ModCkpfXNldENvbnRyb2wodCl7dGhpcy51bml0cy5mb3JFYWNoKHM9PnMuc2V0Q29udHJvbCh0KSl9c2NoZWR1bGVNZXNzYWdlKHQpe2lmKHQudGltZT10aGlzLnBsYXlQb3MrdC50aW1lLCF0aGlzLnEubGVuZ3RoKXt0aGlzLnEucHVzaCh0KTtyZXR1cm59bGV0IHM9MDtmb3IoO3M8dGhpcy5xLmxlbmd0aCYmdGhpcy5xW3NdLnRpbWU8dC50aW1lOylzKys7dGhpcy5xLnNwbGljZShzLDAsdCl9Z2VuU2FtcGxlKHQpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy5wbGF5UG9zOyl0aGlzLnBhcnNlTXNnKHRoaXMucVswXS5tc2cpLHRoaXMucS5zaGlmdCgpO2lmKCF0aGlzLnVuaXRzLmxlbmd0aClyZXR1cm5bMCwwXTtjb25zdCBzPVswLDBdO2ZvcihsZXQgZT0wO2U8dGhpcy51bml0cy5sZW5ndGg7ZSsrKXtjb25zdCBpPXRoaXMudW5pdHNbZV0sbj1pLmdldExldmVsKHRoaXMucGxheVBvcyk7aS5nZW5TYW1wbGUodGhpcy5wbGF5UG9zLGkubm9kZXMsdCxpLnJlZ2lzdGVycyxpLm91dHB1dHMsaS5zb3VyY2VzKSxzWzBdKz1pLm91dHB1dHNbMF0qbixzWzFdKz1pLm91dHB1dHNbMV0qbn1yZXR1cm4gdGhpcy5wbGF5UG9zKz0xLzQ4ZTMsc31hZGRVZ2VuKHQscyl7Y29uc3QgZT1uZXcgRnVuY3Rpb24oYCR7c307cmV0dXJuICR7dH1gKSgpO3guc2V0KHQsZSl9fWNsYXNzIHh0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3RoaXMuaWQ9dCx0aGlzLnNhbXBsZVJhdGU9ZSx0aGlzLnNlbmQ9aSx0aGlzLm5vZGVzPVtdLHRoaXMuYWN0aXZlPSEwO2ZvcihsZXQgciBpbiBzLnVnZW5zKXtjb25zdCBsPXMudWdlbnNbcl07aWYoeC5oYXMobC50eXBlKSl7Y29uc3QgdT14LmdldChsLnR5cGUpLGM9TnVtYmVyKHIpO3RoaXMubm9kZXNbY109bmV3IHUoYyxsLHRoaXMuc2FtcGxlUmF0ZSx0aGlzLnNlbmQpfWVsc2UgY29uc29sZS53YXJuKGB1bmtub3duIHVnZW4gIiR7bC50eXBlfSJgKX10aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkocy5yZWdpc3RlcnMpLmZpbGwoMCk7bGV0IG49MTY7dGhpcy5vdXRwdXRzPW5ldyBBcnJheShuKS5maWxsKDApLHRoaXMuc291cmNlcz1uZXcgQXJyYXkobikuZmlsbCgwKSxzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCmArcy5zcmMsdGhpcy5nZW5TYW1wbGU9bmV3IEZ1bmN0aW9uKCJ0aW1lIiwibm9kZXMiLCJpbnB1dCIsInIiLCJvIiwicyIscy5zcmMpfW5vdGVPbih0KXt2YXIgdSxjLGI7Y29uc3R7Y2hhbm5lbDpzLG5vdGU6ZSx2ZWxvY2l0eTppfT10LG49dGhpcy5ub2Rlcy5maWx0ZXIoYT0+YS50eXBlPT09Im1pZGlmcmVxIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSkscj10aGlzLm5vZGVzLmZpbHRlcihhPT5hLnR5cGU9PT0ibWlkaWdhdGUiJiYoYS5jaGFubmVsPT09LTF8fGEuY2hhbm5lbD09PXMpKSxsPXRoaXMubm9kZXMuZmlsdGVyKGE9PmEudHlwZT09PSJtaWRpdmVsIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSk7aWYoaT4wKXtsZXQgYT1uLmZpbmQocD0+cC5pc0ZyZWUoKSl8fG5bMF0sZD1yLmZpbmQocD0+cC5pc0ZyZWUoKSl8fHJbMF0sZj1sLmZpbmQocD0+cC5pc0ZyZWUoKSl8fGxbMF07YT09bnVsbHx8YS5ub3RlT24oZSxpKSxkPT1udWxsfHxkLm5vdGVPbihlLGkpLGY9PW51bGx8fGYubm90ZU9uKGUsaSl9ZWxzZSh1PW4uZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fHUubm90ZU9mZigpLChjPXIuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGMubm90ZU9mZigpLChiPWwuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGIubm90ZU9mZigpfW1pZGlDQyh0KXtjb25zdHtjaGFubmVsOnMsY2M6ZSx2YWx1ZTppfT10O3RoaXMubm9kZXMuZm9yRWFjaChuPT57bi50eXBlPT09Im1pZGljYyImJihuLmNoYW5uZWw9PT0tMXx8bi5jaGFubmVsPT09cykmJm4uY2NudW1iZXI9PT1lJiZuLnNldFZhbHVlKGkpfSl9c2V0Q29udHJvbCh0KXtjb25zdHt2YWx1ZTpzLGlkOmV9PXQsaT10aGlzLm5vZGVzLmZpbmQobj0+bi50eXBlPT09ImNjIiYmbi5pZD09PWUpO2kmJmkuc2V0VmFsdWUocyl9Z2V0TGV2ZWwodCl7cmV0dXJuIHRoaXMuZmFkZVN0YXJ0PT09dm9pZCAwPzA6dGhpcy5hY3RpdmU/UygodC10aGlzLmZhZGVTdGFydCkvdGhpcy5mYWRlVGltZSwwLC4zKTpTKCh0LXRoaXMuZmFkZVN0YXJ0KS90aGlzLmZhZGVUaW1lLHRoaXMuZmFkZUZyb20sMCl9ZmFkZUluKHQscyl7dGhpcy5mYWRlU3RhcnQ9dCx0aGlzLmZhZGVUaW1lPXN9ZmFkZU91dCh0LHMpe3RoaXMuZmFkZVRpbWU9cyx0aGlzLmZhZGVGcm9tPXRoaXMuZ2V0TGV2ZWwodCksdGhpcy5hY3RpdmU9ITEsdGhpcy5mYWRlU3RhcnQ9dH1pc0RvbmUodCl7cmV0dXJuIXRoaXMuYWN0aXZlJiZ0aGlzLmdldExldmVsKHQpPT09MH19Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSx0aGlzLmF1ZGlvR3JhcGg9bmV3IE90KDQ4ZTMsdGhpcy5wb3J0LnBvc3RNZXNzYWdlLmJpbmQodGhpcy5wb3J0KSl9b25tZXNzYWdlKHQpe2xldCBzPXQuZGF0YTt0aGlzLmF1ZGlvR3JhcGgucGFyc2VNc2cocyl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1zWzBdLG49dFswXVswXSxyPWlbMF0sbD1pWzFdO2ZvcihsZXQgdT0wO3U8ci5sZW5ndGg7dSsrKXtsZXRbYyxiXT10aGlzLmF1ZGlvR3JhcGguZ2VuU2FtcGxlKG4/blt1XTowKTtyW3VdPWMsbFt1XT1ifXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2FtcGxlLWdlbmVyYXRvciIsVHQpfSkoKTsK",qv="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIG4gZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiaXNSZWNvcmRpbmciLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuX2J1ZmZlclNpemU9MjA0OCx0aGlzLl9idWZmZXI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl9idWZmZXJTaXplKSx0aGlzLl9pbml0QnVmZmVyKCl9X2luaXRCdWZmZXIoKXt0aGlzLl9ieXRlc1dyaXR0ZW49MH1faXNCdWZmZXJFbXB0eSgpe3JldHVybiB0aGlzLl9ieXRlc1dyaXR0ZW49PT0wfV9pc0J1ZmZlckZ1bGwoKXtyZXR1cm4gdGhpcy5fYnl0ZXNXcml0dGVuPT09dGhpcy5fYnVmZmVyU2l6ZX1fYXBwZW5kVG9CdWZmZXIoZSl7dGhpcy5faXNCdWZmZXJGdWxsKCkmJnRoaXMuX2ZsdXNoKCksdGhpcy5fYnVmZmVyW3RoaXMuX2J5dGVzV3JpdHRlbl09ZSx0aGlzLl9ieXRlc1dyaXR0ZW4rPTF9X2ZsdXNoKCl7bGV0IGU9dGhpcy5fYnVmZmVyO3RoaXMuX2J5dGVzV3JpdHRlbjx0aGlzLl9idWZmZXJTaXplJiYoZT1lLnNsaWNlKDAsdGhpcy5fYnl0ZXNXcml0dGVuKSksdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtldmVudFR5cGU6ImRhdGEiLGF1ZGlvQnVmZmVyOmV9KSx0aGlzLl9pbml0QnVmZmVyKCl9X3JlY29yZGluZ1N0b3BwZWQoKXt0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZToic3RvcCJ9KX1wcm9jZXNzKGUsbyxoKXtjb25zdCBpPWguaXNSZWNvcmRpbmcsZj1vWzBdLHM9ZVswXSx1PWZbMF0sXz1mWzFdO2xldCByPSExO2ZvcihsZXQgdD0wO3Q8dS5sZW5ndGg7dCsrKXQ8aS5sZW5ndGgmJihyPWlbdF09PT0xKSwhciYmIXRoaXMuX2lzQnVmZmVyRW1wdHkoKSYmKHRoaXMuX2ZsdXNoKCksdGhpcy5fcmVjb3JkaW5nU3RvcHBlZCgpKSxyJiYodGhpcy5fYXBwZW5kVG9CdWZmZXIoc1swXVt0XSksdGhpcy5fYXBwZW5kVG9CdWZmZXIoc1sxXVt0XSkpLHVbdF09c1swXVt0XSxfW3RdPXNbMV1bdF07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJyZWNvcmRlciIsbil9KSgpOwo=";function $v(e,t,n){if(e.length<1)return;e[0];const s=3,r=32,i=e.map(m=>m.length).reduce((m,g)=>m+g,0),a=r/8,o=n*a,u=44,c=new ArrayBuffer(u+i*a),h=new DataView(c);jr(h,0,"RIFF"),h.setUint32(4,36+i*a,!0),jr(h,8,"WAVE"),jr(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,s,!0),h.setUint16(22,n,!0),h.setUint32(24,t,!0),h.setUint32(28,t*o,!0),h.setUint16(32,o,!0),h.setUint16(34,r,!0),jr(h,36,"data"),h.setUint32(40,i*a,!0);let d=44;for(const m of e)eX(h,d,m),d+=m.length*a;return c}function jr(e,t,n){for(let s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))}function eX(e,t,n){for(var s=0;s<n.length;s++,t+=4)e.setFloat32(t,n[s],!0)}const cc=Object.freeze(Object.defineProperty({__proto__:null,Node:Ae,compile:Eo,evaluate:_b,exit:Kb,exportModule:Kv,getInletName:Yv,getNode:Hb,module:It,n:Jt,node:ks,nodeRegistry:Pt,outputType:Wa,polyType:_n,register:gt,registerNode:$},Symbol.toStringTag,{value:"Module"}));let tX=e=>`Math.sin(${e})`,nX=e=>`Math.cos(${e})`,sX=e=>`Math.tan(${e})`,rX=e=>`Math.asin(${e})`,iX=e=>`Math.acos(${e})`,aX=e=>`Math.atan(${e})`,Ub=(e,t,n)=>`${e} = ${t};${n?` /* ${n} */`:""}`,Ro=(e,...t)=>Ub(e.name,`nodes[${e.ugenIndex}].update(${t.join(",")})`,e.node.type),oX=e=>`(2 ** ((${e} - 69) / 12) * 440)`,uX=(e,t)=>`${e} ** ${t}`,cX=e=>`Math.exp(${e})`,lX=e=>`Math.log(${e})`,pX=(e,t)=>`${e}%${t}`,hX=e=>`Math.abs(${e})`,dX=e=>`Math.round(${e})`,mX=e=>`Math.floor(${e})`,fX=e=>`Math.sign(${e})`,yX=e=>`Math.ceil(${e})`,gX=(e,t)=>`Math.min(${e}, ${t})`,bX=(e,t)=>`Math.max(${e}, ${t})`,MX=(e,t)=>`[${e}, ${t}]`,Mr=e=>`${e}[0]`,xX=e=>`${e}[1]`,GX=(e,t)=>`(${Mr(e)} < ${Mr(t)} ? ${e} : ${t})`,CX=(e,t)=>`(${Mr(e)} > ${Mr(t)} ? ${e} : ${t})`;const PX=Object.freeze(Object.defineProperty({__proto__:null,abs:hX,ceil:yX,def:Ub,defAcos:iX,defAsin:rX,defAtan:aX,defCos:nX,defSin:tX,defTan:sX,defUgen:Ro,exp:cX,floor:mX,log:lX,max:bX,midinote:oX,min:gX,mod:pX,pair_a:Mr,pair_a_max:CX,pair_a_min:GX,pair_b:xX,pair_make:MX,pow:uX,round:dX,sign:fX},Symbol.toStringTag,{value:"Module"}));class vX{constructor(t=null){this.ugens=new Map,this.outputNode=t}async spawn(t,n){this.graph=t;const{src:s,ugens:r,registers:i}=t.compile({log:!1});!this.mouse&&s.includes("mouse")&&this.initMouse(),!this.midiInited&&r.some(a=>a.type.startsWith("Midi"))&&this.initMidi(),!this.audioIn&&r.some(a=>a.type==="AudioIn")&&await this.initAudioIn(),this.sendCustomUgens(),this.send({type:"SPAWN_UNIT",unit:{src:s,ugens:r,registers:i},duration:n})}registerUgen(t){this.ugens.set(t.name,t)}sendCustomUgens(){if(!this.ugens.size)return;let t=[];for(let[n,s]of this.ugens)t.push({type:"SET_UGEN",className:n,ugen:s+""});this.send({type:"BATCH_MSG",messages:t})}scheduleMessage(t,n){this.send({type:"SCHEDULE_MSG",msg:t,time:n})}setControl(t,n,s){const r={type:"SET_CONTROL",id:t,value:n};s?this.send({type:"SCHEDULE_MSG",time:s,msg:r}):this.send(r)}setControls(t){const n={type:"BATCH_MSG",messages:t.map(s=>{const r={type:"SET_CONTROL",id:s.id,value:s.value};return s.time===void 0?r:{type:"SCHEDULE_MSG",time:s.time,msg:r}})};this.send(n)}async initAudioIn(){console.log("init audio input...");const t=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});this.audioCtx.createMediaStreamSource(t).connect(this.audioWorklet)}initMidi(){console.log("init midi input..."),this.midiInited=!0,new Uv().on("midimessage",(t,n)=>{const s=Jv(n);s&&this.send(s)})}initMouse(){console.log("init mouse"),this.mouse=new Ov,this.mouse.on("move",(t,n)=>{this.setControl("mouseX",t),this.setControl("mouseY",n)})}send(t){Ba(t instanceof Object),this.audioWorklet&&this.audioWorklet.port.postMessage(t)}async init(){if(!this.audioCtx){if(Ba(!this.audioCtx),this.audioCtx=this.outputNode?.context||new AudioContext({latencyHint:"interactive",sampleRate:48e3}),await this.audioCtx.resume(),!this.audioCtx.audioWorklet)throw new Error("Audio cannot be loaded: non-secure origin? (AudioContext.audioWorklet is undefined)");await this.audioCtx.audioWorklet.addModule(Qv),await this.audioCtx.audioWorklet.addModule(qv),this.audioWorklet=new AudioWorkletNode(this.audioCtx,"sample-generator",{outputChannelCount:[2]}),this.audioWorklet.port.onmessage=t=>{const{id:n,time:s,type:r}=t.data;r==="SIGNAL_TRIGGER"?this.graph.dfs(i=>{if(i.type==="signal"&&i.id===n){const a=i.callback(s,n);isNaN(a)?a!==void 0&&console.warn(`expected number from "on" callback with id "${n}", got "${a}" instead.`):window.postMessage({type:"KABELSALAT_SET_CONTROL",value:a,id:n})}return i}):r==="STOP"?setTimeout(()=>this.destroy(),t.data.fadeTime*1e3+200):r==="SEND_SAMPLES"&&this.graph.dfs(i=>(i.type!=="scope"||i.ins.length<2||i.ins[1].value!==n||window.postMessage({type:"KABELSALAT_UPDATE_SCOPE",samples:t.data.samples,channels:t.data.channels,channel:t.data.channel,id:n}),i))},this.recorder=new window.AudioWorkletNode(this.audioCtx,"recorder"),this.audioWorklet.connect(this.recorder),this.sendCustomUgens(),this.recorder.connect(this.outputNode||this.audioCtx.destination),this.recorder.port.onmessage=t=>{if(t.data.eventType==="data"&&this.recordedBuffers.push(t.data.audioBuffer),t.data.eventType==="stop"){console.log("recording stopped");const n=$v(this.recordedBuffers,this.audioCtx.sampleRate,2);XX(n,"kabelsalat.wav","audio/wav"),this.recordedBuffers=[]}},this.recordOnPlay&&this.record()}}destroy(){this.audioWorklet?.disconnect(),this.audioWorklet=null,this.recorder?.disconnect(),this.recorder=null,!this.outputNode&&this.audioCtx?.close(),this.audioCtx=null}stop(){this.audioCtx&&this.send({type:"STOP"}),this.mouse?.detach()}record(){if(!this.audioCtx){this.recordOnPlay=!0;return}this.recordedBuffers=[],this.recorder.parameters.get("isRecording").setValueAtTime(1,0),console.log("recording started")}stopRecording(){this.recordOnPlay=!1,this.audioCtx&&this.recorder.parameters.get("isRecording").setValueAtTime(0,0)}set fadeTime(t){this.send({type:"FADE_TIME",fadeTime:t})}set maxUnits(t){this.send({type:"MAX_UNITS",maxUnits:t})}}function XX(e,t,n){const s=new Blob([e],{type:n}),r=document.createElement("a");r.href=window.URL.createObjectURL(s),r.download=t,r.click()}let wX=0;gt("signal",(e,t)=>{const n=wX++,s=getNode("signal",e,n);return s.callback=t,s.id=n,s},{ugen:"Signal",compile:({vars:[e,t],...n})=>Ro(n,e,t,"time")});let ZX=e=>`sin(${e})`,FX=e=>`cos(${e})`,AX=e=>`tan(${e})`,DX=e=>`asin(${e})`,SX=e=>`acos(${e})`,LX=e=>`atan(${e})`,Na=(e,t,n)=>`${e} = ${t};${n?` /* ${n} */`:""}`,EX=(e,...t)=>{if(t.unshift(`nodes[${e.ugenIndex}]`),e.ugen==="Sequence"||e.ugen==="Pick"){const n=t.length-2,s=`(float[${n}]){${t.slice(2).join(",")}}`;return Na(e.name,`${e.ugen}_update(${t[0]}, ${t[1]}, ${n}, ${s})`,e.ugen)}return Na(e.name,`${e.ugen}_update(${t.join(",")})`,e.ugen)},RX=e=>`pow(2.0, ((${e} - 69.0) / 12.0)) * 440.0`,kX=(e,t)=>`pow(${e}, ${t})`,VX=e=>`exp(${e})`,zX=e=>`log(${e})`,BX=(e,t)=>`${e}>=${t}?${e}-${t}:${e}`,WX=e=>`fabs(${e})`,NX=(e,t)=>`fmin(${e}, ${t})`,TX=(e,t)=>`fmax(${e}, ${t})`,IX=e=>`fround(${e})`,YX=e=>`floor(${e})`,HX=e=>`ceil(${e})`,KX=(e,t)=>`((pair) {${e}, ${t}})`,xr=e=>`${e}.a`,_X=e=>`${e}.b`,jX=(e,t)=>`(${xr(e)} < ${xr(t)} ? ${e} : ${t})`,UX=(e,t)=>`(${xr(e)} > ${xr(t)} ? ${e} : ${t})`;const JX=Object.freeze(Object.defineProperty({__proto__:null,abs:WX,ceil:HX,def:Na,defAcos:SX,defAsin:DX,defAtan:LX,defCos:FX,defSin:ZX,defTan:AX,defUgen:EX,exp:VX,floor:YX,log:zX,max:TX,midinote:RX,min:NX,mod:BX,pair_a:xr,pair_a_max:UX,pair_a_min:jX,pair_b:_X,pair_make:KX,pow:kX,round:IX},Symbol.toStringTag,{value:"Module"})),I={js:PX,c:JX},Jb=(e,t)=>$(e,{ugen:t,compile:({vars:n,...s})=>I[s.lang].defUgen(s,...n)});let OX=gt("time",e=>new Ae("time",e),{tags:["meta"],description:"Returns elapsed time in seconds",compile:({name:e,lang:t})=>I[t].def(e,"time")}),QX=gt("raw",(e,t)=>new Ae("raw",t).withIns(Jt(e)),{ins:[{name:"in"},{name:"code",description:"expression with variable `t` being the elapsed time and `$input` the input."}],tags:["meta"],description:"Raw code node, expects floats between -1 and 1",compile:({vars:e,node:t,name:n})=>`let $input = ${e[0]}; 
const ${n} = (${t.value}); // raw`,examples:[`sine(4).range(.5,1)
.raw("(time*110%1*2-1)*$input")
.out()`]}),qX=gt("bytebeat",(e,t)=>new Ae("bytebeat",t).withIns(Jt(e)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"bytebeat code with variable `t`"}],tags:["meta"],description:"Bytebeat node, expects numbers from 0 to 255",examples:[`time().mul(8000).bytebeat\`
// Fractalized Past
// by: lhphr
// from: https://dollchan.net/btb/res/3.html#69

(t>>10^t>>11)%5*((t>>14&3^t>>15&1)+1)*t%99+((3+(t>>14&3)-(t>>16&1))/3*t%99&64)
\`.out()`],compile:({vars:e,node:t,name:n})=>`let t = ${e[0]}; 
const ${n} = ((${t.value}) & 255) / 127.5 - 1; // bytebeat`}),$X=gt("floatbeat",(e,t)=>new Ae("bytebeat",t).withIns(Jt(e)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"floatbeat code with variable `t`"}],tags:["meta"],description:"Raw code node, expects numbers from -1 to 1",compile:({vars:e,node:t,name:n})=>`let t = ${e[0]}; const ${n} = (${t.value}); // floatbeat`}),ew=$("adsr",{ugen:"ADSRNode",tags:["envelope"],description:"ADSR envelope",examples:[`impulse(1).perc(.5)
.adsr(.01, .1, .5, .1)
.mul(sine(220)).out()`],ins:[{name:"gate",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"},{name:"sus",default:.2,description:"sustain level"},{name:"rel",default:.1,description:"release time"}],compile:({vars:[e=0,t=.02,n=.1,s=.2,r=.1],...i})=>I[i.lang].defUgen(i,"time",e,t,n,s,r)}),tw=It("ar",(e=0,t=.02,n=.1)=>e.adsr(t,0,1,n),{tags:["envelope"],description:"AR envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"rel",default:.1,description:"release time"}]}),nw=It("ad",(e=0,t=.02,n=.1)=>e.adsr(t,n,0,n),{tags:["envelope"],description:"AD envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"}]}),sw=$("clock",{ugen:"Clock",internal:!0,tags:["regular","clock"],description:"Clock source, with tempo in BPM",examples:["clock(120).clockdiv(16).mul(sine(220)).out()"],ins:[{name:"bpm",default:120,description:"clock tempo in bpm (beats per minute)"}],compile:({vars:[e=120],...t})=>I[t.lang].defUgen(t,e)}),rw=$("clockdiv",{ugen:"ClockDiv",tags:["clock","trigger"],description:"Clock signal divider",examples:["impulse(8).clockdiv(2).ad(.1,.1).mul(sine(220)).out()"],ins:[{name:"clock",default:0,description:"clock input"},{name:"divisor",default:2,description:"tempo divisor"}],compile:({vars:[e=0,t=2],...n})=>I[n.lang].defUgen(n,e,t)}),iw=$("distort",{ugen:"Distort",tags:["fx","distortion"],description:"Overdrive-style distortion",examples:[`sine(220)
.distort( saw(.5).range(0,1) )
.out()`],ins:[{name:"in",default:0},{name:"amt",default:0,description:"distortion amount"}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),Ob=$("noise",{ugen:"NoiseOsc",tags:["source","noise"],description:"White noise source",examples:["noise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."}],compile:({lang:e,vars:[t=1],...n})=>I[e].defUgen(n,t)}),aw=$("lcgnoise",{ugen:"LcgNoise",tags:["source","noise"],description:"Lcg white noise source.",examples:["lcgnoise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."},{name:"reset",default:0,description:"if 1, the random number generator sequence will reset."}],compile:({lang:e,vars:[t=1,n=0],...s})=>I[e].defUgen(s,t,n)}),ow=$("pink",{ugen:"PinkNoise",tags:["source","noise"],description:"Pink noise source",examples:["pink().mul(.5).out()"],ins:[],compile:({lang:e,...t})=>I[e].defUgen(t)}),uw=$("brown",{ugen:"BrownNoiseOsc",tags:["source","noise"],description:"Brown noise source",examples:["brown().out()"],ins:[],compile:({lang:e,...t})=>I[e].defUgen(t)}),cw=$("dust",{ugen:"DustOsc",tags:["trigger","noise","source"],description:"Generates random impulses from 0 to +1.",examples:["dust(200).out()"],ins:[{name:"density",default:0,description:"average impulses per second"}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),Qb=$("impulse",{ugen:"ImpulseOsc",tags:["regular","trigger"],description:"Regular single sample impulses (0 - 1)",examples:["impulse(10).out()"],ins:[{name:"freq",default:0},{name:"phase",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),lw=$("saw",{ugen:"SawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with anti aliasing",examples:["saw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),pw=$("zaw",{ugen:"ZawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with sharp edges. Use saw for anti aliased variant.",examples:["zaw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),hw=$("sine",{tags:["regular","waveform","source"],ugen:"SineOsc",description:"Sine wave oscillator",examples:["sine(220).out()"],ins:[{name:"freq",default:0},{name:"sync",default:0,description:"sync input"},{name:"phase",default:0,description:"phase offset"}],compile:({vars:[e=0,t=0,n=0],...s})=>I[s.lang].defUgen(s,e,t,n)}),dw=$("tri",{ugen:"TriOsc",tags:["regular","waveform","source"],description:"Triangle wave oscillator",examples:["tri(220).out()"],ins:[{name:"freq",default:0}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),mw=$("pulse",{ugen:"PulseOsc",tags:["regular","waveform","source"],description:"Pulse wave oscillator",examples:["pulse(220, sine(.1).range(.1,.5)).mul(.5).out()"],ins:[{name:"freq",default:0},{name:"pw",default:.5,description:"pulse width 0 - 1"}],compile:({vars:[e=0,t=.5],...n})=>I[n.lang].defUgen(n,e,t)}),fw=$("slide",{ugen:"Slide",tags:["fx"],internal:!0,description:"Slide/portamento node",examples:[`impulse(2).seq(55,110,220,330)
.slide(4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1}],compile:({vars:[e=0,t=1],...n})=>I[n.lang].defUgen(n,e,t)}),yw=$("lag",{ugen:"Lag",tags:["fx"],description:"Smoothes a signal. Good for slide / portamento effects.",examples:[`impulse(2).seq(220,330,440,550)
.lag(.4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1,description:"60 dB lag time in seconds"}],compile:({vars:[e=0,t=1],...n})=>I[n.lang].defUgen(n,e,t)}),gw=$("slew",{ugen:"Slew",tags:["fx"],description:"Limits the slope of an input signal. The slope is expressed in units per second.",examples:["pulse(800).slew(4000, 4000).out()"],ins:[{name:"in",default:0},{name:"up",default:1,description:"Maximum upward slope in units per second"},{name:"dn",default:1,description:"Maximum downward slope in units per second"}],compile:({vars:[e=0,t=1,n=1],...s})=>I[s.lang].defUgen(s,e,t,n)}),qb=$("filter",{ugen:"Filter",tags:["fx","filter"],internal:!0,description:"Two-pole low-pass filter",examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"],ins:[{name:"in",default:0},{name:"cutoff",default:1},{name:"reso",default:0}],compile:({vars:[e=0,t=1,n=0],...s})=>I[s.lang].defUgen(s,e,t,n)}),bw=$("fold",{ugen:"Fold",tags:["fx","distortion","limiter"],description:'Distort incoming audio signal by "folding"',examples:[`sine(55)
.fold( sine(.5).range(0.2,4) )
.out()`],ins:[{name:"in",default:0},{name:"rate",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),Mw=$("seq",{ugen:"Sequence",tags:["sequencer"],description:"Trigger controlled sequencer",examples:[`impulse(2).seq(220,330,440,550)
.sine().out()`],ins:[{name:"trig",default:0},{name:"step",default:0,dynamic:!0,description:"step inputs"}],compile:({vars:e,...t})=>I[t.lang].defUgen(t,...e)}),xw=$("delay",{ugen:"Delay",tags:["fx"],description:"Delay line node",examples:[`impulse(1).ad(.01,.2).mul(sine(220))
.add(x=>x.delay(.1).mul(.8)).out()`],ins:[{name:"in",default:0},{name:"time",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),Gw=$("hold",{ugen:"Hold",tags:["fx"],description:"Sample and hold",examples:[`noise().hold(impulse(2))
.range(220,880).sine().out()`],ins:[{name:"in",default:0},{name:"trig",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),Cw=$("midifreq",{ugen:"MidiFreq",tags:["external","midi"],description:"Outputs frequency of midi note in. Multiple instances will do voice allocation",examples:["midifreq().sine().out()"],ins:[{name:"channel",default:-1,description:"Channel filter. Defaults to all channels"}],compile:({vars:[e=-1],...t})=>I[t.lang].defUgen(t,e)}),Pw=$("midigate",{ugen:"MidiGate",tags:["external","midi"],description:"outputs gate of midi note in. Multiple instances will do voice allocation",examples:["midigate().lag(1).mul(sine(220)).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[e=-1],...t})=>I[t.lang].defUgen(t,e)}),vw=$("midivel",{ugen:"MidiVel",tags:["external","midi"],description:"outputs velocity of midi note in. Multiple instances will do voice allocation",examples:["midigate().ar(0.01,0.2).mul(saw(midifreq())).mul(midivel()).mul(.8).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[e=-1],...t})=>I[t.lang].defUgen(t,e)}),Xw=$("midicc",{ugen:"MidiCC",tags:["external","midi"],description:"Outputs bipolar value of given midi cc number. initValue can be set to be the output before getting first cc message.",examples:["midicc(74).range(100,200).sine().out()"],ins:[{name:"ccnumber",default:-1},{name:"channel",default:-1},{name:"initValue",default:-1}],compile:({vars:[e=-1,t=-1],...n})=>I[n.lang].defUgen(n,e,t)}),ko=$("cc",{ugen:"CC",tags:["external"],description:"CC control",ins:[{name:"id",default:0},{name:"value",default:0}],compile:({vars:[e],...t})=>I[t.lang].defUgen(t,e)}),ww=$("audioin",{ugen:"AudioIn",tags:["source","external"],description:"External Audio Input, depends on your system input",examples:["audioin().add(x=>x.delay(.1).mul(.8)).out()"],ins:[],compile:e=>I[e.lang].defUgen(e,"input")}),Ta=$("log",{tags:["math"],description:"calculates the logarithm (base 10) of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].log(e))}),$b=$("exp",{tags:["math"],description:"raises e to the power of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].exp(e))}),Zw=$("pow",{tags:["math"],description:"raises the input to the given power",ins:[{name:"in"},{name:"power"}],compile:({vars:[e=0,t=1],name:n,lang:s})=>I[s].def(n,I[s].pow(e,t))}),eM=$("sin",{tags:["math"],description:"calculates the sine of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defSin(e))}),tM=$("cos",{tags:["math"],description:"calculates the cosine of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defCos(e))}),Fw=$("tan",{tags:["math"],description:"calculates the tan of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defTan(e))}),Aw=$("acos",{tags:["math"],description:"calculates the acos of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defAcos(e))}),Dw=$("asin",{tags:["math"],description:"calculates the asin of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defAsin(e))}),Sw=$("atan",{tags:["math"],description:"calculates the atan of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defAtan(e))}),Lw=$("mul",{tags:["math"],description:"Multiplies the given signals.",examples:["sine(220).mul( sine(4).range(.25,1) ).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" * ")||0)}),Vo=$("add",{tags:["math"],description:"sums the given signals",examples:["n([0,3,7,10]).add(60).midinote().sine().mix(2).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" + ")||0)}),Ew=$("div",{tags:["math"],description:"adds the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" / ")||0)}),Rw=$("sub",{tags:["math"],description:"subtracts the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" - ")||0)}),kw=$("mod",{tags:["math"],description:"calculates the modulo",examples:["add(x=>x.add(.003).mod(1)).out()"],ins:[{name:"in"},{name:"modulo"}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,I[n].mod(...e)||0)}),Vw=$("abs",{tags:["math"],description:"returns the absolute value of the signal",ins:[{name:"in"}],examples:["sine(440).abs().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].abs(e))}),zw=$("round",{tags:["math"],description:"Rounds the signal to the nearest integer",ins:[{name:"in"}],examples:["sine(440.5).round().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].round(e))}),Bw=$("clamp",{tags:["math"],description:"Clamps the signal to stay within the given range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine(440.5).clamp(-.6,.6).out()"],compile:({vars:[e=0,t=-1,n=1],name:s,lang:r})=>{const i=I[r].min(t,n),a=I[r].max(t,n),o=I[r].min(I[r].max(e,i),a);return I[r].def(s,o)}}),Ww=$("floor",{tags:["math"],description:"Rounds the signal down",ins:[{name:"in"}],examples:["sine(440.5).floor().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].floor(e))}),Nw=$("ceil",{tags:["math"],description:"Rounds the signal up",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].ceil(e))}),Tw=$("sign",{tags:["math"],description:"Returns 1 if positive and -1 if negative. uses Math.sign",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].sign(e))}),Iw=$("min",{tags:["math"],description:"returns the minimum of the given signals",examples:["impulse(4).apply(x => min(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.reduce(I[n].min)||0)}),Yw=$("max",{tags:["math"],description:"returns the maximum of the given signals",examples:["impulse(4).apply(x => max(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.reduce(I[n].max)||0)}),Hw=$("argmin",{tags:["math"],description:"returns the index of the minimum of the given signals",examples:["argmin(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,I[n].pair_b(e.map(I[n].pair_make).reduce(I[n].pair_a_min))||0)}),Kw=$("argmax",{tags:["math"],description:"returns the index of the maximum of the given signals",examples:["argmax(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,I[n].pair_b(e.map(I[n].pair_make).reduce(I[n].pair_a_max))||0)}),nM=$("greater",{tags:["logic"],description:"returns 1 if input is greater then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`greater(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} > ${t}`)}),sM=$("lower",{tags:["logic"],description:"returns 1 if input is lower then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`lower(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} < ${t}`)}),_w=nM,jw=sM,Uw=$("xor",{tags:["logic"],description:"returns 1 if exactly one of the inputs is 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} != ${t} ? 1 : 0`)}),Jw=$("and",{tags:["logic"],description:"returns 1 if both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} && ${t} ? 1 : 0`)}),Ow=$("or",{tags:["logic"],description:"returns 1 if one or both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} || ${t} ? 1 : 0`)}),Qw=$("not",{tags:["logic"],description:"returns 1 if input is 0, otherwise 0",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,`(${e} === 0 ? 1 : 0)`)}),qw=$("bool",{tags:["logic"],description:"returns 1 signal is non zero. inspired by genish",ins:[{name:"a"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,`(${e} === 0 ? 0 : 1)`)}),$w=$("ifelse",{tags:["logic"],description:"if control is 1, a is returned, otherwise b",ins:[{name:"control"},{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0,n=0],name:s,lang:r})=>I[r].def(s,`(${e} === 1 ? ${t} : ${n})`),examples:["ifelse(pulse(1), sine(220), sine(330)).out()"]}),eZ=$("range",{tags:["math"],description:"Scales the incoming bipolar value to the given range.",examples:["sine(.5).range(.25,1).mul(sine(440)).out()"],ins:[{name:"in"},{name:"min"},{name:"max"}],compile:({vars:e,name:t,lang:n})=>{const[s,r,i,a=1]=e,o=`((${s} + 1) * 0.5)`,u=a===1?o:I[n].pow(o,a);return I[n].def(t,`${u} * (${i} - ${r}) + ${r}`)}}),tZ=$("remap",{ugen:"Remap",tags:["math"],description:"Remaps input from one value range to another",ins:[{name:"in"},{name:"inmin"},{name:"inmax"},{name:"outmin"},{name:"outmax"}],compile:({vars:[e=0,t=-1,n=1,s=-1,r=1],...i})=>I[i.lang].defUgen(i,e,t,n,s,r)}),nZ=$("thru",{compile:({name:e,vars:t,lang:n})=>I[n].def(e,t[0],"thru")}),sZ=It("rangex",(e,t,n)=>{let s=Ta(t),r=Ta(n).sub(s),i=e.unipolar().mul(r).add(s);return $b(i)},{tags:["math"],description:"exponential range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine([1,3]).rangex(100, 2e3).sine().out()"]}),rZ=$("midinote",{compile:({vars:[e],name:t,lang:n})=>I[n].def(t,I[n].midinote(e)),tags:["math"],description:"convert midi number to frequency",ins:[{name:"midi"}],examples:[`impulse(4).seq(0,3,7,12).add(60)
.midinote().sine().out()`]}),iZ=$("src",{internal:!0,compile:({vars:[e=0],name:t,lang:n,...s})=>I[n].def(t,s.getSource(e),`read source ${e}`)}),aZ=$("output",{internal:!0,ugen:"Output",compile:({vars:[e,t=0],name:n,lang:s,...r})=>{const i=r.getOutput(t),a=r.getSource(t);return[I[s].def(i,[i,e].join(" + "),`+ output ${t}`),I[s].def(a,i,`write source ${t}`)].join(`
`)}}),rM=$("poly"),iM=Jt(Math.PI),oZ=gt("fork",(e,t=1)=>rM(...Array.from({length:t},()=>e.clone())),{ins:[{name:"in"},{name:"times"}],tags:["multi-channel"],description:"split the signal into n channels",examples:["dust(4).fork(2).adsr(.1).mul(sine(220)).out()"]}),uZ=It("perc",(e,t)=>e.adsr(0,0,1,t),{tags:["envelope"],description:"percussive envelope. usable with triggers or gates",ins:[{name:"gate"},{name:"release"}],examples:["impulse(4).perc(.1).mul( pink() ).out()"]}),cZ=It("hpf",(e,t,n=0)=>e.sub(e.lpf(t,n)),{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],examples:["tri([220,331,442]).mix().hpf(sine(.5).range(0,.9)).out()"]}),lZ=It("lpf",qb,{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"low pass filter",tags:["fx","filter"],examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"]}),pZ=$("bpf",{ugen:"BPF",ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],compile:({vars:[e=0,t=1,n=0],...s})=>I[s.lang].defUgen(s,e,t,n)}),hZ=It("lfnoise",e=>Ob().hold(Qb(e)),{ins:[{name:"freq"}],description:"low frequency stepped noise.",tags:["regular","noise"],examples:["lfnoise(4).range(200,800).sine().out()"]}),dZ=It("bipolar",e=>Jt(e).mul(2).sub(1),{ins:[{name:"in"}],description:"convert unipolar [0,1] signal to bipolar [-1,1]",tags:["math"]}),mZ=It("unipolar",e=>Jt(e).add(1).div(2),{ins:[{name:"in"}],description:"convert bipolar [-1,1] signal to unipolar [0,1]",tags:["math"]}),fZ=It("pan",(e,t)=>(t=Jt(t).add(1).mul(iM,.25),e.mul([tM(t),eM(t)])),{ins:[{name:"in"},{name:"pos",description:"bipolar position: -1 = left, 0 = center, 1 = right"}],description:"pans signal to stereo position. splits signal path in 2",tags:["multi-channel"],examples:["sine(220).pan(sine(.25)).out()"]}),yZ=$("pick",{tags:["multi-channel"],ugen:"Pick",description:"Pick",ins:[{name:"index"},{name:"inputs",dynamic:!0}],description:"picks input of given index",examples:[`sine(.25).range(0,2).round()
.pick(...sine([220,330,440]).ins)
.out()`],compile:({vars:e,...t})=>I[t.lang].defUgen(t,...e)}),gZ=$("clip",{tags:["fx"],ugen:"Clip",description:"Hard limits the signal between lo and hi.",ins:[{name:"input"},{name:"lo"},{name:"hi"}],compile:({vars:[e=0,t=-1,n=1],...s})=>I[s.lang].defUgen(s,e,t,n)}),bZ=$("trig",{tags:["trigger"],ugen:"Trig",description:"Emits a trigger impulse whenever the signal becomes positive. Useful to turn gates into triggers.",ins:[{name:"input",default:0},{name:"lo",default:-1},{name:"hi",default:1}],compile:({vars:[e=0,t=-1,n=1],...s})=>I[s.lang].defUgen(s,e,t,n),examples:[`pulse(2)
.trig() // comment out to hear difference
.ar(.01,.2)
.mul(sine(200)).out()`]}),MZ=$("qf",{tags:["fx","filter"],ugen:"BiquadFilter",description:"biQuad Filter.",ins:[{name:"input",default:0},{name:"type",default:0,description:"filter type: 0 = lowpass, 1 = highpass, 2 = band pass, 3 = notch, 4 = allpass, 5 = peaking, 6 = lowshelf, 7 = highshelf"},{name:"freq",default:500,description:"filter cutoff in Hz"},{name:"q",default:1,description:"q factor"},{name:"gain",default:1}],compile:({vars:e,...t})=>I[t.lang].defUgen(t,...e),examples:[`pink()
.qf(
 impulse(.5).seq(0,1,2,3,4,5,6,7), // type
  tri(0.5).rangex(100, 8000),  // freq
 10, // Q
 1, // gain (only relevant for types 5-7)
).div(4).out();`]}),xZ=gt("qlpf",(e,t,n=10)=>e.qf(0,t,n),{description:"biQuad Low Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qlpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),GZ=gt("qhpf",(e,t,n=10)=>e.qf(1,t,n),{description:"biQuad High pass filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qhpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),CZ=gt("qbpf",(e,t,n=10)=>e.qf(2,t,n),{description:"biQuad Band Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qbpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),PZ=gt("qnf",(e,t,n=10)=>e.qf(3,t,n),{description:"biQuad Notch Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qnf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),vZ=gt("qapf",(e,t,n=10)=>e.qf(3,t,n),{description:"biQuad All Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`impulse(1).qapf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),XZ=gt("split",(e,t)=>e.type!=="poly"?t([e]):t(e.ins),{ins:[{name:"input"},{name:"fn"}],tags:["multi-channel"],description:"apply fn to an array of signals, one for each channel in input",examples:["sine([220,330,550]).split(chs => add(...chs)).out()"]}),wZ=gt("mix",(e,t=1)=>{if([1,2].includes(t)||(t=2,console.warn("mix only supports 1 or 2 channels atm.. falling back to 2")),e.type!=="poly")return e;if(t===2){const n=e.ins.map((s,r,i)=>{const a=(r/(i.length-1)*2-1+1)*Math.PI/4;return s.mul([Math.cos(a),Math.sin(a)]).inherit(e)});return Vo(...n)}return e.ins=e.ins.map(n=>n.inherit(e)),ks("mix").withIns(...e.ins)},{compile:({vars:e,name:t,lang:n})=>I[n].def(t,`(${e.join(" + ")})`),description:`mixes down multiple channels. Useful to make sure you get a mono or stereo signal out at the end. 
When mixing down to 2 channels, the input channels are equally distributed over the stereo image, e.g. 3 channels are panned [-1,0,1]`,ins:[{name:"in"},{name:"channels",default:1,description:"how many channels to mix down to. Only supports 1 and 2"}],tags:["multi-channel"],examples:["sine([220,330,440]).mix(2).out()"]});Ae.prototype.feedback=function(e){return this.add(e)};let ZZ=e=>Vo(e),FZ=Jt,AZ=Jt,DZ=It("mouseX",()=>ko("mouseX"),{ins:[],description:"X position of mouse, bipolar range",tags:["external"],examples:["mouseX.range(100,800).sine().out()"]}),SZ=DZ(),LZ=It("mouseY",()=>ko("mouseY"),{ins:[],description:"Y position of mouse, bipolar range",tags:["external"],examples:["mouseY.range(800,100).sine().out()"]}),EZ=LZ(),RZ=gt("scope",(e,t)=>{let n=1;e.type==="poly"&&(n=e.ins.length);const s=getNode("scope",e,t,n);return s.type!=="poly"?(s.ins.push({type:"n",value:0,ins:[]}),s):(s.ins.forEach((r,i)=>r.ins.push({type:"n",value:i,ins:[]})),s)},{ugen:"Scope",description:"renders an an oscilloscope of the current point in the graph. expects values between -1 and 1. warning: this feature is still experimental! when using it, make sure to not switch tabs, as it might fry your browser.",compile:({vars:[e,t,n,s],...r})=>Ro(r,e,t,n,s)});const lc=Object.freeze(Object.defineProperty({__proto__:null,B:FZ,PI:iM,_:AZ,abs:Vw,acos:Aw,ad:nw,add:Vo,adsr:ew,and:Jw,ar:tw,argmax:Kw,argmin:Hw,asin:Dw,atan:Sw,audioin:ww,bipolar:dZ,bool:qw,bpf:pZ,brown:uw,bytebeat:qX,cc:ko,ceil:Nw,clamp:Bw,clip:gZ,clock:sw,clockdiv:rw,cos:tM,delay:xw,distort:iw,div:Ew,dust:cw,exp:$b,feedback:ZZ,filter:qb,floatbeat:$X,floor:Ww,fold:bw,fork:oZ,greater:nM,gt:_w,hold:Gw,hpf:cZ,ifelse:$w,impulse:Qb,lag:yw,lfnoise:hZ,log:Ta,lower:sM,lpf:lZ,lt:jw,max:Yw,midicc:Xw,midifreq:Cw,midigate:Pw,midinote:rZ,midivel:vw,min:Iw,mix:wZ,mod:kw,mouseX:SZ,mouseY:EZ,mul:Lw,noise:Ob,not:Qw,or:Ow,output:aZ,pan:fZ,perc:uZ,pick:yZ,pink:ow,poly:rM,pow:Zw,pulse:mw,qapf:vZ,qbpf:CZ,qf:MZ,qhpf:GZ,qlpf:xZ,qnf:PZ,range:eZ,rangex:sZ,raw:QX,registerUgen:Jb,remap:tZ,rng:aw,round:zw,saw:lw,scope:RZ,seq:Mw,sign:Tw,sin:eM,sine:hw,slew:gw,slide:fw,split:XZ,src:iZ,sub:Rw,tan:Fw,thru:nZ,time:OX,tri:dw,trig:bZ,unipolar:mZ,xor:Uw,zaw:pw},Symbol.toStringTag,{value:"Module"}));class kZ{constructor({onToggle:t,onToggleRecording:n,beforeEval:s,transpiler:r,localScope:i=!1,outputNode:a=null}={}){this.outputNode=a,this.audio=new vX(this.outputNode),this.onToggle=t,this.transpiler=r,this.onToggleRecording=n,this.beforeEval=s,this.localScope=i,typeof window<"u"&&(i||(Object.assign(globalThis,cc),Object.assign(globalThis,lc),Object.assign(globalThis,uc),Object.assign(globalThis,{repl:this})),window.addEventListener("message",u=>{u.data.type==="KABELSALAT_SET_CONTROL"&&this.audio.setControl(u.data.id,u.data.value)}));const o=this;Ae.prototype.spawn=function(u=[0,1],c){o.audio.spawn(this.output(u).exit(),c)}}registerUgen(t,n){return this.audio.registerUgen(n),Jb(t,n.name)}evaluate(t){this.localScope||(Object.assign(globalThis,{audio:this.audio}),Object.assign(globalThis,{addUgen:this.registerUgen.bind(this)}));let n;this.transpiler?n=this.transpiler(t):n={output:t},this.beforeEval?.(n);let s;return this.localScope&&(s={...cc,...lc,...uc,audio:this.audio,addUgen:this.registerUgen.bind(this),repl:this}),_b(n.output,s)}async play(t){await this.audio.init(),t.ins.length&&this.audio.spawn(t),this.onToggle?.(!0)}run(t){const n=this.evaluate(t);this.play(n)}stop(){this.stopRecording(),this.audio.stop(),this.onToggle?.(!1)}record(){this.audio.record(),this.onToggleRecording?.(!0)}stopRecording(){this.audio.stopRecording(),this.onToggleRecording?.(!1)}}function VZ({defaultOutput:e,onEvalError:t,beforeEval:n,beforeStart:s,afterEval:r,getTime:i,transpiler:a,onToggle:o,editPattern:u,onUpdateState:c,sync:h=!1,setInterval:d,clearInterval:m,id:g,mondo:y=!1}){const G=new kZ({localScope:!0}),X={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},D={id:g},L=z=>{Object.assign(X,z),X.isDirty=X.code!==X.activeCode,X.error=X.evalError||X.schedulerError,c?.(X)},B={onTrigger:aM({defaultOutput:e,getTime:i}),getTime:i,onToggle:z=>{L({started:z}),Yb(z),o?.(z),z||Lb()},setInterval:d,clearInterval:m,beforeStart:s},A=h&&typeof SharedWorker<"u"?new Bv(B):new Sb(B);Ib(B.onTrigger),Nb(()=>A.cps);let Z={},E=0,S;const V=function(){return Z={},E=0,S=void 0,Ye},T=z=>G.evaluate(z).compile({log:!1});function K(z){return z._Pattern?z.__pure:z}const J=async(z,xe=!0)=>(z=u?.(z)||z,await A.setPattern(z,xe),Tb(z),z);ui(()=>A.now());const Y=()=>A.stop(),Q=()=>A.start(),ee=()=>A.pause(),ye=()=>A.toggle(),re=z=>(A.setCps(K(z)),Ye),ge=z=>(A.setCps(K(z)/60),Ye);let pe=[];const Ke=function(z){return pe.push(z),Ye},pt=function(z){return S=z,Ye},ut=()=>{H.prototype.p=function(xe){return typeof xe=="string"&&(xe.startsWith("_")||xe.endsWith("_"))?Ye:(xe.includes("$")&&(xe=`${xe}${E}`,E++),Z[xe]=this,this)},H.prototype.q=function(xe){return Ye};try{for(let xe=1;xe<10;++xe)Object.defineProperty(H.prototype,`d${xe}`,{get(){return this.p(xe)},configurable:!0}),Object.defineProperty(H.prototype,`p${xe}`,{get(){return this.p(xe)},configurable:!0}),H.prototype[`q${xe}`]=Ye}catch(xe){console.warn("injectPatternMethods: error:",xe)}const z=R("cpm",function(xe,it){return it._fast(xe/60/A.cps)});return oi({all:Ke,each:pt,hush:V,cpm:z,setCps:re,setcps:re,setCpm:ge,setcpm:ge,compileKabel:T})};return{scheduler:A,evaluate:async(z,xe=!0,it=!0)=>{if(!z)throw new Error("no code to evaluate");try{L({code:z,pending:!0}),await ut(),ui(()=>A.now()),await n?.({code:z}),pe=[],it&&V(),y&&(z=`mondolang\`${z}\``);let{pattern:ze,meta:Ce}=await ip(z,a,D);if(Object.keys(Z).length){let Be=[],De=!1;for(const[ke,wt]of Object.entries(Z)){const ce=ke.length>1&&ke.startsWith("S");if(ce&&De===!1&&(Be=[],De=!0),!De||De&&ce){const We=wt.withState(Gt=>Gt.setControls({id:ke}));Be.push(We)}}S&&(Be=Be.map(ke=>S(ke))),ze=Te(...Be)}else S&&(ze=S(ze));if(pe.length)for(const Be of pe)ze=Be(ze);return xo(ze)||(ze=Ye),yt("[eval] code updated"),ze=await J(ze,xe),L({miniLocations:Ce?.miniLocations||[],widgets:Ce?.widgets||[],activeCode:z,pattern:ze,evalError:void 0,schedulerError:void 0,pending:!1}),r?.({code:z,pattern:ze,meta:Ce}),ze}catch(ze){yt(`[eval] error: ${ze.message}`,"error"),console.error(ze),L({evalError:ze,pending:!1}),t?.(ze)}},start:Q,stop:Y,pause:ee,setCps:re,setPattern:J,setCode:z=>L({code:z}),toggle:ye,state:X}}const aM=({getTime:e,defaultOutput:t})=>async(n,s,r,i,a)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await t(n,s,r,i,a),n.context.onTrigger&&await n.context.onTrigger(n,e(),i,a)}catch(o){Fr(o,"getTrigger")}};function zZ(e){return new H(t=>[new qe(void 0,t.span,e)])}const St=e=>{const t=n=>[new qe(void 0,n.span,e(n.span.begin,n.controls))];return new H(t)},Dr=St(e=>e%1),zo=Dr.toBipolar(),wi=St(e=>1-e%1),Bo=wi.toBipolar(),Wo=St(e=>Math.sin(Math.PI*2*e)),oM=Wo.fromBipolar(),BZ=oM._early(U(1).div(4)),WZ=Wo._early(U(1).div(4)),uM=St(e=>Math.floor(e*2%2)),NZ=uM.toBipolar(),TZ=Xt(Dr,wi),IZ=Xt(zo,Bo),YZ=Xt(wi,Dr),HZ=Xt(Bo,zo),KZ=St(As);let No=0,To=0;typeof window<"u"&&document.addEventListener("mousemove",e=>{No=e.clientY/document.body.clientHeight,To=e.clientX/document.body.clientWidth});const _Z=St(()=>No),jZ=St(()=>No),UZ=St(()=>To),JZ=St(()=>To),OZ=e=>(e|=0,e^=e>>>16,e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),e^=e>>>16,e>>>0),QZ=e=>Math.floor(e*536870912),qZ=(e,t=0,n=0)=>{const s=e>>>0>>>0,r=Math.floor(e/4294967296)>>>0;let i=s^Math.imul(r^2246822507,3266489909);return i^=Math.imul(t^2135587861,2654435769),i^=Math.imul(n^374761393,668265261),i>>>0},pc=(e,t=0,n=0)=>OZ(qZ(e,t,n))/4294967296,$Z=(e,t,n=0)=>{const s=QZ(e);if(t===1)return pc(s,0,n);const r=new Array(t);for(let i=0;i<t;i++)r[i]=pc(s,i,n);return r},cM=e=>{const t=e<<13^e,n=t>>17^t;return n<<5^n},eF=e=>e-Math.trunc(e),tF=e=>cM(Math.trunc(eF(e/300)*536870912)),hc=e=>e%536870912/536870912,nF=(e,t)=>{if(t===1)return Math.abs(hc(e));const n=[];for(let s=0;s<t;s++)n.push(hc(e)),e=cM(e);return n},sF=(e,t)=>nF(tF(e),t);let lM="legacy";const Jn=(e,t=1,n=0)=>lM==="legacy"?sF(e+n,t):$Z(e,t,n),rF=(e="legacy")=>lM=e,pM=e=>Dr.range(0,e).round().segment(e),iF=e=>{const t=j(e).log2(0).floor().add(1);return hM(e,t)},hM=(e,t=16)=>{t=j(t);const n=pM(t).mul(-1).add(t.sub(1));return j(e).segment(t).brshift(n).band(je(1))},aF=e=>{const t=j(e).log2(0).floor().add(1);return dM(e,t)},dM=(e,t=16)=>j(e).withValue(n=>s=>{const r=[];for(let i=s-1;i>=0;i--)r.push(n>>i&1);return r}).appLeft(j(t)),oF=e=>St(t=>n=>Jn(t,n).map(Math.abs)).appLeft(j(e)),mM=e=>St((t,n)=>{const s=Jn(t.floor().add(.5),e,n.randSeed).map((i,a)=>[i,a]).sort((i,a)=>(i[0]>a[0])-(i[0]<a[0])).map(i=>i[1]),r=t.cyclePos().mul(e).floor()%e;return s[r]})._segment(e),fM=(e,t,n)=>{const s=[...Array(t).keys()].map(r=>n.zoom(U(r).div(t),U(r+1).div(t)));return e.fmap(r=>s[r].repeatCycles(t)._fast(t)).innerJoin()},uF=R("shuffle",(e,t)=>fM(mM(e),e,t)),cF=R("scramble",(e,t)=>fM(Yo(e)._segment(e),e,t)),yM=(e,t)=>new H(n=>{let{randSeed:s,...r}=n.controls;return s=e(s),t.query(n.setControls({...r,randSeed:s}))},t._steps),lF=R("seed",(e,t)=>yM(()=>e,t)),Dt=St((e,t)=>Jn(e,1,t.randSeed)),pF=Dt.toBipolar(),Io=e=>Dt.fmap(t=>t<e),hF=e=>j(e).fmap(Io).innerJoin(),dF=Io(.5),Yo=e=>Dt.fmap(t=>Math.trunc(t*e)),mF=e=>j(e).fmap(Yo).innerJoin(),Ho=(e,t)=>(t=t.map(j),t.length==0?Ye:e.range(0,t.length).fmap(n=>{const s=Math.min(Math.max(Math.floor(n),0),t.length-1);return t[s]})),Zi=(e,t)=>Ho(e,t).outerJoin(),Fi=(e,t)=>Ho(e,t).innerJoin(),gM=(...e)=>Zi(Dt,e),fF=(...e)=>Fi(Dt,e),yF=gM;H.prototype.choose=function(...e){return Zi(this,e)};H.prototype.choose2=function(...e){return Zi(this.fromBipolar(),e)};const bM=(...e)=>Fi(Dt.segment(1),e),gF=bM,MM=function(e,...t){const n=t.map(o=>j(o[0])),s=[];let r=je(0);for(const o of t)r=r.add(o[1]),s.push(r);const i=op(s),a=function(o){const u=r.mul(o);return i.fmap(c=>h=>n[c.findIndex(d=>d>h,c)]).appLeft(u)};return e.bind(a)},bF=(...e)=>MM(...e).outerJoin(),MF=(...e)=>bF(Dt,...e),xM=(...e)=>MM(Dt.segment(1),...e).innerJoin(),xF=xM;function GF(e,t=0){let n=Math.floor(e),s=n+1;const r=u=>6*u**5-15*u**4+10*u**3,i=u=>c=>h=>c+r(u)*(h-c),a=Jn(n,1,t),o=Jn(s,1,t);return i(e-n)(a)(o)}function CF(e,t=0){const n=Math.floor(e),s=n+1,r=Jn(n,1,t),i=Jn(s,1,t),a=r+i,o=(e-n)/(s-n);return((u,c,h)=>u+h*(c-u))(r,a,o)/2}const PF=St((e,t)=>GF(e,t.randSeed)),vF=St((e,t)=>CF(e,t.randSeed)),XF=R("degradeByWith",(e,t,n)=>n.fmap(s=>r=>s).appLeft(e.filterValues(s=>s>t)),!0,!0),wF=R("degradeBy",function(e,t){return t._degradeByWith(Dt,e)},!0,!0),ZF=R("degrade",e=>e._degradeBy(.5),!0,!0),FF=R("undegradeBy",function(e,t){return t._degradeByWith(Dt.fmap(n=>1-n),e)},!0,!0),AF=R("undegrade",e=>e._undegradeBy(.5),!0,!0),DF=R("sometimesBy",function(e,t,n){return j(e).fmap(s=>Te(n._degradeBy(s),t(n._undegradeBy(1-s)))).innerJoin()}),SF=R("sometimes",function(e,t){return t._sometimesBy(.5,e)}),LF=R("someCyclesBy",function(e,t,n){return j(e).fmap(s=>Te(n._degradeByWith(Dt._segment(1),s),t(n._degradeByWith(Dt.fmap(r=>1-r)._segment(1),1-s)))).innerJoin()}),EF=R("someCycles",function(e,t){return t._someCyclesBy(.5,e)}),RF=R("often",function(e,t){return t.sometimesBy(.75,e)}),kF=R("rarely",function(e,t){return t.sometimesBy(.25,e)}),VF=R("almostNever",function(e,t){return t.sometimesBy(.1,e)}),zF=R("almostAlways",function(e,t){return t.sometimesBy(.9,e)}),BF=R("never",function(e,t){return t}),WF=R("always",function(e,t){return e(t)});function Ko(e){Array.isArray(e)===!1&&(e=[e]);const t=sp();return e.every(n=>{const s=np.get(n)??n;return t[s]})}const NF=R("whenKey",function(e,t,n){return n.when(Ko(e),t)}),TF=R("keyDown",function(e){return e.fmap(Ko)}),IF=new H(function(e){return[new qe(void 0,e.span,e.span.duration)]}),GM=new H(function(e){return[new qe(void 0,e.span,U(1).div(e.span.duration))]}),YF=GM,HF=new H(function(e){const t=U(1).div(e.span.duration);return[new qe(void 0,e.span,Math.log(t)/Math.log(2)+1)]});let ci;try{ci=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let dc=ci?.getVoices();function KF(e,t,n){ci.cancel();const s=new SpeechSynthesisUtterance(e);s.lang=t,dc=ci.getVoices();const r=dc.filter(i=>i.lang.includes(t));typeof n=="number"?s.voice=r[n%r.length]:typeof n=="string"&&(s.voice=r.find(i=>i.name===i)),speechSynthesis.speak(s)}const _F=R("speak",function(e,t,n){return n.onTrigger(s=>{KF(s.value,e,t)})}),jF=function(e,t={}){const n=document.getElementById("code"),s="background-image:url("+e+");background-size:contain;";n.style=s;const{className:r}=n,i=(o,u)=>{({style:()=>n.style=s+";"+u,className:()=>n.className=u+" "+r})[o]()},a=Object.entries(t).filter(([o,u])=>typeof u=="function");Object.entries(t).filter(([o,u])=>typeof u=="string").forEach(([o,u])=>i(o,u)),a.length},UF=()=>{const e=document.getElementById("code");e&&(e.style="")};yt("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const CM=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:tp,Cyclist:Sb,FXr:wb,FXrel:Xb,FXrelease:vb,Fraction:U,Hap:qe,Pattern:H,State:Rs,TimeSpan:ot,__chooseWith:Ho,_brandBy:Io,_fitslice:fp,_irand:Yo,_keyDown:Ko,_match:yp,_mod:Ut,_morph:wo,_polymeterListSteps:bp,_retime:Ea,_slices:Ra,accelerate:Gh,activeLabel:Hf,ad:Og,add:ZG,adsr:Jg,almostAlways:zF,almostNever:VF,always:WF,amp:wh,analyze:Nm,anchor:by,and:_G,apply:CC,applyN:mp,ar:qg,arp:aG,arpWith:iG,arrange:hG,as:bb,asym:tv,att:Fh,attack:Zh,averageArray:Hl,backgroundImage:jF,band:EG,bandf:Jm,bandq:qm,bank:Bm,base64ToUnicode:$l,bbexpr:C0,bbst:v0,beat:JP,begin:e0,berlin:vF,bgain:ry,binary:iF,binaryL:aF,binaryN:hM,binaryNL:dM,bind:bG,binshift:Gg,bite:FC,bjork:yv,bjorklund:So,blshift:VG,bmod:Cb,bor:RG,bp:Qm,bpa:s1,bpattack:n1,bpd:c1,bpdc:B1,bpdecay:u1,bpdepth:R1,bpdepthfreq:V1,bpdepthfrequency:k1,bpe:Q0,bpenv:O0,bpf:Om,bpq:$m,bpr:G1,bprate:L1,bprelease:x1,bps:f1,bpshape:z1,bpskew:W1,bpsustain:m1,bpsync:E1,brak:BC,brand:dF,brandBy:hF,brshift:zG,bus:ny,busgain:sy,bxor:kG,bypass:fP,byteBeatExpression:G0,byteBeatStartTime:P0,calculateSteps:nG,cat:yr,ccn:rb,ccv:ib,ceil:QG,ch:w0,channel:N0,channels:X0,chebyshev:rv,choose:gM,chooseCycles:bM,chooseIn:fF,chooseInWith:Fi,chooseOut:yF,chooseWith:Zi,chop:WP,chord:fy,chorus:Wm,chunk:rP,chunkBack:oP,chunkBackInto:mP,chunkInto:hP,chunkback:uP,chunkbackinto:dP,chunkinto:pP,clamp:Gi,cleanupUi:UF,clip:Eg,coarse:u0,code2hash:U9,color:jg,colour:Ug,comb:bg,compose:V9,compress:rC,compressSpan:iC,compressor:Iy,compressorAttack:Ky,compressorKnee:Yy,compressorRatio:Hy,compressorRelease:_y,compressspan:aC,constant:z9,contract:vp,control:sb,controls:hv,cosine:BZ,cosine2:WZ,cpm:PC,cps:Lg,createClock:Db,createParam:vi,createParams:Ao,crush:o0,ctf:Y0,ctlNum:ab,ctranspose:Uf,cubic:$P,curry:Xe,curve:Bg,cut:T0,cutoff:I0,cycleToSeconds:Da,cyclesPer:IF,dec:Ym,decay:Im,degrade:ZF,degradeBy:wF,degradeByWith:XF,degree:_f,delay:cf,delayfb:pf,delayfeedback:lf,delayspeed:df,delaysync:gf,delayt:ff,delaytime:mf,deltaSlide:Wg,det:xf,detune:Mf,dfb:hf,dict:gy,dictionary:yy,diode:ev,dist:Wy,distort:By,distorttype:Ty,distortvol:Ny,div:DG,djf:uf,drawLine:rp,drive:y0,drop:Gp,dry:Pf,ds:Qg,dt:yf,duck:g0,duckattack:x0,duckdepth:b0,duckonset:M0,dur:Vg,duration:kg,early:vC,echo:OC,echoWith:_C,echowith:jC,eish:Cv,end:t0,enhance:gg,env:Gb,eq:IG,eqt:YG,errorLogger:Fr,euclid:fv,euclidLegato:Mv,euclidLegatoRot:xv,euclidRot:bv,euclidish:Gv,euclidrot:gv,evalScope:oi,evaluate:ip,every:GC,expand:Pp,expression:qy,extend:Cp,fadeInTime:wf,fadeOutTime:Xf,fadeTime:vf,fanchor:P1,fast:dC,fastChunk:lP,fastGap:oC,fastcat:Xt,fastchunk:cP,fastgap:uC,fft:Tm,filter:xP,filterWhen:GP,firstOf:xC,fit:HP,flatten:En,floor:OG,fm:jh,fm1:Uh,fm2:Jh,fm3:Oh,fm4:Qh,fm5:qh,fm6:$h,fm7:ed,fm8:td,fmatt:xd,fmatt1:Gd,fmatt2:Cd,fmatt3:Pd,fmatt4:vd,fmatt5:Xd,fmatt6:wd,fmatt7:Zd,fmatt8:Fd,fmattack:pd,fmattack1:hd,fmattack2:dd,fmattack3:md,fmattack4:fd,fmattack5:yd,fmattack6:gd,fmattack7:bd,fmattack8:Md,fmdec:jd,fmdec1:Ud,fmdec2:Jd,fmdec3:Od,fmdec4:Qd,fmdec5:qd,fmdec6:$d,fmdec7:em,fmdec8:tm,fmdecay:Bd,fmdecay1:Wd,fmdecay2:Nd,fmdecay3:Td,fmdecay4:Id,fmdecay5:Yd,fmdecay6:Hd,fmdecay7:Kd,fmdecay8:_d,fmenv:nd,fmenv1:sd,fmenv2:rd,fmenv3:id,fmenv4:ad,fmenv5:od,fmenv6:ud,fmenv7:cd,fmenv8:ld,fmh:Ah,fmh1:Dh,fmh2:Sh,fmh3:Lh,fmh4:Eh,fmh5:Rh,fmh6:kh,fmh7:Vh,fmh8:zh,fmi:Bh,fmi1:Wh,fmi2:Nh,fmi3:Th,fmi4:Ih,fmi5:Yh,fmi6:Hh,fmi7:Kh,fmi8:_h,fmrel:Am,fmrel1:Dm,fmrel2:Sm,fmrel3:Lm,fmrel4:Em,fmrel5:Rm,fmrel6:km,fmrel7:Vm,fmrel8:zm,fmrelease:xm,fmrelease1:Gm,fmrelease2:Cm,fmrelease3:Pm,fmrelease4:vm,fmrelease5:Xm,fmrelease6:wm,fmrelease7:Zm,fmrelease8:Fm,fmsus:pm,fmsus1:hm,fmsus2:dm,fmsus3:mm,fmsus4:fm,fmsus5:ym,fmsus6:gm,fmsus7:bm,fmsus8:Mm,fmsustain:nm,fmsustain1:sm,fmsustain2:rm,fmsustain3:im,fmsustain4:am,fmsustain5:om,fmsustain6:um,fmsustain7:cm,fmsustain8:lm,fmwave:Ad,fmwave1:Dd,fmwave2:Sd,fmwave3:Ld,fmwave4:Ed,fmwave5:Rd,fmwave6:kd,fmwave7:Vd,fmwave8:zd,focus:cC,focusSpan:lC,focusspan:pC,fold:nv,fractionalArgs:B9,frameRate:vg,frames:Xg,freeze:hg,freq:Zf,freqToMidi:mo,fromBipolar:$G,fshift:eg,fshiftnote:tg,fshiftphase:ng,ftype:C1,func:UG,fxr:Zb,gain:vh,gap:Ns,gat:Nf,gate:Wf,getAccidentalsOffset:ho,getControlName:br,getCps:Wv,getCurrentKeyboardState:sp,getEventOffsetMs:S9,getFreq:Yl,getFrequency:_l,getIsStarted:Iv,getPattern:Nv,getPerformanceTimeSeconds:O9,getPlayableNoteValue:k9,getRandsAtTime:Jn,getSoundIndex:R9,getTime:za,getTrigger:aM,getTriggerFunc:Tv,grow:vP,gt:WG,gte:TG,hard:qP,harmonic:Jf,hash2code:J9,hbrick:Cg,hcutoff:ef,hold:Um,hours:wg,hp:nf,hpa:t1,hpattack:e1,hpd:o1,hpdc:_1,hpdecay:a1,hpdepth:I1,hpdepthfreq:H1,hpdepthfrequency:Y1,hpe:J0,hpenv:U0,hpf:tf,hpq:rf,hpr:M1,hprate:N1,hprelease:b1,hps:d1,hpshape:K1,hpskew:j1,hpsustain:h1,hpsync:T1,hresonance:sf,hsl:MP,hsla:bP,hurry:mC,id:As,imag:yg,inhabit:Ev,inhabitmod:kv,innerBind:MG,inside:gC,inv:kC,invert:RC,ir:Ay,irand:mF,irbegin:Ly,iresponse:Dy,irspeed:Sy,isControlName:Lp,isNote:ys,isNoteWithOctave:Z9,isPattern:xo,isaw:wi,isaw2:Bo,iter:eP,iterBack:tP,iterback:nP,itri:YZ,itri2:HZ,jux:KC,juxBy:YC,juxby:HC,kcutoff:ig,keep:XG,keepif:wG,keyAlias:np,keyDown:TF,krush:rg,label:Kf,lastOf:MC,late:hp,lbrick:Pg,legato:Rg,leslie:Tf,lfo:xb,linger:AC,listRange:Ar,lock:bf,logKey:lo,logger:yt,loop:n0,loopAt:IP,loopAtCps:KP,loopBegin:s0,loopEnd:i0,loopat:YP,loopatcps:_P,loopb:r0,loope:a0,lp:K0,lpa:$0,lpattack:q0,lpd:i1,lpdc:D1,lpdecay:r1,lpdepth:w1,lpdepthfreq:F1,lpdepthfrequency:Z1,lpe:j0,lpenv:_0,lpf:H0,lpq:of,lpr:g1,lprate:v1,lprelease:y1,lps:p1,lpshape:A1,lpskew:S1,lpsustain:l1,lpsync:X1,lrate:If,lsize:Yf,lt:BG,lte:NG,mapArgs:yo,mask:mG,midi2note:E9,midiToFreq:Es,midibend:db,midichan:$g,midicmd:nb,midimap:eb,midiport:tb,miditouch:mb,minutes:Zg,mod:SG,mode:Gy,morph:OP,mouseX:JZ,mouseY:jZ,mousex:UZ,mousey:_Z,mtranspose:jf,mul:AG,n:xh,nanFallback:Kl,ne:HG,net:KG,never:BF,noise:Q1,note:At,noteToMidi:gn,nothing:un,nrpnn:ob,nrpv:ub,nudge:qf,numeralArgs:Bt,objectMap:ep,oct:ey,octave:$f,octaveR:Qf,octaves:xy,octer:ag,octersub:og,octersubsub:ug,off:zC,offset:My,often:RF,or:jG,orbit:ty,oschost:yb,oscport:gb,outerBind:xG,outside:bC,overgain:iy,overshape:ay,pace:gp,pairs:Ol,palindrome:IC,pan:oy,panchor:Bf,panorient:py,panspan:uy,pansplay:cy,panwidth:ly,parray:Zo,parseFractional:Jl,parseNumeral:fo,partials:iv,patt:Af,pattack:Ff,pcurve:zf,pdec:Sf,pdecay:Df,penv:Vf,per:GM,perCycle:YF,perlin:PF,perx:HF,ph:S0,phasdp:W0,phaser:L0,phasercenter:k0,phaserdepth:z0,phaserrate:D0,phasersweep:E0,phases:av,phc:V0,phd:B0,phs:R0,pick:Rb,pickF:Xv,pickOut:Zv,pickReset:Sv,pickRestart:Av,pickSqueeze:Rv,pickmod:kb,pickmodF:wv,pickmodOut:Fv,pickmodReset:Lv,pickmodRestart:Dv,pickmodSqueeze:Vv,pipe:Ul,pitchJump:Ng,pitchJumpTime:Tg,ply:hC,plyForEach:$C,plyWith:qC,pm:lG,polyBind:PG,polyTouch:fb,polymeter:Ci,polyrhythm:uG,postgain:Xh,pow:LG,pr:cG,prel:kf,prelease:Rf,press:TC,pressBy:NC,progNum:cb,psus:Ef,psustain:Lf,pure:je,pw:Z0,pwrate:F0,pwsweep:A0,rand:Dt,rand2:pF,randL:oF,randcat:gF,randrun:mM,range:eC,range2:nC,rangex:tC,rarely:kF,ratio:sC,rdim:wy,real:fg,ref:jP,register:R,registerControl:v,registerMultiControl:Pn,reify:j,rel:jm,release:_m,removeUndefineds:gs,repeatCycles:sP,repl:VZ,replicate:PP,reset_state:Lb,reset_timelines:Eb,resonance:af,rev:dp,revv:WC,rfade:Fy,rib:gP,ribbon:yP,ring:cg,ringdf:pg,ringf:lg,rlp:vy,room:Cy,roomdim:Xy,roomfade:Zy,roomlp:Py,roomsize:Ey,rotate:jl,round:JG,rsize:Vy,run:pM,s:es,s_add:SP,s_alt:ZP,s_cat:wP,s_contract:kP,s_expand:EP,s_extend:RP,s_polymeter:FP,s_sub:LP,s_taper:AP,s_taperlist:DP,s_tour:VP,s_zip:zP,saw:Dr,saw2:zo,scram:xg,scramble:cF,scrub:Mb,seconds:Fg,seed:lF,seg:SC,segment:DC,semitone:dy,seq:pp,seqPLoop:dG,sequence:cn,sequenceP:op,set:vG,setCpsFunc:Nb,setIsStarted:Yb,setPattern:Tb,setStringParser:ap,setTime:ui,setTriggerFunc:Ib,shape:zy,shrink:wp,shrinklist:Xp,shuffle:uF,signal:St,silence:Ye,sine:oM,sine2:Wo,sinefold:sv,size:Ry,slice:Dp,slide:hy,slow:fC,slowChunk:aP,slowcat:qn,slowcatPrime:Co,slowchunk:iP,smear:Mg,soft:QP,sol2note:K9,someCycles:EF,someCyclesBy:LF,sometimes:SF,sometimesBy:DF,songPtr:Ag,sound:Ep,source:bh,sparsity:yC,speak:_F,speed:Fo,splice:TP,splitAt:go,spread:Cf,square:uM,square2:NZ,squeeze:zv,squeezeBind:GG,squiz:Jy,src:Mh,stack:Te,stackBy:pG,stackCentre:lp,stackLeft:up,stackRight:cp,steady:zZ,stepBind:CG,stepalt:Mp,stepcat:kt,steps:BP,stepsPerOctave:Of,stretch:jy,striate:NP,stringifyValues:bo,struct:fG,strudelScope:Mo,stut:QC,stutWith:UC,stutwith:JC,sub:FG,superimpose:yG,sus:Km,sustain:Hm,sustainpedal:$y,swing:EC,swingBy:LC,sysex:lb,sysexdata:hb,sysexid:pb,sz:ky,take:xp,time:KZ,timeCat:Xo,timecat:XP,timeline:Pv,toBipolar:qG,tokenizeNote:Il,tour:Zp,transient:Pb,trem:l0,tremolo:c0,tremolodepth:h0,tremolophase:m0,tremoloshape:f0,tremoloskew:d0,tremolosync:p0,tri:TZ,tri2:IZ,triode:sg,tsdelay:mg,uid:Dg,undegrade:AF,undegradeBy:FF,unicodeToBase64:ql,uniq:_9,uniqsort:j9,uniqsortr:Ql,unison:Gf,unit:Uy,useRNG:rF,v:O1,val:Sg,valueToMidi:D9,vel:Ph,velocity:Ch,vib:U1,vibmod:q1,vibrato:J1,vmod:$1,voice:my,vowel:Oy,warp:Qp,warpatt:eh,warpattack:$p,warpdc:lh,warpdec:nh,warpdecay:th,warpdepth:uh,warpenv:yh,warpmode:hh,warprate:oh,warprel:ah,warprelease:ih,warpshape:ch,warpskew:ph,warpsus:rh,warpsustain:sh,warpsync:gh,waveloss:Qy,wavetablePhaseRand:fh,wavetablePosition:kp,wavetableWarp:qp,wavetableWarpMode:dh,wchoose:MF,wchooseCycles:xM,when:VC,whenKey:NF,withSeed:yM,withValue:gG,within:CP,worklet:uv,wrandcat:xF,wt:Rp,wtatt:Bp,wtattack:zp,wtdc:Jp,wtdec:Np,wtdecay:Wp,wtdepth:jp,wtenv:Vp,wtphaserand:mh,wtrate:Kp,wtrel:Hp,wtrelease:Yp,wtshape:Up,wtskew:Op,wtsus:Ip,wtsustain:Tp,wtsync:_p,xfade:Sp,xsdelay:dg,zcrush:Hg,zdelay:Kg,zip:Fp,zipWith:xi,zmod:Yg,znoise:Ig,zoom:XC,zoomArc:wC,zoomarc:ZC,zrand:zg,zzfx:_g},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class e extends DelayNode{constructor(n,s,r,i){return super(n),s=Math.abs(s),this.delayTime.value=r,this.feedbackGain=n.createGain(),this.feedbackGain.gain.value=Math.min(Math.abs(i),.995),this.feedback=this.feedbackGain.gain,this.delayGain=n.createGain(),this.delayGain.gain.value=s,this.connect(this.feedbackGain),this.connect(this.delayGain),this.feedbackGain.connect(this),this.connect=a=>this.delayGain.connect(a),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}BaseAudioContext.prototype.createFeedbackDelay=function(t,n,s){return new e(this,t,n,s)}}let Gr;const PM=()=>(Gr=new AudioContext,Gr),li=e=>(Gr=e,Gr),Ge=()=>Gr||PM();function JF(){return Ge().currentTime}let vM=e=>console.log(e);function Cr(e,t="superdough"){ct(`[${t}] error: ${e.message}`)}const ct=(...e)=>vM(...e),XM=e=>{vM=e};let ua={};function wM(e,t){const n=Ge();if(ua[e])return ua[e];const s=2*n.sampleRate,r=n.createBuffer(1,s,n.sampleRate),i=r.getChannelData(0);let a=0,o,u,c,h,d,m,g;o=u=c=h=d=m=g=0;for(let y=0;y<s;y++)if(e==="white")i[y]=Math.random()*2-1;else if(e==="brown"){let G=Math.random()*2-1;i[y]=(a+.02*G)/1.02,a=i[y]}else if(e==="pink"){let G=Math.random()*2-1;o=.99886*o+G*.0555179,u=.99332*u+G*.0750759,c=.969*c+G*.153852,h=.8665*h+G*.3104856,d=.55*d+G*.5329522,m=-.7616*m-G*.016898,i[y]=o+u+c+h+d+m+g+G*.5362,i[y]*=.11,g=G*.115926}else if(e==="crackle"){const G=t*.01;Math.random()<G?i[y]=Math.random()*2-1:i[y]=0}return e!=="crackle"&&(ua[e]=r),r}function Ia(e="white",t,n=.02){const s=Ge().createBufferSource();return s.buffer=wM(e,n),s.loop=!0,s.start(t),{node:s,stop:r=>s.stop(r)}}function OF(e,t,n){const s=Ia("pink",n),r=kM(e,s.node,t);return Mn(s.node,()=>{Se(s.node)}),{node:r.node,stop:i=>s?.stop(i),teardown:r.teardown}}const Ya=new Map,_o=Symbol("nodePoolKey"),QF=e=>!!e[_o],ZM=e=>e.context?.currentTime??0,qF=e=>{const t=new Set;e.parameters?.forEach(r=>t.add(r));const n=new Set;let s=e;for(;s!==Object.prototype;){for(const r of Object.getOwnPropertyNames(s)){if(n.has(r))continue;n.add(r);const i=e[r];i instanceof AudioParam&&t.add(i)}s=Object.getPrototypeOf(s)}return t},jo=e=>{if(e.disconnect(),e instanceof AudioScheduledSourceNode)return;const t=e[_o];if(t==null)return;const n=ZM(e);qF(e).forEach(r=>r.cancelScheduledValues(n));const s=Ya.get(t)??[];s.push(new WeakRef(e)),Ya.set(t,s)},$F=e=>{if(!(e instanceof AudioWorkletNode))return!0;const t=ZM(e),n=e?.parameters?.get("end").value??0;return t<n+.45},Sr=(e,t)=>{const n=Ya.get(e)??[];let s,r=!1;for(;n.length;)if(s=n.pop()?.deref(),s!=null&&$F(s)){r=!0;break}return r||(s=t()),s[_o]=e,s},eA=e=>{if(typeof e!="string")return[];const[t,n="",s]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return t?[t,n,s?Number(s):void 0]:[]},tA={c:0,d:2,e:4,f:5,g:7,a:9,b:11},nA={"#":1,b:-1,s:1,f:-1},sA=e=>e?.split("").reduce((t,n)=>t+nA[n],0)||0,Ai=(e,t=3)=>{const[n,s,r=t]=eA(e);if(!n)throw new Error('not a note: "'+e+'"');const i=tA[n.toLowerCase()],a=sA(s);return(Number(r)+1)*12+i+a},FM=e=>Math.pow(2,(e-69)/12)*440,bn=(e,t,n)=>Math.min(Math.max(e,t),n),rA=e=>12*Math.log(e/440)/Math.LN2+69,iA=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=e;return typeof n=="number"?rA(n):typeof s=="string"?Ai(s):typeof s=="number"?s:t};function Rn(e,t=0,n){return isNaN(Number(e))?(!n&&ct(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const AM=(e,t)=>(e%t+t)%t,mc=(e,t)=>AM(Math.round(Rn(e,0)),t);function fc(e,t){return e/t}function DM(e,t){const{s:n,n:s=0}=e;let r=iA(e,36),i=r-36,a,o=0;if(Array.isArray(t))o=mc(s,t.length),a=t[o];else{const c=d=>Ai(d)-r,h=Object.keys(t).filter(d=>!d.startsWith("_")).reduce((d,m,g)=>!d||Math.abs(c(m))<Math.abs(c(d))?m:d,null);i=-c(h),o=mc(s,t[h].length),a=t[h][o]}const u=`${n}:${o}`;return{transpose:i,url:a,index:o,midi:r,label:u}}const ca=(e,t)=>Object.fromEntries(Object.entries(t).map(([n,s])=>[n,e[s]])),SM=e=>{try{return new URL(".",new URL(e)).href.replace(/\/$/,"")}catch{return e.split("/").slice(0,-1).join("/")}},Uo=["pink","white","brown","crackle"];function _e(e){const t=Ge().createGain();return t.gain.value=e,t}function Pr(e,t,n){const s=_e(n);return e.connect(s),s.connect(t),s}const yc=(e,t,n,s)=>s-n===0?0:(t-e)/(s-n);function Ft(e,t,n,s){const r=new AudioWorkletNode(e,t,s);return Object.entries(n).forEach(([i,a])=>{a!==void 0&&(r.parameters.get(i).value=a)}),r}const Wt=(e,t,n,s,r,i,a,o,u,c="exponential")=>{t=Rn(t),n=Rn(n),s=Rn(s),r=Rn(r);const h=c==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";c==="exponential"&&(i=i===0?.001:i,a=a===0?.001:a);const d=a-i,m=i+s*d,g=u-o,y=G=>{let X;return t>G?X=G*yc(i,a,0,t)+i:X=(G-t)*yc(a,m,0,n)+a,c==="exponential"&&(X=X||.001),X};e.setValueAtTime(i,o),t>g?e[h](y(g),u):t+n>g?(e[h](y(t),o+t),e[h](y(g),u)):(e[h](y(t),o+t),e[h](y(t+n),o+t+n),e.setValueAtTime(m,u)),e[h](i,u+r)};function aA(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}function LM(e,t={}){return Ft(e,"envelope-processor",t)}function Is(e,t={}){const{shape:n=0,begin:s=0,end:r=0,time:i,depth:a=1,dcoffset:o=-.5,frequency:u=1,skew:c=.5,phaseoffset:h=0,curve:d=1,min:m,max:g,...y}=t,G={begin:s,end:r,time:i??s,depth:a,dcoffset:o,frequency:u,skew:c,phaseoffset:h,curve:d,shape:aA(n),min:m??o*a,max:g??o*a+a,...y};return Ft(e,"lfo-processor",G)}function EM(e,t,n,s,r,i){const a=Sr("compressor",()=>new DynamicsCompressorNode(e,{}));return Object.entries({threshold:t??-3,ratio:n??10,knee:s??10,attack:r??.005,release:i??.05}).forEach(([o,u])=>{a[o].value=u}),a}const Nt=(e,t="linear",n)=>{const[s,r,i,a]=e;if(s==null&&r==null&&i==null&&a==null)return n??[.001,.001,1,.01];const o=i??(s!=null&&r==null||s==null&&r==null?1:.001);return[Math.max(s??0,.001),Math.max(r??0,.001),Math.min(o,1),Math.max(a??0,.01)]};function Jo(e,t,n,s,r){let{defaultDepth:i=1,depth:a,dcoffset:o,...u}=r;a==null&&(a=Object.values(u).some(h=>h!=null)?i:0);let c;return a&&(c=Is(e,{begin:n,end:s,depth:a,dcoffset:o,...u}),c.connect(t)),c}function Ha(e,t,n,s,r,i){let{amount:a,offset:o,defaultAmount:u=1,curve:c="linear",values:h,holdEnd:d,defaultValues:m}=r;a==null&&(a=h.some(G=>G!=null)?u:0);const g=o??0,y=a+g;if(Math.abs(y-g)){const[G,X,D,L]=Nt(h,c,m);Wt(t,G,X,D,L,g,y,n,d,c)}return Jo(e,t,n,s,i)}function RM(e,t,n,s,r,i){let{frequency:a,anchor:o,env:u,type:c,model:h,q:d=1,drive:m=.69,depth:g,depthfrequency:y,dcoffset:G=-.5,skew:X,shape:D,rate:L,sync:B}=s,A,Z;h==="ladder"?(Z=Ft(e,"ladder-processor",{frequency:a,q:d,drive:m}),A=Z.parameters.get("frequency")):(Z=Sr("filter",()=>e.createBiquadFilter()),Z.type=c,Object.entries({Q:d,frequency:a}).forEach(([Q,ee])=>{Z[Q].value=ee}),A=Z.frequency);const E=[s.attack,s.decay,s.sustain,s.release],[S,V,T,K]=Nt(E,"exponential",[.005,.14,0,.1]);if([...E,u].some(Q=>Q!==void 0)){u=Rn(u,1,!0),o=Rn(o,0,!0);const Q=Math.abs(u),ee=Q*o;let ye=bn(2**-ee*a,0,2e4),re=bn(2**(Q-ee)*a,0,2e4);u<0&&([ye,re]=[re,ye]),Wt(A,S,V,T,K,ye,re,t,n,"exponential")}B!=null&&(L=r*B);const J=[g,y,X,D,L].some(Q=>Q!==void 0);let Y;if(J){g=g??1;const Q=i/r,ee={depth:y??(g??1)*a,dcoffset:G,skew:X,shape:D,frequency:L??r,min:-a+30,max:2e4-a,time:Q,curve:1};Y=Jo(e,A,t,n,ee)}return{filter:Z,lfo:Y}}let gc=e=>e<.5?1:1-(e-.5)/.5;function kM(e,t,n=0){const s=Ge();if(!n)return e;let r=s.createGain(),i=s.createGain();e.connect(r),t.connect(i),r.gain.value=gc(n),i.gain.value=gc(1-n);let a=s.createGain();return r.connect(a),i.connect(a),{node:a,teardown:()=>{Se(r),Se(i),e.disconnect(r),t.disconnect(i)}}}let oA=["linear","exponential"];function Vs(e,t,n,s){if((t.pattack??t.pdecay??t.psustain??t.prelease??t.penv)===void 0)return;const r=Rn(t.penv,1,!0),i=oA[t.pcurve??0];let[a,o,u,c]=Nt([t.pattack,t.pdecay,t.psustain,t.prelease],i,[.2,.001,1,.001]),h=t.panchor??u;const d=r*100,m=0-d*h,g=d-d*h;Wt(e,a,o,u,c,m,g,n,s,i)}function zs(e,t,n){const{vibmod:s=.5,vib:r}=t;let i;if(r>0){i=Ge().createOscillator(),i.frequency.value=r;const a=Ge().createGain();return a.gain.value=s*100,i.connect(a),a.connect(e),Mn(i,()=>{Se(a),Se(i)}),i.start(n),{stop:o=>i.stop(o),nodes:{vib:[i],vib_gain:[a]}}}}function uA(e,t,n=Ge()){const s=n.currentTime;fn(n,e,s,t)}function fn(e,t,n,s){const r=new ConstantSourceNode(e),i=_e(0);return i.connect(e.destination),r.connect(i),Mn(r,()=>{Se(i),Se(r),t()}),r.start(n),r.stop(s),r}const cA=(e,t="sine")=>{const n=Ge();let s;return Uo.includes(t)?(s=n.createBufferSource(),s.buffer=wM(t,2),s.loop=!0):(s=n.createOscillator(),s.type=t,s.frequency.value=e),s.start(),s},lA=(e,t,n="sine")=>{const s=e.value*t;return{osc:cA(s,n),freq:s}};function vr(e,t,n){const s=Ge(),r=[],i={},a={};for(let o=1;o<=8;o++)for(let u=0;u<=8;u++){let c;o===u+1?c=`fmi${o===1?"":o}`:c=`fmi${o}${u}`;const h=t[c];if(!h)continue;let d=[];for(let[m,g]of[[!0,o],[!1,u]]){if(g===0){d.push(e);continue}if(!i[g]){const Z=g===1?"":g,{osc:E,freq:S}=lA(e,t[`fmh${Z}`]??1,t[`fmwave${Z}`]??"sine");r.push(E);const V=[E],T=["attack","decay","sustain","release"].map(J=>t[`fm${J}${Z}`]);let K=E;if(T.some(J=>J!==void 0)){const J=s.createGain(),[Y,Q,ee,ye]=Nt(T),re=n+t.duration,ge=t[`fmenv${Z}`]??"exp";Wt(J.gain,Y,Q,ee,ye,0,1,n,re,ge==="exp"?"exponential":"linear"),V.push(J),K=E.connect(J)}i[g]={input:E.frequency,output:K,freq:S,osc:E,toCleanup:V},a[`fm_${g}`]=[E]}const{input:y,output:G,freq:X,osc:D,toCleanup:L}=i[g],B=_e(h),A=_e(X);d.push(m?G.connect(B).connect(A):y),NM(D,[...L,B,A]),a[`fm_${g}_gain`]=[B]}if(!d[1]){ct(`[superdough] control ${c} failed to connect FM ${o} to target ${u} due to missing frequency parameter (likely because fm${u} is noise)`,"warning");continue}d[0].connect(d[1])}return{nodes:a,stop:o=>r.forEach(u=>u?.stop(o))}}const VM=e=>e/(1+e),pA=(e,t)=>(e%t+t)%t,hA=(e,t)=>(1+t)*e/(1+t*Math.abs(e)),Ds=(e,t)=>Math.tanh(e*(1+t)),dA=(e,t)=>bn((1+t)*e,-1,1),zM=(e,t)=>{let n=(1+.5*t)*e;const s=pA(n+1,4);return 1-Math.abs(s-2)},mA=(e,t)=>Math.sin(Math.PI/2*zM(e,t)),fA=(e,t)=>{const n=VM(Math.log1p(t)),s=(e-n/3*e*e*e)/(1-n/3);return Ds(s,t)},BM=(e,t,n=!1)=>{const s=1+2*t,r=.07*VM(Math.log1p(t)),i=Ds(e+r,2*t),a=Ds(n?r:-e+r,2*t),o=i-a,u=1/Math.cosh(s*r),c=u*u,h=Math.max(1e-8,(n?1:2)*s*c);return Ds(o/h,t)},yA=(e,t)=>BM(e,t,!0),gA=(e,t)=>{const n=10*Math.log1p(t);let s=1,r=e,i,a=0;for(let o=1;o<64;o++){if(o<2){a+=o==0?s:r;continue}i=2*e*s-r,r=s,s=i,o%2===0&&(a+=Math.min(1.3*n/o,2)*i)}return Ds(a,n/20)},Oo={scurve:hA,soft:Ds,hard:dA,cubic:fA,diode:BM,asym:yA,fold:zM,sinefold:mA,chebyshev:gA},nr=Object.freeze(Object.keys(Oo)),bA=e=>{let t=e;typeof e=="string"&&(t=nr.indexOf(e),t===-1&&(ct(`[superdough] Could not find waveshaping algorithm ${e}.
        Available options are ${nr.join(", ")}.
        Defaulting to ${nr[0]}.`),t=0));const n=nr[t%nr.length];return Oo[n]},WM=(e,t,n)=>Ft(Ge(),"distort-processor",{distort:e,postgain:t},{processorOptions:{algorithm:n}}),jn=(e,t=36)=>{let{note:n,freq:s,octave:r=0}=e;return n=n||t,typeof n=="string"&&(n=Ai(n)),!s&&typeof n=="number"&&(s=FM(n)),s*=Math.pow(2,r),Number(s)},Mn=(e,t)=>{const n=t;e.onended=function(){n&&n(),this.onended=null}},Se=e=>{if(e!=null){if(!(e instanceof AudioNode))throw new Error("releaseAudioNode can only release an AudioNode");if(e.disconnect(),e instanceof AudioScheduledSourceNode)try{e.stop()}catch{e.start(e.context.currentTime+5),e.stop()}e instanceof AudioWorkletNode&&e.parameters.get("end")?.setValueAtTime(0,0)}},NM=(e,t)=>{Mn(e,()=>t.forEach(n=>Se(n)))};var Qo={};Qo.generateReverb=function(e,t){for(var n=e.audioContext||new AudioContext,s=n.sampleRate,r=e.numChannels||2,i=e.decayTime*1.5,a=Math.round(e.decayTime*s),o=Math.round(i*s),u=Math.round((e.fadeInTime||0)*s),c=Math.pow(1/1e3,1/a),h=n.createBuffer(r,o,s),d=0;d<r;d++){for(var m=h.getChannelData(d),g=0;g<o;g++)m[g]=GA()*Math.pow(c,g);for(var g=0;g<u;g++)m[g]*=g/u}MA(h,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,t)};Qo.generateGraph=function(e,t,n,s,r){var i=document.createElement("canvas");i.width=t,i.height=n;var a=i.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,i.width,i.height),a.fillStyle="#fff";for(var o=t/e.length,u=n/(r-s),c=0;c<e.length;c++)a.fillRect(c*o,n-(e[c]-s)*u,1,1);return i};var MA=function(e,t,n,s,r){if(t==0){r(e);return}var i=xA(e),a=new OfflineAudioContext(e.numberOfChannels,i[0].length,e.sampleRate),o=a.createBufferSource();o.buffer=e;var u=a.createBiquadFilter();t=Math.min(t,e.sampleRate/2),n=Math.min(n,e.sampleRate/2),u.type="lowpass",u.Q.value=1e-4,u.frequency.setValueAtTime(t,0),u.frequency.linearRampToValueAtTime(n,s),o.connect(u),u.connect(a.destination),o.start(),a.oncomplete=function(c){r(c.renderedBuffer),Se(u),Se(o)},a.startRendering(),window.filterNode=u},xA=function(e){for(var t=[],n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t},GA=function(){return Math.random()*2-1};typeof AudioContext<"u"&&(BaseAudioContext.prototype.adjustLength=function(e,t,n=1,s=0){const r=Math.floor(bn(s,0,1)*t.length),i=t.sampleRate*e,a=this.createBuffer(t.numberOfChannels,t.length,t.sampleRate);for(let o=0;o<t.numberOfChannels;o++){let u=t.getChannelData(o),c=a.getChannelData(o);for(let h=0;h<i;h++){let d=(r+h*Math.abs(n))%u.length;n<1&&(d=d*-1),c[h]=u.at(d)||0}}return a},BaseAudioContext.prototype.createReverb=function(e,t,n,s,r,i,a){const o=this.createConvolver();return o.generate=(u=2,c=.1,h=15e3,d=1e3,m,g,y)=>{o.duration=u,o.fade=c,o.lp=h,o.dim=d,o.ir=m,o.irspeed=g,o.irbegin=y,m?o.buffer=this.adjustLength(u,m,g,y):Qo.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:h,lpFreqEnd:d},G=>{o.buffer=G})},o.generate(e,t,n,s,r,i,a),o});var bc={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(n,s){if(super(n),!bc[s])throw new Error("vowel: unknown vowel "+s);const{gains:r,qs:i,freqs:a}=bc[s];this.makeupGain=n.createGain(),this.filters=[],this.gains=[];for(let o=0;o<5;o++){const u=n.createGain();u.gain.value=r[o];const c=n.createBiquadFilter();c.type="bandpass",c.Q.value=i[o],c.frequency.value=a[o],super.connect(c),c.connect(u),this.filters.push(c),u.connect(this.makeupGain),this.gains.push(u)}return this.makeupGain.gain.value=8,this}connect(n){this.makeupGain.connect(n)}disconnect(){Se(this.makeupGain),this.filters.forEach(Se),this.gains.forEach(Se),super.disconnect(),this.makeupGain=null,this.filters=null,this.gains=null}}BaseAudioContext.prototype.createVowelFilter=function(t){return new e(this,t)}}const CA="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oUil7InVzZSBzdHJpY3QiO3ZhciBXZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIFllPShSLFcsWCk9PlcgaW4gUj9XZShSLFcse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOlh9KTpSW1ddPVg7dmFyIER0PShSLFcsWCk9PlllKFIsdHlwZW9mIFchPSJzeW1ib2wiP1crIiI6VyxYKTtjbGFzcyBYIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgcz0wO3M8dGhpcy5uYklucHV0cztzKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMocywxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHMsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKXtsZXQgaT10W2VdLmxlbmd0aDtpIT10aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGUsaSl9Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspe2xldCBpPXNbZV0ubGVuZ3RoO2khPXRoaXMub3V0cHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhlLGkpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxzKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkocyk7Zm9yKGxldCBlPTA7ZTxzO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KHMpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtlXT10aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQscyl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bZV09bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtlXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dFtzXVtlXTt0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5zZXQoaSx0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dGhpcy5vdXRwdXRCdWZmZXJzW3NdW2VdLnN1YmFycmF5KDAsMTI4KTt0W3NdW2VdLnNldChpKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IHM9MDtzPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW3NdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtzKyspZm9yKGxldCBlPTA7ZTx0aGlzLmJsb2NrU2l6ZTtlKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW3NdW2VdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW3NdW2VdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQscyxlKXtjb25zdCBuPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW4/ITE6KHRoaXMuc3RhcnRlZD1uLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLGUpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhzKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQscyxlKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBRdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBzPW5ldyBBcnJheSh0aGlzLnNpemUqMiksZT0wO2U8cy5sZW5ndGg7ZSs9Mil7Y29uc3QgaD1NYXRoLlBJKmUvdGhpcy5zaXplO3NbZV09TWF0aC5jb3MoaCksc1tlKzFdPS1NYXRoLnNpbihoKX10aGlzLnRhYmxlPXM7Zm9yKHZhciBpPTAsbj0xO3RoaXMuc2l6ZT5uO248PD0xKWkrKzt0aGlzLl93aWR0aD1pJTI9PT0wP2ktMTppLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgYT0wO2E8dGhpcy5fYml0cmV2Lmxlbmd0aDthKyspe3RoaXMuX2JpdHJldlthXT0wO2Zvcih2YXIgbz0wO288dGhpcy5fd2lkdGg7bys9Mil7dmFyIGM9dGhpcy5fd2lkdGgtby0yO3RoaXMuX2JpdHJldlthXXw9KGE+Pj5vJjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxpPTA7aTx0Lmxlbmd0aDtpKz0yKWVbaT4+PjFdPXRbaV07cmV0dXJuIGV9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRbc109MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLGk9MDtpPGUubGVuZ3RoO2krPTIpZVtpXT10W2k+Pj4xXSxlW2krMV09MDtyZXR1cm4gZX1jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgcz10aGlzLl9jc2l6ZSxlPXM+Pj4xLGk9MjtpPGU7aSs9Mil0W3MtaV09dFtpXSx0W3MtaSsxXT0tdFtpKzFdfXRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxzKXtpZih0PT09cyl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9cyx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxzPXRoaXMuX2NzaXplLGU9dGhpcy5fd2lkdGgsaT0xPDxlLG49cy9pPDwxLGEsbyxjPXRoaXMuX2JpdHJldjtpZihuPT09NClmb3IoYT0wLG89MDthPHM7YSs9bixvKyspe2NvbnN0IG09Y1tvXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGEsbSxpKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgbT1jW29dO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoYSxtLGkpfXZhciBoPXRoaXMuX2ludj8tMToxLGY9dGhpcy50YWJsZTtmb3IoaT4+PTI7aT49MjtpPj49Mil7bj1zL2k8PDE7dmFyIHU9bj4+PjI7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIGQ9YSt1LGw9YSxwPTA7bDxkO2wrPTIscCs9aSl7Y29uc3QgbT1sLEk9bSt1LHc9SSt1LHY9dyt1LE09dFttXSxQPXRbbSsxXSxnPXRbSV0sVD10W0krMV0sQT10W3ddLFY9dFt3KzFdLE89dFt2XSxOPXRbdisxXSxDPU0sRj1QLHE9ZltwXSxCPWgqZltwKzFdLEw9ZypxLVQqQixFPWcqQitUKnEsSD1mWzIqcF0saXQ9aCpmWzIqcCsxXSwkPUEqSC1WKml0LFU9QSppdCtWKkgsSz1mWzMqcF0sWj1oKmZbMypwKzFdLGs9TypLLU4qWixmdD1PKlorTipLLGR0PUMrJCxydD1GK1UsbnQ9Qy0kLHB0PUYtVSxtdD1MK2ssYXQ9RStmdCxvdD1oKihMLWspLGd0PWgqKEUtZnQpLHZ0PWR0K210LEF0PXJ0K2F0LE90PWR0LW10LE50PXJ0LWF0LEN0PW50K2d0LEZ0PXB0LW90LEV0PW50LWd0LGt0PXB0K290O3RbbV09dnQsdFttKzFdPUF0LHRbSV09Q3QsdFtJKzFdPUZ0LHRbd109T3QsdFt3KzFdPU50LHRbdl09RXQsdFt2KzFdPWt0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPW5bc10sbz1uW3MrMV0sYz1uW3MrZV0saD1uW3MrZSsxXSxmPWErYyx1PW8raCxkPWEtYyxsPW8taDtpW3RdPWYsaVt0KzFdPXUsaVt0KzJdPWQsaVt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcysxXSx1PW5bcytlXSxkPW5bcytlKzFdLGw9bltzK29dLHA9bltzK28rMV0sbT1uW3MrY10sST1uW3MrYysxXSx3PWgrbCx2PWYrcCxNPWgtbCxQPWYtcCxnPXUrbSxUPWQrSSxBPWEqKHUtbSksVj1hKihkLUkpLE89dytnLE49ditULEM9TStWLEY9UC1BLHE9dy1nLEI9di1ULEw9TS1WLEU9UCtBO2lbdF09TyxpW3QrMV09TixpW3QrMl09QyxpW3QrM109RixpW3QrNF09cSxpW3QrNV09QixpW3QrNl09TCxpW3QrN109RX1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQscz10aGlzLl9jc2l6ZSxlPXRoaXMuX3dpZHRoLGk9MTw8ZSxuPXMvaTw8MSxhLG8sYz10aGlzLl9iaXRyZXY7aWYobj09PTQpZm9yKGE9MCxvPTA7YTxzO2ErPW4sbysrKXtjb25zdCBSdD1jW29dO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGEsUnQ+Pj4xLGk+Pj4xKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgUnQ9Y1tvXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChhLFJ0Pj4+MSxpPj4+MSl9dmFyIGg9dGhpcy5faW52Py0xOjEsZj10aGlzLnRhYmxlO2ZvcihpPj49MjtpPj0yO2k+Pj0yKXtuPXMvaTw8MTt2YXIgdT1uPj4+MSxkPXU+Pj4xLGw9ZD4+PjE7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIHA9MCxtPTA7cDw9bDtwKz0yLG0rPWkpe3ZhciBJPWErcCx3PUkrZCx2PXcrZCxNPXYrZCxQPXRbSV0sZz10W0krMV0sVD10W3ddLEE9dFt3KzFdLFY9dFt2XSxPPXRbdisxXSxOPXRbTV0sQz10W00rMV0sRj1QLHE9ZyxCPWZbbV0sTD1oKmZbbSsxXSxFPVQqQi1BKkwsSD1UKkwrQSpCLGl0PWZbMiptXSwkPWgqZlsyKm0rMV0sVT1WKml0LU8qJCxLPVYqJCtPKml0LFo9ZlszKm1dLGs9aCpmWzMqbSsxXSxmdD1OKlotQyprLGR0PU4qaytDKloscnQ9RitVLG50PXErSyxwdD1GLVUsbXQ9cS1LLGF0PUUrZnQsb3Q9SCtkdCxndD1oKihFLWZ0KSx2dD1oKihILWR0KSxBdD1ydCthdCxPdD1udCtvdCxOdD1wdCt2dCxDdD1tdC1ndDtpZih0W0ldPUF0LHRbSSsxXT1PdCx0W3ddPU50LHRbdysxXT1DdCxwPT09MCl7dmFyIEZ0PXJ0LWF0LEV0PW50LW90O3Rbdl09RnQsdFt2KzFdPUV0O2NvbnRpbnVlfWlmKHAhPT1sKXt2YXIga3Q9cHQsT2U9LW10LE5lPXJ0LENlPS1udCxGZT0taCp2dCxFZT0taCpndCxrZT0taCpvdCxSZT0taCphdCxEZT1rdCtGZSx6ZT1PZStFZSxxZT1OZStSZSxMZT1DZS1rZSxadD1hK2QtcCxYdD1hK3UtcDt0W1p0XT1EZSx0W1p0KzFdPXplLHRbWHRdPXFlLHRbWHQrMV09TGV9fX19X3NpbmdsZVJlYWxUcmFuc2Zvcm0yKHQscyxlKXtjb25zdCBpPXRoaXMuX291dCxuPXRoaXMuX2RhdGEsYT1uW3NdLG89bltzK2VdLGM9YStvLGg9YS1vO2lbdF09YyxpW3QrMV09MCxpW3QrMl09aCxpW3QrM109MH1fc2luZ2xlUmVhbFRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcytlXSx1PW5bcytvXSxkPW5bcytjXSxsPWgrdSxwPWgtdSxtPWYrZCxJPWEqKGYtZCksdz1sK20sdj1wLE09LUksUD1sLW0sZz1wLFQ9STtpW3RdPXcsaVt0KzFdPTAsaVt0KzJdPXYsaVt0KzNdPU0saVt0KzRdPVAsaVt0KzVdPTAsaVt0KzZdPWcsaVt0KzddPVR9fWxldCB0cz1yPT5jb25zb2xlLmxvZyhyKTtjb25zdCBzcz0oLi4ucik9PnRzKC4uLnIpLGVzPShyLHQscyk9Pk1hdGgubWluKE1hdGgubWF4KHIsdCkscyksenQ9cj0+ci8oMStyKSxpcz0ocix0KT0+KHIldCt0KSV0LHJzPShyLHQpPT4oMSt0KSpyLygxK3QqTWF0aC5hYnMocikpLEo9KHIsdCk9Pk1hdGgudGFuaChyKigxK3QpKSxucz0ocix0KT0+ZXMoKDErdCkqciwtMSwxKSxxdD0ocix0KT0+e2xldCBzPSgxKy41KnQpKnI7Y29uc3QgZT1pcyhzKzEsNCk7cmV0dXJuIDEtTWF0aC5hYnMoZS0yKX0sYXM9KHIsdCk9Pk1hdGguc2luKE1hdGguUEkvMipxdChyLHQpKSxvcz0ocix0KT0+e2NvbnN0IHM9enQoTWF0aC5sb2cxcCh0KSksZT0oci1zLzMqcipyKnIpLygxLXMvMyk7cmV0dXJuIEooZSx0KX0sTHQ9KHIsdCxzPSExKT0+e2NvbnN0IGU9MSsyKnQsbj0uMDcqenQoTWF0aC5sb2cxcCh0KSksYT1KKHIrbiwyKnQpLG89SihzP246LXIrbiwyKnQpLGM9YS1vLGg9MS9NYXRoLmNvc2goZSpuKSxmPWgqaCx1PU1hdGgubWF4KDFlLTgsKHM/MToyKSplKmYpO3JldHVybiBKKGMvdSx0KX0sV3Q9e3NjdXJ2ZTpycyxzb2Z0OkosaGFyZDpucyxjdWJpYzpvcyxkaW9kZTpMdCxhc3ltOihyLHQpPT5MdChyLHQsITApLGZvbGQ6cXQsc2luZWZvbGQ6YXMsY2hlYnlzaGV2OihyLHQpPT57Y29uc3Qgcz0xMCpNYXRoLmxvZzFwKHQpO2xldCBlPTEsaT1yLG4sYT0wO2ZvcihsZXQgbz0xO288NjQ7bysrKXtpZihvPDIpe2ErPW89PTA/ZTppO2NvbnRpbnVlfW49MipyKmUtaSxpPWUsZT1uLG8lMj09PTAmJihhKz1NYXRoLm1pbigxLjMqcy9vLDIpKm4pfXJldHVybiBKKGEscy8yMCl9fSxodD1PYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKFd0KSksaHM9cj0+e2xldCB0PXI7dHlwZW9mIHI9PSJzdHJpbmciJiYodD1odC5pbmRleE9mKHIpLHQ9PT0tMSYmKHNzKGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7cn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7aHQuam9pbigiLCAiKX0uCiAgICAgICAgRGVmYXVsdGluZyB0byAke2h0WzBdfS5gKSx0PTApKTtjb25zdCBzPWh0W3QlaHQubGVuZ3RoXTtyZXR1cm4gV3Rbc119O2Z1bmN0aW9uIGN0KHIsdCl7aWYodHx8KHQ9ImFzc2VydGlvbiBmYWlsZWQiKSwhcil0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gY3Mocix0LHMpe3JldHVybiByPD0wP3Q6cj49MT9zOnQrcioocy10KX1mdW5jdGlvbiB1cyhyLHQscyl7cmV0dXJuIHI8PXQ/MDpyPj1zPzE6cz09PXQ/MDooci10KS8ocy10KX1mdW5jdGlvbiBscyhyLHQpe3JldHVybiByPHQ/KHIvPXQscityLXIqci0xKTpyPjEtdD8ocj0oci0xKS90LHIqcityK3IrMSk6MH1mdW5jdGlvbiBmcyhyKXtyZXR1cm4gTWF0aC5mbG9vcihyKT09PXJ9ZnVuY3Rpb24gZHMocil7cmV0dXJuIGZzKHIpJiZyPjB9ZnVuY3Rpb24gcHMocix0KXt0PU1hdGgubWluKE1hdGgubWF4KHQsMCksMSksdC09LjAxO3ZhciBzPTIqdC8oMS10KSxlPSgxK3MpKnIvKDErcypNYXRoLmFicyhyKSk7cmV0dXJuIGV9ZnVuY3Rpb24gSXQocix0LHMpe3JldHVybiByPj0xP3M6dCtyKihzLXQpfWZ1bmN0aW9uIFl0KCl7dGhpcy5zdGF0ZT0ib2ZmIix0aGlzLnN0YXJ0VGltZT0wLHRoaXMuc3RhcnRWYWw9MH1ZdC5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihyLHQscyxlLGksbil7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2Uib2ZmIjpyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1yLHRoaXMuc3RhcnRWYWw9MCksMDtjYXNlImF0dGFjayI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7cmV0dXJuIGE+cz8odGhpcy5zdGF0ZT0iZGVjYXkiLHRoaXMuc3RhcnRUaW1lPXIsMSk6SXQoYS9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWUsbz1JdChhL2UsMSxpKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8sbyk6YT5lPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1yLGkpOm99Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXIsdGhpcy5zdGFydFZhbD1pKSxpO2Nhc2UicmVsZWFzZSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7aWYoYT5uKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IG89SXQoYS9uLHRoaXMuc3RhcnRWYWwsMCk7cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8pLG99fXRocm93ImludmFsaWQgZW52ZWxvcGUgc3RhdGUifTtmdW5jdGlvbiB3dCgpe3RoaXMuczA9MCx0aGlzLnMxPTB9d3QucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHIsdCxzKXtjdCghaXNOYU4ociksIk5hTiB2YWx1ZSBmZWQgaW4gVHdvUG9sZUZpbHRlciIpLHQ9TWF0aC5taW4odCwxKSxzPU1hdGgubWF4KHMsMCk7dmFyIGU9TWF0aC5wb3coLjUsKDEtdCkvLjEyNSksaT1NYXRoLnBvdyguNSwocysuMTI1KS8uMTI1KSxuPTEtaSplLGE9dGhpcy5zMCxvPXRoaXMuczE7cmV0dXJuIGE9biphLWUqbytlKnIsbz1uKm8rZSphLHI9byx0aGlzLnMwPWEsdGhpcy5zMT1vLHJ9O2xldCBtcz1jbGFzcyBKdHtjb25zdHJ1Y3Rvcih0LHMpe3RoaXMuc2FtcGxlUmF0ZT10LHM/dGhpcy5idWZmZXI9cy5zbGljZSgwKToodGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheSgxMCp0KSx0aGlzLmJ1ZmZlci5maWxsKDApKSx0aGlzLndyaXRlSWR4PTAsdGhpcy5yZWFkSWR4PTB9cmVzZXQoKXt0aGlzLmJ1ZmZlci5maWxsKDApLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1jbG9uZSgpe2NvbnN0IHQ9bmV3IEp0KHRoaXMuc2FtcGxlUmF0ZSx0aGlzLmJ1ZmZlcik7cmV0dXJuIHQud3JpdGVJZHg9dGhpcy53cml0ZUlkeCx0LnJlYWRJZHg9dGhpcy5yZWFkSWR4LHR9d3JpdGUodCxzKXt0aGlzLndyaXRlSWR4PSh0aGlzLndyaXRlSWR4KzEpJXRoaXMuYnVmZmVyLmxlbmd0aCx0aGlzLmJ1ZmZlclt0aGlzLndyaXRlSWR4XT10O2xldCBlPU1hdGgubWluKE1hdGguZmxvb3IodGhpcy5zYW1wbGVSYXRlKnMpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1lLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXJlYWQoKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19O2NvbnN0IFN0PTEvNDhlMyxfdD0yNCxncz1fdC80O2NsYXNzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgYnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZW52PW5ldyBZdH11cGRhdGUodCxzLGUsaSxuLGEpe3JldHVybiB0aGlzLmVudi5ldmFsKHQscyxlLGksbixhKX19Y2xhc3MgdnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9X3QqdC82MCxlPS41O3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqcyx0aGlzLnBoYXNlJTE8ZT8xOi0xfX1jbGFzcyBJcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5pblNnbj0hMCx0aGlzLm91dFNnbj0hMCx0aGlzLmNsb2NrQ250PTB9dXBkYXRlKHQscyl7bGV0IGU9dD4wO3JldHVybiB0aGlzLmluU2duIT1lJiYodGhpcy5jbG9ja0NudCsrLHRoaXMuY2xvY2tDbnQ+PXMmJih0aGlzLmNsb2NrQ250PTAsdGhpcy5vdXRTZ249IXRoaXMub3V0U2duKSksdGhpcy5pblNnbj1lLHRoaXMub3V0U2duPzE6LTF9fWNsYXNzIHdzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBNdD1uZXcgTWFwO2NsYXNzIFNzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPXMuaW5wdXRzWzJdO24mJk10LmhhcyhuKT90aGlzLmRlbGF5PU10LmdldChuKS5jbG9uZSgpOnRoaXMuZGVsYXk9bmV3IG1zKGUpLG4mJk10LnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIF9zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKX11cGRhdGUodCxzKXtyZXR1cm4gcHModCxzKX19Y2xhc3MgTXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIHhze2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy52YWx1ZT10LHRoaXMudmFsdWV9fWNvbnN0IHlzPTM0MDtsZXQgR3Q9MDtjbGFzcyBQc3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2g9R3QsdGhpcy5zdGFydF9zZWVkPXlzKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9NTk2MDQ2NDQ3NzUzOTA2M2UtMjMsR3QrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBUc3tjb25zdHJ1Y3Rvcigpe3RoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTF9dXBkYXRlKHQpe3JldHVybiB0Pyh0aGlzLnZhbHVlPU1hdGgucmFuZG9tKCkqMi0xLHRoaXMudmFsdWUpOnRoaXMudmFsdWV9fWNsYXNzIEJze3VwZGF0ZSh0KXtyZXR1cm4gTWF0aC5yYW5kb20oKTx0KlN0P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgVnN7Y29uc3RydWN0b3IoKXt0aGlzLm91dD0wfXVwZGF0ZSgpe2xldCB0PU1hdGgucmFuZG9tKCkqMi0xO3JldHVybiB0aGlzLm91dD0odGhpcy5vdXQrLjAyKnQpLzEuMDIsdGhpcy5vdXR9fWNsYXNzIEFze2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHQ9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCt0Ki4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErdCouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMit0Ki4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3QqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCt0Ki41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtdCouMDE2ODk4O2NvbnN0IHM9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNit0Ki41MzYyO3JldHVybiB0aGlzLmI2PXQqLjExNTkyNixzKi4xMX19Y2xhc3MgT3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIE5zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LHRoaXMucGhhc2UlMTxzPzE6LTF9fWNsYXNzIENzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqdCx0aGlzLnBoYXNlJTEqMi0xfX1jbGFzcyBGc3tjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9bHModGhpcy5waGFzZSxzKSxpPTIqdGhpcy5waGFzZS0xLWU7cmV0dXJuIHRoaXMucGhhc2UrPXMsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZS09MSksaX19Y2xhc3MgRXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MCx0aGlzLnN5bmNTZ249ITF9dXBkYXRlKHQscyxlKXshdGhpcy5zeW5jU2duJiZzPjAmJih0aGlzLnBoYXNlPTApLHRoaXMuc3luY1Nnbj1zPjA7bGV0IGk9KHRoaXMucGhhc2UrZSklMTtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsTWF0aC5zaW4oaSoyKk1hdGguUEkpfX1jbGFzcyBrc3tkQlRvTGluZWFyKHQpe3JldHVybiBNYXRoLnBvdygxMCx0LzIwKX1saW5lYXJUb0RCKHQpe3JldHVybiAyMCpNYXRoLmxvZzEwKHQpfXVwZGF0ZSh0LHMsZSl7bGV0IGk9dGhpcy5saW5lYXJUb0RCKE1hdGguYWJzKHQpKSxuPTA7cmV0dXJuIGk+cyYmKG49KGktcykqKDEtMS9lKSksdGhpcy5kQlRvTGluZWFyKC1uKX19Y2xhc3MgUnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZSUxO3JldHVybihzPC41PzIqczoxLTIqKHMtLjUpKSoyLTF9fWNsYXNzIERzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPWUvMzA7Y3QoZHMobikpLHRoaXMuYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkobiksdGhpcy53cml0ZVBvcz0wfXVwZGF0ZSh0LHMsZSxpKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy53cml0ZVBvc109dCx0aGlzLndyaXRlUG9zKyssdGhpcy53cml0ZVBvcyV0aGlzLmJ1ZmZlci5sZW5ndGg9PTAmJih0aGlzLndyaXRlUG9zPTAsdGhpcy5zZW5kKHt0eXBlOiJTRU5EX1NBTVBMRVMiLGlkOnMsc2FtcGxlczp0aGlzLmJ1ZmZlcixjaGFubmVsczplLGNoYW5uZWw6aX0pKSx0fX1jbGFzcyB6c3tjb25zdHJ1Y3Rvcigpe3RoaXMubGFnVW5pdD00NDEwLHRoaXMucz0wfXVwZGF0ZSh0LHMpe3JldHVybiBzPXMqdGhpcy5sYWdVbml0LHM8MSYmKHM9MSksdGhpcy5zKz0xL3MqKHQtdGhpcy5zKSx0aGlzLnN9fWNsYXNzIHFze2NvbnN0cnVjdG9yKCl7dGhpcy5sYXN0PTB9dXBkYXRlKHQscyxlKXtjb25zdCBpPXMqU3Qsbj1lKlN0O2xldCBhPXQtdGhpcy5sYXN0O3JldHVybiBhPmk/YT1pOmE8LW4mJihhPS1uKSx0aGlzLmxhc3QrPWEsdGhpcy5sYXN0fX1jbGFzcyBMcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgV3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB3dH11cGRhdGUodCxzLGUpe3JldHVybiB0aGlzLmZpbHRlci5hcHBseSh0LHMsZSksdGhpcy5maWx0ZXIuczF9fWNsYXNzIFlzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmZpbHRlcj1uZXcgd3R9dXBkYXRlKHQscyxlKXtyZXR1cm4gdGhpcy5maWx0ZXIuYXBwbHkodCxzLGUpLHRoaXMuZmlsdGVyLnMwfX1jbGFzcyBHcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSl9dXBkYXRlKHQscyl7cmV0dXJuIHM8MCYmKHM9MCkscz1zKzEsdD10KnMsNCooTWF0aC5hYnMoLjI1KnQrLjI1LU1hdGgucm91bmQoLjI1KnQrLjI1KSktLjI1KX19Y2xhc3MganMgZXh0ZW5kcyB5e3VwZGF0ZSh0KXtyZXR1cm4gdH19Y2xhc3MgYnQgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmN0KCExKX19Z2V0RnJlcSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLmZyZXE7Y2FzZSJvZmYiOnJldHVybiB0aGlzLmZyZXE7ZGVmYXVsdDpjdCghMSl9fWdldFZlbG9jaXR5KCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMudmVsb2NpdHk7Y2FzZSJvZmYiOnJldHVybiB0aGlzLnZlbG9jaXR5O2RlZmF1bHQ6Y3QoITEpfX19Y2xhc3MgSHMgZXh0ZW5kcyBidHtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlnYXRlIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0R2F0ZSgpfX1jbGFzcyBVcyBleHRlbmRzIGJ0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWZyZXEifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRGcmVxKCl9fWNsYXNzICRzIGV4dGVuZHMgYnR7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgS3N7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBacyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgWHMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBKcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBRcyBleHRlbmRzIHl7dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyB0ZXt1cGRhdGUodCxzLGUsaSxuKXtsZXQgYT11cyh0LHMsZSk7cmV0dXJuIGNzKGEsaSxuKX19Y2xhc3Mgc2V7dXBkYXRlKHQscyxlKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodCxzKSxlKX19Y2xhc3MgZWV7Y29uc3RydWN0b3IoKXt0aGlzLmhpPSExfXVwZGF0ZSh0KXtyZXR1cm4hdGhpcy5oaSYmdD4wPyh0aGlzLmhpPSEwLDEpOih0aGlzLmhpJiZ0PD0wJiYodGhpcy5oaT0hMSksMCl9fWNsYXNzIGlle2NvbnN0cnVjdG9yKCl7dGhpcy54MT0wLHRoaXMueDI9MCx0aGlzLnkxPTAsdGhpcy55Mj0wLHRoaXMuYTA9MSx0aGlzLmExPTAsdGhpcy5hMj0wLHRoaXMuYjA9MSx0aGlzLmIxPTAsdGhpcy5iMj0wfXVwZGF0ZSh0PTAscz0wLGU9NTAwLGk9MSxuPTEpe2NvbnN0IGE9MipNYXRoLlBJKmUvc2FtcGxlUmF0ZSxvPU1hdGguc2luKGEpO2k9TWF0aC5wb3coMTAsaS8yMCk7Y29uc3QgYz1vLygyKmkpLGg9TWF0aC5jb3MoYSk7aWYocz09PTApdGhpcy5iMT0xLWgsdGhpcy5iMD10aGlzLmIxLzIsdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT0xKXRoaXMuYjA9KDEraCkvMix0aGlzLmIxPS0oMStoKSx0aGlzLmIyPXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTIpdGhpcy5iMD1vLzIsdGhpcy5iMT0wLHRoaXMuYjI9LXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTMpdGhpcy5iMD0xLHRoaXMuYjE9LTIqaCx0aGlzLmIyPTEsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTQpdGhpcy5iMD0xLWMsdGhpcy5iMT0tMipoLHRoaXMuYjI9MStjLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT01KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApO3RoaXMuYjA9MStjKnUsdGhpcy5iMT0tMipoLHRoaXMuYjI9MS1jKnUsdGhpcy5hMD0xK2MvdSx0aGlzLmExPS0yKmgsdGhpcy5hMj0xLWMvdX1lbHNlIGlmKHM9PT02KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQodSkqYyxsPSh1LTEpKmgscD0odSsxKSpoO3RoaXMuYjA9dSoodSsxLWwrZCksdGhpcy5iMT0yKnUqKHUtMS1wKSx0aGlzLmIyPXUqKHUrMS1sLWQpLHRoaXMuYTA9dSsxK2wrZCx0aGlzLmExPS0yKih1LTErcCksdGhpcy5hMj11KzErbC1kfWVsc2UgaWYocz09PTcpe2NvbnN0IHU9TWF0aC5wb3coMTAsbi80MCksZD0yKk1hdGguc3FydCh1KSpjLGw9KHUtMSkqaCxwPSh1KzEpKmg7dGhpcy5iMD11Kih1KzErbCtkKSx0aGlzLmIxPS0yKnUqKHUtMStwKSx0aGlzLmIyPXUqKHUrMStsLWQpLHRoaXMuYTA9dSsxLWwrZCx0aGlzLmExPTIqKHUtMS1wKSx0aGlzLmEyPXUrMS1sLWR9dGhpcy5iMC89dGhpcy5hMCx0aGlzLmIxLz10aGlzLmEwLHRoaXMuYjIvPXRoaXMuYTAsdGhpcy5hMS89dGhpcy5hMCx0aGlzLmEyLz10aGlzLmEwLHRoaXMuYTA9MTtjb25zdCBmPXRoaXMuYjAqdCt0aGlzLmIxKnRoaXMueDErdGhpcy5iMip0aGlzLngyLXRoaXMuYTEqdGhpcy55MS10aGlzLmEyKnRoaXMueTI7cmV0dXJuIHRoaXMueDI9dGhpcy54MSx0aGlzLngxPXQsdGhpcy55Mj10aGlzLnkxLHRoaXMueTE9ZixmfX1jb25zdCByZT1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsQURTUk5vZGU6YnMsQXVkaW9JbjpqcyxBdWRpb05vZGU6eSxCUEY6WXMsQmlxdWFkRmlsdGVyOmllLEJyb3duTm9pc2VPc2M6VnMsQ0M6WnMsQ0xPQ0tfUFBROl90LENMT0NLX1BQUzpncyxDbGlwOnNlLENsb2NrOnZzLENsb2NrRGl2OklzLENsb2NrT3V0OndzLERlbGF5OlNzLERpc3RvcnQ6X3MsRHVzdE9zYzpCcyxGaWx0ZXI6V3MsRm9sZDpHcyxIb2xkOk1zLEltcHVsc2VPc2M6T3MsTGFnOnpzLExjZ05vaXNlOlBzLE1pZGlDQzpYcyxNaWRpRnJlcTpVcyxNaWRpR2F0ZTpIcyxNaWRpSW46YnQsTWlkaVZlbDokcyxOb2lzZU9zYzpUcyxPdXRwdXQ6eHMsUGljazpRcyxQaW5rTm9pc2U6QXMsUHVsc2VPc2M6TnMsUmVtYXA6dGUsU2F3T3NjOkZzLFNjb3BlOkRzLFNlcXVlbmNlOkpzLFNpZGVjaGFpbkNvbXByZXNzb3I6a3MsU2lnbmFsOktzLFNpbmVPc2M6RXMsU2xldzpxcyxTbGlkZTpMcyxUcmlPc2M6UnMsVHJpZzplZSxaYXdPc2M6Q3N9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSksbmU9bmV3IE1hcChPYmplY3QuZW50cmllcyhyZSkpLFk9MTI4LEQ9TWF0aC5QSSx6PTIqRCxHPTEvc2FtcGxlUmF0ZSx4dD1yPT4xLU1hdGguZXhwKC1HL3IpLGp0PXI9Pk1hdGgucG93KDEwLHIvMjApLFM9KHIsdCxzKT0+TWF0aC5taW4oTWF0aC5tYXgocix0KSxzKSx1dD0ocix0LHMpPT5zKih0LXIpK3IsYj0ocix0KT0+clt0XT8/clswXSxRPXI9PnItTWF0aC5mbG9vcihyKSx0dD1yPT5yfDAsc3Q9cj0+dHQocisuNSksYWU9cj0+dHQocisxKSxIdD1yPT5yLXR0KHIpLGo9cj0+e2NvbnN0IHQ9cioqMjtyZXR1cm4gciooMjcrdCkvKDI3KzkqdCl9LFV0PShyLHQpPT57aWYocjwyKXJldHVybiBpPT4wO2NvbnN0IHM9dC8oci0xKSxlPXQqLjU7cmV0dXJuIGk9Pmkqcy1lfSxldD0ocix0KT0+cipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIG9lKHIsdCl7dD1NYXRoLm1pbih0LDEtdCk7Y29uc3Qgcz0xL3Q7cmV0dXJuIHI8dD8ocio9cywyKnItcioqMi0xKTpyPjEtdD8ocj0oci0xKSpzLHIqKjIrMipyKzEpOjB9Y29uc3QgeXQ9e3RyaShyLHQ9LjUpe2NvbnN0IHM9MS10O3JldHVybiByPj10PzEvcy1yL3M6ci90fSxzaW5lKHIpe3JldHVybiBNYXRoLnNpbih6KnIpKi41Ky41fSxyYW1wKHIpe3JldHVybiByfSxzYXcocil7cmV0dXJuIDEtcn0sc3F1YXJlKHIsdD0uNSl7cmV0dXJuIHI+PXQ/MDoxfSxjdXN0b20ocix0PVswLDFdKXtjb25zdCBzPXQubGVuZ3RoLTEsZT1NYXRoLmZsb29yKHIqcyksaT0xL3Msbj1TKHRbZV0sMCwxKSxvPVModFtlKzFdLDAsMSksYz1uLGg9MCxmPWk7cmV0dXJuKG8tYykvKGYtaCkqKHItaSplKStufSxzYXdibGVwKHIsdCl7cmV0dXJuIDIqci0xLW9lKHIsdCl9fSxoZT1PYmplY3Qua2V5cyh5dCk7Y2xhc3MgY2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTotMWU5fSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MWU5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdLG89ZS5mcmVxdWVuY3lbMF0sYz1lLnRpbWVbMF0saD1lLmRlcHRoWzBdLGY9ZS5za2V3WzBdLHU9ZS5waGFzZW9mZnNldFswXSxkPWUuY3VydmVbMF0sbD1lLmRjb2Zmc2V0WzBdLHA9ZS5taW5bMF0sbT1lLm1heFswXSxJPWhlW2Uuc2hhcGVbMF1dLHc9YVswXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9SHQoYypvK3UpKTtjb25zdCB2PW8qRztmb3IobGV0IE09MDtNPHc7TSsrKXtmb3IobGV0IFA9MDtQPGEubGVuZ3RoO1ArKyl7bGV0IGc9KHl0W0ldKHRoaXMucGhhc2UsZikrbCkqaDtnPU1hdGgucG93KGcsZCksYVtQXVtNXT1TKGcscCxtKX10aGlzLmluY3JlbWVudFBoYXNlKHYpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsY2UpO2NsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7bGV0IG89ZS5jb2Fyc2VbMF0/PzA7bz1NYXRoLm1heCgxLG8pO2ZvcihsZXQgYz0wO2M8WTtjKyspZm9yKGxldCBoPTA7aDxpLmxlbmd0aDtoKyspbltoXVtjXT1jJW89PT0wP2lbaF1bY106bltoXVtjLTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsdWUpO2NsYXNzIGxlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtsZXQgbz1lLmNydXNoWzBdPz84O289TWF0aC5tYXgoMSxvKTtmb3IobGV0IGM9MDtjPFk7YysrKWZvcihsZXQgaD0wO2g8aS5sZW5ndGg7aCsrKXtjb25zdCBmPU1hdGgucG93KDIsby0xKTtuW2hdW2NdPU1hdGgucm91bmQoaVtoXVtjXSpmKS9mfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixsZSk7Y2xhc3MgZmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFhKXJldHVybiExO3RoaXMuc3RhcnRlZD1hO2xldCBvPWUuc2hhcGVbMF07bz1vPDE/bzouOTk5OTk5OTk5NixvPTIqby8oMS1vKTtjb25zdCBjPU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxlLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBoPTA7aDxZO2grKylmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyluW2ZdW2hdPSgxK28pKmlbZl1baF0vKDErbypNYXRoLmFicyhpW2ZdW2hdKSkqYztyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsZmUpO2NsYXNzICR0e2NvbnN0cnVjdG9yKCl7RHQodGhpcywiczAiLDApO0R0KHRoaXMsInMxIiwwKX11cGRhdGUodCxzLGU9MCl7ZT1TKGUsMCwxKSxzPVMocywwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCBpPVMoMipNYXRoLnNpbihzKkQqRyksMCwxLjE0KSxhPTEtTWF0aC5wb3coLjUsOCplKzEpKmk7cmV0dXJuIHRoaXMuczA9YSp0aGlzLnMwLWkqdGhpcy5zMStpKnQsdGhpcy5zMT1hKnRoaXMuczEraSp0aGlzLnMwLHRoaXMuczF9fWNsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InZhbHVlIixkZWZhdWx0VmFsdWU6LjV9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5maWx0ZXJzPVtuZXcgJHQsbmV3ICR0XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDt0aGlzLnN0YXJ0ZWQ9YTtjb25zdCBvPVMoZS52YWx1ZVswXSwwLDEpO2xldCBjPSJub25lIixoLGY9MTtvPi41MT8oYz0iaGlwYXNzIixmPShvLS41KSoyKTpvPC40OSYmKGM9ImxvcGFzcyIsZj1vKjIpLGg9TWF0aC5wb3coZioxMSw0KTtmb3IobGV0IHU9MDt1PGkubGVuZ3RoO3UrKylmb3IobGV0IGQ9MDtkPFk7ZCsrKWM9PSJub25lIj9uW3VdW2RdPWlbdV1bZF06KHRoaXMuZmlsdGVyc1t1XS51cGRhdGUoaVt1XVtkXSxoLC4xKSxjPT09ImxvcGFzcyI/blt1XVtkXT10aGlzLmZpbHRlcnNbdV0uczE6Yz09PSJoaXBhc3MiP25bdV1bZF09aVt1XVtkXS10aGlzLmZpbHRlcnNbdV0uczE6blt1XVtkXT1pW3VdW2RdKTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRqZi1wcm9jZXNzb3IiLGRlKTtjbGFzcyBwZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo1MDB9LHtuYW1lOiJxIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRyaXZlIixkZWZhdWx0VmFsdWU6LjY5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLnAwPVswLDBdLHRoaXMucDE9WzAsMF0sdGhpcy5wMj1bMCwwXSx0aGlzLnAzPVswLDBdLHRoaXMucDMyPVswLDBdLHRoaXMucDMzPVswLDBdLHRoaXMucDM0PVswLDBdfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7Y29uc3Qgbz1lLnFbMF0sYz1TKE1hdGguZXhwKGUuZHJpdmVbMF0pLC4xLDJlMyk7bGV0IGg9ZS5mcmVxdWVuY3lbMF07aD1oKnoqRyxoPWg+MT8xOmg7Y29uc3QgZj1NYXRoLm1pbig4LG8qLjEzKTtsZXQgdT0xL2MqTWF0aC5taW4oMS43NSwxK2YpO2ZvcihsZXQgZD0wO2Q8WTtkKyspZm9yKGxldCBsPTA7bDxpLmxlbmd0aDtsKyspe2NvbnN0IHA9dGhpcy5wM1tsXSouMzYwODkxK3RoaXMucDMyW2xdKi40MTcyOSt0aGlzLnAzM1tsXSouMTc3ODk2K3RoaXMucDM0W2xdKi4wNDM5NzI1O3RoaXMucDM0W2xdPXRoaXMucDMzW2xdLHRoaXMucDMzW2xdPXRoaXMucDMyW2xdLHRoaXMucDMyW2xdPXRoaXMucDNbbF0sdGhpcy5wMFtsXSs9KGooaVtsXVtkXSpjLWYqcCktaih0aGlzLnAwW2xdKSkqaCx0aGlzLnAxW2xdKz0oaih0aGlzLnAwW2xdKS1qKHRoaXMucDFbbF0pKSpoLHRoaXMucDJbbF0rPShqKHRoaXMucDFbbF0pLWoodGhpcy5wMltsXSkpKmgsdGhpcy5wM1tsXSs9KGoodGhpcy5wMltsXSktaih0aGlzLnAzW2xdKSkqaCxuW2xdW2RdPXAqdX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImxhZGRlci1wcm9jZXNzb3IiLHBlKTtjbGFzcyBtZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJkaXN0b3J0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InBvc3RnYWluIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHtwcm9jZXNzb3JPcHRpb25zOnR9KXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLmFsZ29yaXRobT1ocyh0LmFsZ29yaXRobSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtmb3IobGV0IG89MDtvPFk7bysrKXtjb25zdCBjPVMoYihlLnBvc3RnYWluLG8pLC4wMDEsMSksaD1NYXRoLmV4cG0xKGIoZS5kaXN0b3J0LG8pKTtmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyl7Y29uc3QgdT1pW2ZdW29dO25bZl1bb109Yyp0aGlzLmFsZ29yaXRobSh1LGgpfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRpc3RvcnQtcHJvY2Vzc29yIixtZSk7Y2xhc3MgZ2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2NvbnN0e3R5cGU6cyxwYXlsb2FkOmV9PXQuZGF0YXx8e307cz09PSJpbml0aWFsaXplIiYmdGhpcy5pbml0aWFsaXplKGUpfSx0aGlzLmluaXRpYWxpemUoKX1pbml0aWFsaXplKHQpe3RoaXMucGhhc2U9W119c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjotMX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOi0xfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdLGQ9ZS52b2ljZXNbMF07Zm9yKGxldCBsPTA7bDx1WzBdLmxlbmd0aDtsKyspe2NvbnN0IHA9YihlLmRldHVuZSxsKSxtPWIoZS5mcmVxc3ByZWFkLGwpLEk9YihlLnBhbnNwcmVhZCxsKSouNSsuNTtsZXQgdz1NYXRoLnNxcnQoMS1JKSx2PU1hdGguc3FydChJKSxNPWIoZS5mcmVxdWVuY3ksbCk7TT1ldChNLHAvMTAwKTtjb25zdCBQPVV0KGQsbSk7Zm9yKGxldCBnPTA7ZzxkO2crKyl7Y29uc3QgVD1ldChNLFAoZykpLEE9UShUKkcpO3RoaXMucGhhc2VbZ109dGhpcy5waGFzZVtnXT8/TWF0aC5yYW5kb20oKTtjb25zdCBWPXl0LnNhd2JsZXAodGhpcy5waGFzZVtnXSxBKTt1WzBdW2xdKz1WKncsdVsxXVtsXSs9Vip2O2xldCBPPXRoaXMucGhhc2VbZ10rQTtPPj0xJiYoTy09MSksdGhpcy5waGFzZVtnXT1PO2NvbnN0IE49dzt3PXYsdj1OfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInN1cGVyc2F3LW9zY2lsbGF0b3IiLGdlKTtjb25zdCBiZT0yMDQ4LFB0PW5ldyBNYXA7ZnVuY3Rpb24gdmUocil7aWYoIVB0LmhhcyhyKSl7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KHIpO2ZvcihsZXQgcz0wO3M8cjtzKyspdFtzXT0uNSooMS1NYXRoLmNvcyh6KnMvcikpO1B0LnNldChyLHQpfXJldHVybiBQdC5nZXQocil9Y2xhc3MgSWUgZXh0ZW5kcyBYe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOmJlfSxzdXBlcih0KSx0aGlzLnRpbWVDdXJzb3I9MCx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy5pbnZmZnRTaXplPTEvdGhpcy5mZnRTaXplLHRoaXMuaGFubldpbmRvdz12ZSh0aGlzLmZmdFNpemUpLHRoaXMuZmZ0PW5ldyBRdCh0aGlzLmZmdFNpemUpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy50aW1lQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLm1hZ25pdHVkZXM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmZmdFNpemUvMisxKSx0aGlzLnBlYWtJbmRleGVzPW5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpLHRoaXMubmJQZWFrcz0wfXByb2Nlc3NPTEEodCxzLGUpe2xldCBpPWUucGl0Y2hGYWN0b3JbZS5waXRjaEZhY3Rvci5sZW5ndGgtMV07aTwwJiYoaT1pKi4yNSksaT1NYXRoLm1heCgwLGkrMSk7Zm9yKGxldCBuPTA7bjx0aGlzLm5iSW5wdXRzO24rKylmb3IobGV0IGE9MDthPHRbbl0ubGVuZ3RoO2ErKyl7Y29uc3Qgbz10W25dW2FdLGM9c1tuXVthXTt0aGlzLmFwcGx5SGFubldpbmRvdyhvKSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsbyksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKGkpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IobGV0IHM9MDtzPHRoaXMuYmxvY2tTaXplO3MrKyl0W3NdKj10aGlzLmhhbm5XaW5kb3dbc10qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2xldCB0PTAscz0wO2Zvcig7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7Y29uc3QgZT10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3NdLGk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltzKzFdO3RoaXMubWFnbml0dWRlc1t0XT1lKioyK2kqKjIsdCs9MSxzKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDtsZXQgdD0yO2NvbnN0IHM9dGhpcy5tYWduaXR1ZGVzLmxlbmd0aC0yO2Zvcig7dDxzOyl7Y29uc3QgZT10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1lKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1lKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2ZvcihsZXQgcz0wO3M8dGhpcy5uYlBlYWtzO3MrKyl7Y29uc3QgZT10aGlzLnBlYWtJbmRleGVzW3NdLGk9c3QoZSp0KTtpZihpPnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IG49MCxhPXRoaXMuZmZ0U2l6ZTtzPjAmJihuPWUtc3QoKGUtdGhpcy5wZWFrSW5kZXhlc1tzLTFdKS8yKSksczx0aGlzLm5iUGVha3MtMSYmKGE9ZSthZSgodGhpcy5wZWFrSW5kZXhlc1tzKzFdLWUpLzIpKTtjb25zdCBvPW4tZSxjPWEtZSxoPXoqdGhpcy5pbnZmZnRTaXplKihpLWUpLGY9TWF0aC5jb3MoaCp0aGlzLnRpbWVDdXJzb3IpLHU9TWF0aC5zaW4oaCp0aGlzLnRpbWVDdXJzb3IpO2ZvcihsZXQgZD1vO2Q8YztkKyspe2NvbnN0IGw9ZStkLHA9aStkO2lmKHA+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7Y29uc3QgbT0yKmwsST1tKzEsdz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW21dLHY9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltJXSxNPXcqZi12KnUsUD13KnUrdipmLGc9MipwLFQ9ZysxO3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2ddKz1NLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW1RdKz1QfX19fXJlZ2lzdGVyUHJvY2Vzc29yKCJwaGFzZS12b2NvZGVyLXByb2Nlc3NvciIsSWUpO2NsYXNzIHdlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoaT0tRCx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9RCx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7Y29uc3QgaT1zWzBdO2xldCBuPTEsYTtmb3IobGV0IG89MDtvPChpWzBdLmxlbmd0aD8/MCk7bysrKXtjb25zdCBjPSgxLVMoYihlLnB1bHNld2lkdGgsbyksLS45OSwuOTkpKSpELGg9YihlLmRldHVuZSxvKSxmPWV0KGIoZS5mcmVxdWVuY3ksbyksaC8xMDApO2E9Zip6KkcsdGhpcy5kcGhpZis9LjEqKGEtdGhpcy5kcGhpZiksbio9Ljk5OTgsdGhpcy5lbnZmKz0uMSoobi10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpmKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49RCYmKHRoaXMucGhpLT16KTtsZXQgdT1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMCk7dGhpcy5ZMD0uNSoodSt0aGlzLlkwKTtsZXQgZD1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMStjKTt0aGlzLlkxPS41KihkK3RoaXMuWTEpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bb109LjE1Kih1LWQpKnRoaXMuZW52Zn1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInB1bHNlLW9zY2lsbGF0b3IiLHdlKTtjb25zdCBUdD17Yml0QzpmdW5jdGlvbihyLHQscyl7cmV0dXJuIHImdD9zOjB9LGJyOmZ1bmN0aW9uKHIsdD04KXtpZih0PjMyKXRocm93IG5ldyBFcnJvcigiYnIoKSBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMzIiKTtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspc3w9VHQuYml0QyhyLDE8PGUsMTw8dC0oZSsxKSk7cmV0dXJuIHN9LHNpbmY6ZnVuY3Rpb24ocil7cmV0dXJuIE1hdGguc2luKHIqRC8xMjgpfSxjb3NmOmZ1bmN0aW9uKHIpe3JldHVybiBNYXRoLmNvcyhyKkQvMTI4KX0sdGFuZjpmdW5jdGlvbihyKXtyZXR1cm4gTWF0aC50YW4ocipELzEyOCl9LHJlZ0c6ZnVuY3Rpb24ocix0KXtyZXR1cm4gdC50ZXN0KHIudG9TdHJpbmcoMikpfX07bGV0IGx0LEJ0O2Z1bmN0aW9uIFNlKHIpe2lmKGx0PT1udWxsKXtsdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXRoKSxCdD1sdC5tYXAoZT0+TWF0aFtlXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhUdCkscz10Lm1hcChlPT5UdFtlXSk7bHQucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxCdC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5zKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLmx0LCJ0IixgcmV0dXJuIDAsCiR7cnx8MH07YCkuYmluZChnbG9iYWxUaGlzLC4uLkJ0KX1jbGFzcyBfZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5wb3J0Lm9ubWVzc2FnZT10PT57bGV0e2NvZGVUZXh0OnN9PXQuZGF0YTtjb25zdHtieXRlQmVhdFN0YXJ0VGltZTplfT10LmRhdGE7ZSE9bnVsbCYmKHRoaXMudD0wLHRoaXMuaW5pdGlhbE9mZnNldD1NYXRoLmZsb29yKGUpKSxzPXMudHJpbSgpLnJlcGxhY2UoL15ldmFsXCh1bmVzY2FwZVwoZXNjYXBlKD86YHxcKCd8XCgifFwoYCkoLio/KSg/OmB8J1wpfCJcKXxgXCkpLnJlcGxhY2VcKFwvdVwoXC5cLlwpXC9nLFsiJ2BdXCQxJVsiJ2BdXClcKVwpJC8sKGksbik9PnVuZXNjYXBlKGVzY2FwZShuKS5yZXBsYWNlKC91KC4uKS9nLCIkMSUiKSkpLHRoaXMuZnVuYz1TZShzKX0sdGhpcy5pbml0aWFsT2Zmc2V0PTAsdGhpcy50PW51bGwsdGhpcy5mdW5jPW51bGx9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7dGhpcy50PT1udWxsJiYodGhpcy50PWUuYmVnaW5bMF0qc2FtcGxlUmF0ZSk7Y29uc3QgaT1zWzBdLG49MjU2Kkc7Zm9yKGxldCBhPTA7YTxpWzBdLmxlbmd0aDthKyspe2NvbnN0IG89YihlLmRldHVuZSxhKSxjPWV0KGIoZS5mcmVxdWVuY3ksYSksby8xMDApLGg9bipjKnRoaXMudCt0aGlzLmluaXRpYWxPZmZzZXQsdT0odGhpcy5mdW5jKGgpJjI1NSkvMTI3LjUtMSxkPVModSouMiwtLjQsLjQpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bYV09ZDt0aGlzLnQrK31yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImJ5dGUtYmVhdC1wcm9jZXNzb3IiLF9lKTtjbGFzcyBNZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiYXR0YWNrIixkZWZhdWx0VmFsdWU6LjAwNSxtaW5WYWx1ZTowfSx7bmFtZToiZGVjYXkiLGRlZmF1bHRWYWx1ZTouMTQsbWluVmFsdWU6MH0se25hbWU6InN1c3RhaW4iLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOjAsbWF4VmFsdWU6MX0se25hbWU6InJlbGVhc2UiLGRlZmF1bHRWYWx1ZTouMSxtaW5WYWx1ZTowfSx7bmFtZToiYXR0YWNrQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJkZWNheUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6LTFlOX0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjFlOX0se25hbWU6InJldHJpZ2dlciIsZGVmYXVsdFZhbHVlOjEsbWluVmFsdWU6MCxtYXhWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudmFsPTAsdGhpcy5zZWdJZHg9MCx0aGlzLnN0YXRlPTAsdGhpcy5iZWdpblRpbWU9MCx0aGlzLmVuZFRpbWU9MCx0aGlzLmF0dGFja1N0YXJ0PTB9X3dhcnAodCxzLGU9OCl7aWYodD09PTB8fHQ9PT0xKXJldHVybiB0O2lmKHM+MCl7Y29uc3QgaT0xK2UqcztyZXR1cm4gMS1NYXRoLnBvdygxLXQsaSl9ZWxzZXtjb25zdCBpPTEtZSpzO3JldHVybiBNYXRoLnBvdyh0LGkpfX1fYWR2YW5jZSh0LHMsZSxpKXtpZihlPT09MHx8dD09PXMpdGhpcy52YWw9cztlbHNle2NvbnN0IG49TWF0aC5taW4oMSwoY3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWUpL2UpLGE9dGhpcy5fd2FycChuLGkpO3RoaXMudmFsPXQrKHMtdCkqYX19cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdWzBdLG89YihlLnJldHJpZ2dlciwwKT49LjU7aSE9PXRoaXMuYmVnaW5UaW1lJiYodGhpcy5zdGF0ZT09PTB8fG8pJiYodGhpcy5iZWdpblRpbWU9aSx0aGlzLnN0YXRlPTEsdGhpcy5lbmRUaW1lPWIoZS5lbmQsMCksdGhpcy5hdHRhY2tTdGFydD10aGlzLnZhbCk7Y29uc3QgYz10aGlzLmVuZFRpbWUtdGhpcy5iZWdpblRpbWU7Zm9yKGxldCBoPTA7aDxhLmxlbmd0aDtoKyspe2NvbnN0IGY9YihlLmF0dGFjayxoKSx1PWIoZS5kZWNheSxoKSxkPWIoZS5zdXN0YWluLGgpLGw9YihlLnJlbGVhc2UsaCkscD1iKGUuYXR0YWNrQ3VydmUsaCksbT1iKGUuZGVjYXlDdXJ2ZSxoKSxJPWIoZS5yZWxlYXNlQ3VydmUsaCksdz1iKGUuZGVwdGgsaCksdj1iKGUubWluLGgpLE09YihlLm1heCxoKSxQPVt7dGltZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksc3RhcnQ6MCx0YXJnZXQ6MH0se3RpbWU6ZixzdGFydDp0aGlzLmF0dGFja1N0YXJ0LHRhcmdldDoxLGN1cnZlOnB9LHt0aW1lOmYrdSxzdGFydDoxLHRhcmdldDpkLGN1cnZlOm19LHt0aW1lOmMsc3RhcnQ6ZCx0YXJnZXQ6ZH0se3RpbWU6YytsLHN0YXJ0OmQsdGFyZ2V0OjAsY3VydmU6SX1dO2xldHt0aW1lOmcsc3RhcnQ6VCx0YXJnZXQ6QSxjdXJ2ZTpWfT1QW3RoaXMuc3RhdGVdO2Zvcih0aGlzLl9hZHZhbmNlKFQsQSxnLFYpO2N1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lPj1nOyl0aGlzLnN0YXRlPSh0aGlzLnN0YXRlKzEpJVAubGVuZ3RoLGc9UFt0aGlzLnN0YXRlXS50aW1lO2FbaF09Uyh0aGlzLnZhbCp3LHYsTSl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJlbnZlbG9wZS1wcm9jZXNzb3IiLE1lKTtjb25zdCB4PU9iamVjdC5mcmVlemUoe05PTkU6MCxBU1lNOjEsTUlSUk9SOjIsQkVORFA6MyxCRU5ETTo0LEJFTkRNUDo1LFNZTkM6NixRVUFOVDo3LEZPTEQ6OCxQV006OSxPUkJJVDoxMCxTUElOOjExLENIQU9TOjEyLFBSSU1FUzoxMyxCSU5BUlk6MTQsQlJPV05JQU46MTUsUkVDSVBST0NBTDoxNixXT1JNSE9MRToxNyxMT0dJU1RJQzoxOCxTSUdNT0lEOjE5LEZSQUNUQUw6MjAsRkxJUDoyMX0pO2Z1bmN0aW9uIHhlKHIpe3JldHVybiByPXIrMjEyNzkxMjIxNCsocjw8MTIpLHI9cl4zMzQ1MDcyNzAwXnI+Pj4xOSxyPXIrMzc0NzYxMzkzKyhyPDw1KSxyPXIrMzU1MDYzNTExNl5yPDw5LHI9cis0MjUxOTkzNzk3KyhyPDwzKSxyPXJeMzA0MjU5NDU2OV5yPj4+MTYscj4+PjB9Y29uc3QgS3Q9cj0+KHhlKHIpPj4+OCkvMTY3NzcyMTY7ZnVuY3Rpb24geWUocix0KXtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspcz1zPDwxfHImMSxyPj4+PTE7cmV0dXJuIHN9ZnVuY3Rpb24gUGUocil7Y29uc3QgdD1NYXRoLmZsb29yKHIpLHM9ci10LGU9S3QodCksaT1LdCh0KzEpO3JldHVybiBlKyhpLWUpKnN9ZnVuY3Rpb24gVGUocix0PTQpe2xldCBzPS41LGU9MCxpPTAsbj0xO2ZvcihsZXQgYT0wO2E8dDthKyspZSs9cypQZShyKm4pLGkrPXMscyo9LjUsbio9MjtyZXR1cm4gZS9pKjItMX1jb25zdCBWdD17fTtjbGFzcyBCZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOi0xLG1pbjotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6LTEsbWluOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMTgsbWluOjB9LHtuYW1lOiJwb3NpdGlvbiIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX0se25hbWU6IndhcnBNb2RlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjEsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNyxtaW46MCxtYXg6MX0se25hbWU6InBoYXNlcmFuZCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9XX1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLnBvcnQub25tZXNzYWdlPXM9Pntjb25zdHt0eXBlOmUscGF5bG9hZDppfT1zLmRhdGF8fHt9O2U9PT0iaW5pdGlhbGl6ZSImJnRoaXMuaW5pdGlhbGl6ZShpKX0sdGhpcy5pbml0aWFsaXplKCl9aW5pdGlhbGl6ZSh0KXtpZih0aGlzLnRhYmxlPW51bGwsdGhpcy5mcmFtZUxlbj1udWxsLHRoaXMubnVtRnJhbWVzPW51bGwsdGhpcy5waGFzZT1bXSx0IT1udWxsJiZ0LmtleSl7Y29uc3Qgcz10LmtleTt0aGlzLmZyYW1lTGVuPXQuZnJhbWVMZW4sVnRbc118fChWdFtzXT10LmZyYW1lcyksdGhpcy50YWJsZT1WdFtzXSx0aGlzLm51bUZyYW1lcz10aGlzLnRhYmxlLmxlbmd0aH19X21pcnJvcih0KXtyZXR1cm4gMS1NYXRoLmFicygyKnQtMSl9X3RvQml0cyh0LHM9MixlPTEyKXtjb25zdCBpPWUrKHMtZSkqdDtyZXR1cm57YjppLG46c3QoTWF0aC5wb3coMixpKSl9fV93YXJwUGhhc2UodCxzLGUpe3N3aXRjaChlKXtjYXNlIHguTk9ORTpyZXR1cm4gdDtjYXNlIHguQVNZTTp7Y29uc3QgaT0uMDErLjk5KnM7cmV0dXJuIHQ8aT8uNSp0L2k6LjUrLjUqKHQtaSkvKDEtaSl9Y2FzZSB4Lk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LHMseC5BU1lNKSk7Y2FzZSB4LkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMypzKTtjYXNlIHguQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKnMpKTtjYXNlIHguQkVORE1QOnJldHVybiBzPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMipzLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqcy0xLDIpO2Nhc2UgeC5TWU5DOntjb25zdCBpPU1hdGgucG93KDE2LHMqKjIpO3JldHVybiB0KmklMX1jYXNlIHguUVVBTlQ6e2NvbnN0e246aX09dGhpcy5fdG9CaXRzKHMpO3JldHVybiB0dCh0KmkpL2l9Y2FzZSB4LkZPTEQ6e2NvbnN0IG49MStNYXRoLm1heCgxLHN0KDcqcykpO3JldHVybiBNYXRoLmFicyhIdChuKnQpLS41KSoyfWNhc2UgeC5QV006e2NvbnN0IGk9UyguNSsuNDkqKDIqcy0xKSwwLDEpO3JldHVybiB0PGk/dC9pKi41Oi41Kyh0LWkpLygxLWkpKi41fWNhc2UgeC5PUkJJVDp7Y29uc3QgaT0uNSpzO3JldHVybiBRKHQraSpNYXRoLnNpbih6KjMqdCkpfWNhc2UgeC5TUElOOntjb25zdCBpPS41KnMse259PXRoaXMuX3RvQml0cyhzLDEsNik7cmV0dXJuIFEodCtpKk1hdGguc2luKHoqbip0KSl9Y2FzZSB4LkNIQU9TOntjb25zdCBuPSgzLjcrLjMqcykqdCooMS10KTtyZXR1cm4gUygoMS1zKSp0K3MqbiwwLDEpfWNhc2UgeC5QUklNRVM6e2NvbnN0IGk9YT0+e2lmKGE8MilyZXR1cm4hMTtpZihhJTI9PT0wKXJldHVybiBhPT09Mjtmb3IobGV0IG89MztvKioyPD1hO28rPTIpaWYoYSVvPT09MClyZXR1cm4hMTtyZXR1cm4hMH07bGV0e259PXRoaXMuX3RvQml0cyhzLDMpO2Zvcig7IWkobik7KW4rKztyZXR1cm4gdHQodCpuKS9ufWNhc2UgeC5CSU5BUlk6e2xldHtiOml9PXRoaXMuX3RvQml0cyhzLDMpO2k9c3QoaSk7Y29uc3Qgbj0xPDxpLGE9dHQodCpuKTtyZXR1cm4geWUoYSxpKS9ufWNhc2UgeC5CUk9XTklBTjp7Y29uc3QgaT0uMjUqcypUZSg2NCp0LDQpO3JldHVybiBRKHQraSl9Y2FzZSB4LlJFQ0lQUk9DQUw6e2NvbnN0IGk9Mis0KnMsbj10KmksYT10KygxLXQpKmksbz1hPjFlLTEyP24vYTowO3JldHVybiBTKG8sMCwxKX1jYXNlIHguV09STUhPTEU6e2NvbnN0IGk9UyguOCpzLDAsMSksbj0uNSooMS1pKSxhPS41KigxK2kpO3JldHVybiB0PG4/dC9uKi41OnQ+YT8uNSooMSsodC1hKS8oMS1hKSk6LjV9Y2FzZSB4LkxPR0lTVElDOntsZXQgaT10O2NvbnN0IG49My42Ky40KnMsYT0xK3N0KDIqcyk7Zm9yKGxldCBvPTA7bzxhO28rKylpPW4qaSooMS1pKTtyZXR1cm4gUyhpLDAsMSl9Y2FzZSB4LlNJR01PSUQ6e2NvbnN0IGk9MSsxMCpzLG49dC0uNSxhPTEvKDErTWF0aC5leHAoLWkqbikpLG89MS8oMStNYXRoLmV4cCguNSppKSksYz0xLygxK01hdGguZXhwKC0uNSppKSk7cmV0dXJuKGEtbykvKGMtbyl9Y2FzZSB4LkZSQUNUQUw6e2NvbnN0IGk9LjUqTWF0aC5zaW4oeip0KSpzO3JldHVybiBRKHQraSl9Y2FzZSB4LkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQscyl7Y29uc3QgZT10Lmxlbmd0aCxpPXMqZTtsZXQgbj1pfDA7bj49ZSYmKG49MCk7Y29uc3QgYT1pLW4sbz10W25dO2xldCBjPW4rMTtjPj1lJiYoYz0wKTtjb25zdCBoPXRbY107cmV0dXJuIG8rKGgtbykqYX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdWzBdLGQ9c1swXVsxXXx8c1swXVswXTtpZighdGhpcy50YWJsZSlyZXR1cm4gdS5maWxsKDApLGQhPT11JiZkLnNldCh1KSwhMDtjb25zdCBsPWUudm9pY2VzWzBdO2ZvcihsZXQgcD0wO3A8dS5sZW5ndGg7cCsrKXtjb25zdCBtPWIoZS5kZXR1bmUscCksST1iKGUuZnJlcXNwcmVhZCxwKSx2PVMoYihlLnBvc2l0aW9uLHApLDAsMSkqKHRoaXMubnVtRnJhbWVzLTEpLE09dnwwLFA9di1NLGc9UyhiKGUud2FycCxwKSwwLDEpLFQ9YihlLndhcnBNb2RlLHApLEE9UyhiKGUucGhhc2VyYW5kLHApLDAsMSksVj1sPjE/UyhiKGUucGFuc3ByZWFkLHApLDAsMSk6MCxPPU1hdGguc3FydCguNS0uNSpWKSxOPU1hdGguc3FydCguNSsuNSpWKTtsZXQgQz1iKGUuZnJlcXVlbmN5LHApO0M9ZXQoQyxtLzEwMCk7Y29uc3QgRj0xL01hdGguc3FydChsKSxxPVV0KGwsSSk7Zm9yKGxldCBCPTA7QjxsO0IrKyl7Y29uc3QgTD0oQiYxKT09MTtsZXQgRT1PLEg9TjtMJiYoRT1OLEg9Tyk7Y29uc3QgJD1ldChDLHEoQikpKkc7dGhpcy5waGFzZVtCXT10aGlzLnBoYXNlW0JdPz9NYXRoLnJhbmRvbSgpKkE7Y29uc3QgVT10aGlzLl93YXJwUGhhc2UodGhpcy5waGFzZVtCXSxnLFQpLEs9dGhpcy5fc2FtcGxlRnJhbWUodGhpcy50YWJsZVtNXSxVKSxaPXRoaXMuX3NhbXBsZUZyYW1lKHRoaXMudGFibGVbTWF0aC5taW4odGhpcy5udW1GcmFtZXMtMSxNKzEpXSxVKTtsZXQgaz11dChLLFosUCk7VD09PXguRkxJUCYmdGhpcy5waGFzZVtCXTxnJiYoaz0tayksdVtwXSs9aypFKkYsZFtwXSs9aypIKkYsdGhpcy5waGFzZVtCXT1RKHRoaXMucGhhc2VbQl0rJCl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixCZSk7Y2xhc3MgVmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVybltdfWNvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5nYWluQ29lZmY9eHQoLjIpLHRoaXMuYXZnR2Fpbj0xO2xldHthdHRhY2tUaW1lOnM9LjAwMyxzdXN0YWluVGltZTplPS4wOCxhdHRhY2s6aT0wLHN1c3RhaW46bj0wLHNlbnNpdGl2aXR5OmE9LjEsbWl4Om89MSxiZWdpbjpjPTAsZW5kOmg9MH09dC5wcm9jZXNzb3JPcHRpb25zO3M9UyhzLDVlLTQsLjA1KSxlPVMoZSwuMDEsLjUpLHRoaXMuYXR0YWNrQ29lZmY9eHQocyksdGhpcy5zdXN0YWluQ29lZmY9eHQoZSksdGhpcy5hdHRhY2tBbXQ9UyhpLC0xLDEpLHRoaXMuc3VzdGFpbkFtdD1TKG4sLTEsMSksdGhpcy5zY2FsaW5nPS41KzUqUyhhLDAsMSksdGhpcy5taXg9UyhvLDAsMSksdGhpcy5iZWdpbj1jLHRoaXMuZW5kPWgsdGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheSgyKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheSgyKX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdO2lmKGN1cnJlbnRUaW1lPj10aGlzLmVuZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9dGhpcy5iZWdpbilyZXR1cm4hMDtjb25zdCBhPWkubGVuZ3RoO2E+dGhpcy5hdHRhY2tFbnYubGVuZ3RoJiYodGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheShhKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheShhKSk7bGV0IG89dGhpcy5hdmdHYWluO2ZvcihsZXQgYz0wO2M8YTtjKyspe2xldCBoPXRoaXMuYXR0YWNrRW52W2NdLGY9dGhpcy5zdXN0YWluRW52W2NdO2ZvcihsZXQgdT0wO3U8WTt1Kyspe2NvbnN0IGQ9aVtjXVt1XSxsPU1hdGguYWJzKGQpO2g9dXQoaCxsLHRoaXMuYXR0YWNrQ29lZmYpLGY9dXQoZixsLHRoaXMuc3VzdGFpbkNvZWZmKTtjb25zdCBwPVModGhpcy5zY2FsaW5nKihoLWYpLyhmKzFlLTYpLC0xLjUsMS41KSxtPXA+MD9wOjAsST1wPDA/LXA6MCx3PWp0KHRoaXMuYXR0YWNrQW10Km0qMTgpLHY9anQodGhpcy5zdXN0YWluQW10KkkqMzYpLE09Uyh3KnYsMCw4KTtvPXV0KG8sTSx0aGlzLmdhaW5Db2VmZik7Y29uc3QgUD1vPi4wMDE/MS9vOjEsZz1kKk0qUDtsZXQgVD11dChkLGcsdGhpcy5taXgpO1QvPTErTWF0aC5hYnMoVCksbltjXVt1XT1UfXRoaXMuYXR0YWNrRW52W2NdPWgsdGhpcy5zdXN0YWluRW52W2NdPWZ9cmV0dXJuIHRoaXMuYXZnR2Fpbj1vLCEwfX1yZWdpc3RlclByb2Nlc3NvcigidHJhbnNpZW50LXByb2Nlc3NvciIsVmUpO2NsYXNzIEFlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBsYXlQb3M9MDtjb25zdCB0PTE2O3RoaXMub3V0cHV0cz1uZXcgQXJyYXkodCkuZmlsbCgwKSx0aGlzLnNvdXJjZXM9bmV3IEFycmF5KHQpLmZpbGwoMCksdGhpcy5nYXRlRW5kZWQ9ITEsdGhpcy5zdGFydGVkPSExLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3ZhciBoLGY7bGV0e3NyYzplLHNjaGVtYTp7dWdlbnM6aSxyZWdpc3RlcnM6bn0sc3RhcnQ6YSxnYXRlRW5kOm8sZW5kOmN9PXMuZGF0YTt0aGlzLnN0YXJ0PWEsdGhpcy5nYXRlRW5kPW8sdGhpcy5lbmQ9Yyx0aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkobikuZmlsbCgwKSx0aGlzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCiR7ZX1gLHRoaXMubm9kZXM9W107Zm9yKGxldCB1PTA7dTxpLmxlbmd0aDt1Kyspe2NvbnN0IGQ9aVt1XSxsPW5lLmdldChkLnR5cGUpLHA9bmV3IGwodSxkLHNhbXBsZVJhdGUpO3AudHlwZT09PSJjYyImJigoZj0oaD1kLmlucHV0cyk9PW51bGw/dm9pZCAwOmhbMF0pIT1udWxsJiZmLmluY2x1ZGVzKCJzdHJ1ZGVsLWdhdGUiKSkmJihwLnNldFZhbHVlKDEpLHRoaXMuZ2F0ZU5vZGU9cCksdGhpcy5ub2Rlc1t1XT1wfXRoaXMuZ2VuU2FtcGxlPW5ldyBGdW5jdGlvbigidGltZSIsIm5vZGVzIiwiaW5wdXQiLCJyIiwibyIsInMiLHRoaXMuc3JjKX19cHJvY2Vzcyh0LHMpe3ZhciBvLGM7Y29uc3QgZT0obz10WzBdKT09bnVsbD92b2lkIDA6b1swXTtpZihjdXJyZW50VGltZT49dGhpcy5lbmQpcmV0dXJuITE7aWYodGhpcy5nZW5TYW1wbGU9PT12b2lkIDB8fGN1cnJlbnRUaW1lPHRoaXMuc3RhcnQpcmV0dXJuITA7dGhpcy5zdGFydGVkPSEwLCF0aGlzLmdhdGVFbmRlZCYmY3VycmVudFRpbWU+dGhpcy5nYXRlRW5kJiYoKGM9dGhpcy5nYXRlTm9kZSk9PW51bGx8fGMuc2V0VmFsdWUoMCksdGhpcy5nYXRlRW5kZWQ9ITApO2NvbnN0IGk9c1swXSxuPWlbMF0sYT1pWzFdO2ZvcihsZXQgaD0wO2g8WTtoKyspe3RoaXMuZ2VuU2FtcGxlKHRoaXMucGxheVBvcyx0aGlzLm5vZGVzLGU/ZVtoXTowLHRoaXMucmVnaXN0ZXJzLHRoaXMub3V0cHV0cyx0aGlzLnNvdXJjZXMpO2NvbnN0IGY9dGhpcy5vdXRwdXRzWzBdLHU9dGhpcy5vdXRwdXRzWzFdO2E/KG5baF09ZixhW2hdPXUpOm5baF09LjUqKGYrdSksdGhpcy5wbGF5UG9zKz0xL3NhbXBsZVJhdGV9cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3NvcigiZ2VuZXJpYy1wcm9jZXNzb3IiLEFlKSxSLldhcnBNb2RlPXgsT2JqZWN0LmRlZmluZVByb3BlcnR5KFIsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLFJ9KHt9KTsK";let tn=[],Hn=0;const Ur=4;let PA=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(s){return n.lc=t.push(s),()=>{for(let i=Hn+Ur;i<tn.length;)tn[i]===s?tn.splice(i,Ur):i+=Ur;let r=t.indexOf(s);~r&&(t.splice(r,1),--n.lc||n.off())}},notify(s,r){let i=!tn.length;for(let a of t)tn.push(a,n.value,s,r);if(i){for(Hn=0;Hn<tn.length;Hn+=Ur)tn[Hn](tn[Hn+1],tn[Hn+2],tn[Hn+3]);tn.length=0}},off(){},set(s){let r=n.value;r!==s&&(n.value=s,n.notify(r))},subscribe(s){let r=n.listen(s);return s(n.value),r},value:e};return n},vA=(e={})=>{let t=PA(e);return t.setKey=function(n,s){let r=t.value;typeof s>"u"&&n in t.value?(t.value={...t.value},delete t.value[n],t.notify(r,n)):t.value[n]!==s&&(t.value={...t.value,[n]:s},t.notify(r,n))},t};const XA={stretch:{node:"stretch",param:"pitchFactor"},gain:{node:"gain",param:"gain"},postgain:{node:"post",param:"gain"},pan:{node:"pan",param:"pan"},tremolo:{node:"tremolo",param:"frequency"},tremolosync:{node:"tremolo",param:"frequency"},tremolodepth:{node:"tremolo_gain",param:"gain"},tremoloskew:{node:"tremolo",param:"skew"},tremolophase:{node:"tremolo",param:"phase"},tremoloshape:{node:"tremolo",param:"shape"},lfo:{node:"lfo",param:"frequency"},lfo_rate:{node:"lfo",param:"frequency"},lfo_sync:{node:"lfo",param:"frequency"},lfo_depth:{node:"lfo",param:"depth"},lfo_depthabs:{node:"lfo",param:"depth"},lfo_skew:{node:"lfo",param:"skew"},lfo_curve:{node:"lfo",param:"curve"},lfo_dcoffset:{node:"lfo",param:"dcoffset"},env:{node:"env",param:"depth"},env_attack:{node:"env",param:"attack"},env_decay:{node:"env",param:"decay"},env_sustain:{node:"env",param:"sustain"},env_release:{node:"env",param:"release"},bmod:{node:"bmod",param:"depth"},bmod_depth:{node:"bmod",param:"depth"},bmod_depthabs:{node:"bmod",param:"depth"},cutoff:{node:"lpf",param:"frequency"},resonance:{node:"lpf",param:"Q"},lprate:{node:"lpf_lfo",param:"rate"},lpsync:{node:"lpf_lfo",param:"sync"},lpdepth:{node:"lpf_lfo",param:"depth"},lpdepthfrequency:{node:"lpf_lfo",param:"depth"},lpshape:{node:"lpf_lfo",param:"shape"},lpdc:{node:"lpf_lfo",param:"dcoffset"},lpskew:{node:"lpf_lfo",param:"skew"},hcutoff:{node:"hpf",param:"frequency"},hresonance:{node:"hpf",param:"Q"},hprate:{node:"hpf_lfo",param:"rate"},hpsync:{node:"hpf_lfo",param:"sync"},hpdepth:{node:"hpf_lfo",param:"depth"},hpdepthfrequency:{node:"hpf_lfo",param:"depth"},hpshape:{node:"hpf_lfo",param:"shape"},hpdc:{node:"hpf_lfo",param:"dcoffset"},hpskew:{node:"hpf_lfo",param:"skew"},bandf:{node:"bpf",param:"frequency"},bandq:{node:"bpf",param:"Q"},bprate:{node:"bpf_lfo",param:"rate"},bpsync:{node:"bpf_lfo",param:"sync"},bpdepth:{node:"bpf_lfo",param:"depth"},bpdepthfrequency:{node:"bpf_lfo",param:"depth"},bpshape:{node:"bpf_lfo",param:"shape"},bpdc:{node:"bpf_lfo",param:"dcoffset"},bpskew:{node:"bpf_lfo",param:"skew"},vowel:{node:"vowel",param:"frequency"},coarse:{node:"coarse",param:"coarse"},crush:{node:"crush",param:"crush"},shape:{node:"shape",param:"shape"},shapevol:{node:"shape",param:"postgain"},distort:{node:"distort",param:"distort"},distortvol:{node:"distort",param:"postgain"},distorttype:{node:"distort",param:"distort"},compressor:{node:"compressor",param:"threshold"},compressorRatio:{node:"compressor",param:"ratio"},compressorKnee:{node:"compressor",param:"knee"},compressorAttack:{node:"compressor",param:"attack"},compressorRelease:{node:"compressor",param:"release"},phaserrate:{node:"phaser_lfo",param:"frequency"},phasersweep:{node:"phaser_lfo",param:"depth"},phasercenter:{node:"phaser",param:"frequency"},phaserdepth:{node:"phaser",param:"Q"},delay:{node:"delay_mix",param:"gain"},delaytime:{node:"delay",param:"delayTime"},delayfeedback:{node:"delay",param:"feedback"},delaysync:{node:"delay",param:"delayTime"},dry:{node:"dry",param:"gain"},room:{node:"room_mix",param:"gain"},djf:{node:"djf",param:"value"},busgain:{node:"bus",param:"gain"},s:{node:"source",param:"frequency"},detune:{node:"source",param:"freqspread"},wt:{node:"source",param:"position"},warp:{node:"source",param:"warp"},freq:{node:"source",param:"frequency"},note:{node:"source",param:"frequency"},wtdc:{node:"wt_lfo",param:"dc"},wtskew:{node:"wt_lfo",param:"skew"},wtrate:{node:"wt_lfo",param:"frequency"},wtsync:{node:"wt_lfo",param:"frequency"},wtdepth:{node:"wt_lfo",param:"depth"},warpdc:{node:"warp_lfo",param:"dc"},warpskew:{node:"warp_lfo",param:"skew"},warprate:{node:"warp_lfo",param:"frequency"},warpsync:{node:"warp_lfo",param:"frequency"},warpdepth:{node:"warp_lfo",param:"depth"},fmi:{node:"fm_1_gain",param:"gain"},fmi2:{node:"fm_2_gain",param:"gain"},fmi3:{node:"fm_3_gain",param:"gain"},fmi4:{node:"fm_4_gain",param:"gain"},fmi5:{node:"fm_5_gain",param:"gain"},fmi6:{node:"fm_6_gain",param:"gain"},fmi7:{node:"fm_7_gain",param:"gain"},fmi8:{node:"fm_8_gain",param:"gain"},fmh:{node:"fm_1",param:"frequency"},fmh2:{node:"fm_2",param:"frequency"},fmh3:{node:"fm_3",param:"frequency"},fmh4:{node:"fm_4",param:"frequency"},fmh5:{node:"fm_5",param:"frequency"},fmh6:{node:"fm_6",param:"frequency"},fmh7:{node:"fm_7",param:"frequency"},fmh8:{node:"fm_8",param:"frequency"},pw:{node:"source",param:"pulsewidth"},pwrate:{node:"pw_lfo",param:"frequency"},pwsweep:{node:"pw_lfo",param:"depth"},vib:{node:"vib",param:"frequency"},vibmod:{node:"vib_gain",param:"gain"},byteBeatStartTime:{node:"source",param:"byteBeatStartTime"},spread:{node:"source",param:"panspread"},transient:{node:"transient",param:"attack"}};function wA(){return XA}const ZA=(e,t)=>{if(e?.parameters){const s=e.parameters.get(t);if(s instanceof AudioParam)return s}let n=e?.[t];if(n===void 0&&t==="frequency"&&(n=e?.detune??e?.playbackRate),n instanceof AudioParam)return n},Mc=wA(),FA=(e,t)=>{const n=e.split("_")[0];return Mc[`${n}_${t}`]??Mc[n]},qo=(e,t)=>e==="frequency"&&t>=30?{min:20-t,max:24e3-t}:{min:void 0,max:void 0},AA=(e,t,n)=>{const s=Ge(),r=new Float32Array(256);for(let o=0;o<r.length;o++){const u=o/(r.length-1)*2-1;r[o]=bn(u*n,t,n)}const i=new WaveShaperNode(s,{curve:r}),a=_e(1/n);return e.connect(a).connect(i),{modulator:e,toCleanup:[i,a]}},$o=(e,t,n)=>{const s=FA(e,n);if(!s)return Cr(new Error(`Could not find control data for target '${e}'. It may not be modulatable.`),"superdough"),{targetParams:[],paramName:e};const r=s.param,i=t[s.node]?s.node:e,a=t[i];if(!a){const u=Object.keys(t);return Cr(new Error(`Could not connect to target '${i}' — it does not exist. Available targets: ${u.join(", ")}`),"superdough"),{targetParams:[],paramName:r}}const o=[];return a.forEach(u=>{const c=ZA(u,r);o.push(c)}),{targetParams:o,paramName:r}},TM=(e,t,n)=>{const{rate:s=1,sync:r,cps:i,cycle:a,control:o="lfo",subControl:u,fxi:c="main",depth:h=1,depthabs:d,...m}=t,{targetParams:g,paramName:y}=$o(o,n[c],u);if(!g.length)return;let G=g[0].value;G=G===0?1:G;const{min:X,max:D}=qo(y,G),L=d??h*G,B={...m,frequency:r!==void 0?r*i:s,time:a/i,depth:L,min:X,max:D},A=Is(Ge(),B);return n.main[`lfo_${e}`]=[A],g.forEach(Z=>A.connect(Z)),A},IM=(e,t,n)=>{const{control:s,subControl:r,acurve:i,dcurve:a,rcurve:o,depth:u=1,depthabs:c,fxi:h="main",...d}=t,{targetParams:m,paramName:g}=$o(s,n[h],r);if(!m.length)return;let y=m[0].value;y=y===0?1:y;const{min:G,max:X}=qo(g,y),D=c??u*y,L=LM(Ge(),{...d,depth:D,min:G,max:X,attackCurve:i,decayCurve:a,releaseCurve:o});return n.main[`env_${e}`]=[L],m.forEach(B=>L.connect(B)),L},YM=(e,t,n)=>{const s=Ge(),{control:r,subControl:i,depth:a=1,depthabs:o,fxi:u="main"}=e,{targetParams:c,paramName:h}=$o(r,t[u],i);if(!c.length)return{toCleanup:[]};const d=n.getBus(e.bus),m=new ConstantSourceNode(s,{offset:e.dc??0});m.start(e.begin);const g=m.connect(_e(1));d.connect(g);let y=c[0].value;y=y===0?1:y;const{min:G,max:X}=qo(h,y),D=o??a*y,L=_e(Math.sign(D)*Math.abs(D)/.3),B=g.connect(L),A=[];let Z=B;if(G!==void 0&&X!==void 0){const E=AA(B,G,X);Z=E.modulator,A.push(...E.toCleanup)}return fn(s,()=>{c.forEach(E=>Z.connect(E))},0,e.begin),A.push(m,g,L),{modulator:Z,toCleanup:A}},eu={},la={},DA=e=>eu[e];function SA(e,t){var n=1024;if(e<n)return e+" B";var s=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1;do e/=n,++r;while(e>=n);return e.toFixed(1)+" "+s[r]}function HM(e,t){const{speed:n=1}=e,{transpose:s,url:r,index:i,midi:a,label:o}=DM(e,t);let u=Math.abs(n)*Math.pow(2,s/12);return{transpose:s,url:r,index:i,midi:a,label:o,playbackRate:u}}const KM=async(e,t,n)=>{let{url:s,label:r,playbackRate:i}=HM(e,t);n&&(s=await n(s));const a=Ge(),o=await pi(s,a,r);return e.unit==="c"&&(i=i*o.duration),{buffer:o,playbackRate:i}},_M=async(e,t,n)=>{let{buffer:s,playbackRate:r}=await KM(e,t,n);e.speed<0&&(s=jM(s));const i=Ge().createBufferSource();i.buffer=s,i.playbackRate.value=r;const{loopBegin:a=0,loopEnd:o=1,begin:u=0,end:c=1}=e,h=i.buffer.duration,d=u*h;e.loop&&(i.loop=!0,i.loopStart=a*h,i.loopEnd=o*h);const m=h/i.playbackRate.value,g=(c-u)*m;return{bufferSource:i,offset:d,bufferDuration:h,playbackDuration:m,sliceDuration:g}},pi=(e,t,n,s=0)=>{const r=n?`sound "${n}:${s}"`:"sample";if(e=e.replace("#","%23"),!la[e]){ct(`[sampler] load ${r}..`,"load-sample",{url:e});const i=Date.now();la[e]=fetch(e).then(a=>a.arrayBuffer()).then(async a=>{const o=Date.now()-i,u=SA(a.byteLength);ct(`[sampler] load ${r}... done! loaded ${u} in ${o}ms`,"loaded-sample",{url:e});const c=await t.decodeAudioData(a);return eu[e]=c,c})}return la[e]};function jM(e){const t=Ge(),n=t.createBuffer(e.numberOfChannels,e.length,t.sampleRate);for(let s=0;s<e.numberOfChannels;s++)n.copyToChannel(e.getChannelData(s).slice().reverse(),s,s);return n}const LA=e=>eu[e];function UM(e){if(e.startsWith("bubo:")){const[t,n]=e.split(":");e=`github:Bubobubobubobubo/dough-${n}`}return e}function JM(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let n=e.slice(7);n=n.endsWith("/")?n.slice(0,-1):n;let s=n.split("/"),r=s[0],i=s.length>=2?s[1]:"samples",a=s.length>=3?s[2]:"main",o=s.slice(3);return o.push(t||""),o=o.join("/"),`https://raw.githubusercontent.com/${r}/${i}/${a}/${o}`}const OM=(e,t,n=e._base||"")=>Object.entries(e).forEach(([s,r])=>{if(typeof r=="string"&&(r=[r]),typeof r!="object")throw new Error("wrong sample map format for "+s);n=r._base||n,n=UM(n),n.startsWith("github:")&&(n=JM(n,""));const i=a=>n+a;Array.isArray(r)?r=r.map(i):r=Object.fromEntries(Object.entries(r).map(([a,o])=>[a,(typeof o=="string"?[o]:o).map(i)])),t(s,r)});let QM={};function EA(e,t){QM[e]=t}function RA(e){const t=Object.entries(QM).find(([n])=>e.startsWith(n));if(t)return t[1]}async function kA(e){const t=RA(e);if(t)return t(e);if(e=UM(e),e.startsWith("github:")&&(e=JM(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[r,i]=e.split("shabda:");e=`https://shabda.ndre.gr/${i}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[r,i]=e.split("shabda/speech");i=i.startsWith("/")?i.substring(1):i;let[a,o]=i.split(":"),u="f",c="en-GB";a&&([c,u]=a.split("/")),e=`https://shabda.ndre.gr/speech/${o}.json?gender=${u}&language=${c}&strudel=1'`}if(typeof fetch!="function")return;const n=SM(e);if(typeof fetch>"u")return;const s=await fetch(e).then(r=>r.json()).catch(r=>{throw console.error(r),new Error(`error loading "${e}"`)});return[s,s._base||n]}const qM=async(e,t=e._base||"",n={})=>{if(typeof e=="string"){const[i,a]=await kA(e);return qM(i,t||a,n)}const{prebake:s,tag:r}=n;OM(e,(i,a)=>{e2(i,a,{baseUrl:t,prebake:s,tag:r})},t)},xc=[];async function $M(e,t,n,s,r){let{s:i,nudge:a=0,cut:o,loop:u,clip:c=void 0,n:h=0,speed:d=1,duration:m}=t;if(d===0)return;const g=Ge();let[y,G,X,D]=Nt([t.attack,t.decay,t.sustain,t.release]);const{bufferSource:L,sliceDuration:B,offset:A}=await _M(t,s,r);if(!L){ct(`[sampler] could not load "${i}:${h}"`,"error");return}if(g.currentTime>e){ct(`[sampler] loading sound "${i}:${h}" took too long`,"highlight"),Se(L);return}const Z=zs(L.detune,t,e),E=e+a;L.start(E,A);const S=g.createGain(),V=L.connect(S);c==null&&u==null&&t.release==null&&(m=B);let T=e+m;Wt(V.gain,y,G,X,D,0,1,e,T,"linear"),Vs(L.detune,t,e,T);const K=g.createGain();V.connect(K),Mn(L,function(){Se(L),Z?.stop(),Se(V),Se(K),n()});let J=T+D+.01;L.stop(J);const Y=ee=>{L.stop(ee)},Q={node:K,nodes:{source:[L],...Z?.nodes},stop:Y};if(o!==void 0){const ee=xc[o];ee&&(ee.node.gain.setValueAtTime(1,E),ee.node.gain.linearRampToValueAtTime(0,E+.01)),xc[o]=Q}return Q}function VA(e,t,n){sn(e,(s,r,i)=>$M(s,r,i,t),{type:"sample",samples:t,...n})}function e2(e,t,n){e.startsWith("wt_")?tu(e,t,n):VA(e,t,n)}const Fs=(e,t)=>e!==void 0&&e!==t,Ka=e=>new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"});class zA{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(t){this.audioContext=t,this.output=Ka(t),this.summingNode=Ka(t),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(t,n=0){return this.djfNode==null&&(this.djfNode=Ft(this.audioContext,"djf-processor",{value:t}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(t,n),this.djfNode}getDelay(t=0,n=.5,s){return n=bn(n,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,t,n),this.delayNode.connect(this.summingNode),this.delayNode.start?.(s)),this.delayNode.delayTime.value!==t&&this.delayNode.delayTime.setValueAtTime(t,s),this.delayNode.feedback.value!==n&&this.delayNode.feedback.setValueAtTime(n,s),this.delayNode}getReverb(t,n,s,r,i,a,o){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(t,n,s,r,i,a,o),this.reverbNode.connect(this.summingNode)),(Fs(t,this.reverbNode.duration)||Fs(n,this.reverbNode.fade)||Fs(s,this.reverbNode.lp)||Fs(r,this.reverbNode.dim)||Fs(a,this.reverbNode.irspeed)||Fs(o,this.reverbNode.irbegin)||this.reverbNode.ir!==i)&&this.reverbNode.generate(t,n,s,r,i,a,o),this.reverbNode}sendReverb(t,n){return Pr(t,this.reverbNode,n)}sendDelay(t,n){return Pr(t,this.delayNode,n)}duck(t,n=0,s=.1,r=1){const i=n,a=Math.max(s,.002),o=this.output.gain;fn(this.audioContext,()=>{const u=this.audioContext.currentTime,c=o.value;o.cancelScheduledValues(u),o.setValueAtTime(c,u);const h=Math.max(t,u),d=bn(1-Math.sqrt(r),.01,c);o.exponentialRampToValueAtTime(d,h+i),o.exponentialRampToValueAtTime(1,h+i+a)},0,t-.01)}connectToOutput(t){t.connect(this.summingNode)}}class BA{channelMerger;destinationGain;constructor(t){this.audioContext=t,this.initializeAudio()}initializeAudio(){const t=this.audioContext,n=t.destination.maxChannelCount;this.audioContext.destination.channelCount=n,this.channelMerger=new ChannelMergerNode(t,{numberOfInputs:t.destination.channelCount}),this.destinationGain=new GainNode(t),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(t.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(t,n=[0,1])=>{const s=new StereoPannerNode(this.audioContext);t.connect(s);const r=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:s.channelCount});s.connect(r),n.forEach((i,a)=>{r.connect(this.channelMerger,a%s.channelCount,i%this.audioContext.destination.channelCount)})}}class t2{audioContext;output;nodes={};buses={};constructor(t){this.audioContext=t,this.output=new BA(t)}reset(){Object.values(this.nodes).forEach(t=>{t.disconnect()}),Object.values(this.buses).forEach(t=>{t.disconnect()}),this.nodes={},this.buses={},this.output.reset()}duck(t,n,s=0,r=.1,i=1){const a=[t].flat(),o=[s].flat(),u=[r].flat(),c=[i].flat();a.forEach((h,d)=>{const m=this.nodes[h];if(m==null){Cr(new Error(`duck target orbit ${h} does not exist`),"superdough");return}const g=o[d]??o[0],y=Math.max(u[d]??u[0],.002),G=c[d]??c[0];m.duck(n,g,y,G)})}getOrbit(t,n){return this.nodes[t]==null&&(this.nodes[t]=new zA(this.audioContext),this.output.connectToDestination(this.nodes[t].output,n)),this.nodes[t]}getBus(t){return this.buses[t]==null&&(this.buses[t]=Ka(this.audioContext)),this.buses[t]}}const _a=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),ja=new Set;function n2(){ja.clear()}async function WA(e,t,n=2048){const s=`${e},${n}`;if(!ja.has(s)){const r=(await YA(e,t)).getChannelData(0),i=r.length,a=Math.max(1,Math.floor(i/n)),o=new Array(a);for(let u=0;u<a;u++){const c=u*n;o[u]=r.subarray(c,c+n)}return ja.add(s),{frames:o,frameLen:n,numFrames:a,key:s}}return{frameLen:n,key:s}}function NA(e,t){var n=1024;if(e<n)return e+" B";var s=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1;do e/=n,++r;while(e>=n);return e.toFixed(1)+" "+s[r]}function TA(e){const t=new DataView(e);let n=12;for(;n+8<=t.byteLength;){const s=String.fromCharCode(t.getUint8(n),t.getUint8(n+1),t.getUint8(n+2),t.getUint8(n+3)),r=t.getUint32(n+4,!0);if(s==="fmt ")return t.getUint32(n+12,!0);n+=8+r+(r&1)}return null}async function IA(e){const t=TA(e)||44100;return await new OfflineAudioContext(1,1,t).decodeAudioData(e)}const pa={},YA=(e,t)=>{if(e=e.replace("#","%23"),!pa[e]){ct(`[wavetable] load table ${t}..`,"load-table",{url:e});const n=Date.now();pa[e]=fetch(e).then(s=>s.arrayBuffer()).then(async s=>{const r=Date.now()-n,i=NA(s.byteLength);return ct(`[wavetable] load table ${t}... done! loaded ${i} in ${r}ms`,"loaded-table",{url:e}),await IA(s)})}return pa[e]};function s2(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,s]=e.split("github:");return s=s.endsWith("/")?s.slice(0,-1):s,s.split("/").length===2&&(s+="/main"),`https://raw.githubusercontent.com/${s}/${t}`}const Gc=(e,t,n,s={})=>(t=e._base||t,Object.entries(e).forEach(([r,i])=>{if(r==="_base")return!1;if(typeof i=="string"&&(i=[i]),typeof i!="object")throw new Error("wrong json format for "+r);let a=t;a.startsWith("github:")&&(a=s2(a,"")),i=i.map(o=>a+o).filter(o=>o.toLowerCase().endsWith(".wav")?!0:(ct(`[wavetable] skipping ${o} -- wavetables must be ".wav" format`),!1)),i.length&&tu(r,i,{baseUrl:t,frameLen:n})}));function tu(e,t,n){sn(e,(s,r,i,a)=>r2(s,r,i,t,a,n?.frameLen??2048),{type:"wavetable",tables:t,...n})}const HA=async(e,t,n,s={})=>{if(n!==void 0)return Gc(n,e,t);e.startsWith("github:")&&(e=s2(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432");const r=SM(e);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(e).then(i=>i.json()).then(i=>Gc(i,r,t,s)).catch(i=>{throw console.error(i),new Error(`error loading "${e}"`)})};async function r2(e,t,n,s,r,i){const{s:a,n:o=0,duration:u,clip:c}=t,h=Ge(),[d,m,g,y]=Nt([t.attack,t.decay,t.sustain,t.release]);let{warpmode:G}=t;typeof G=="string"&&(G=_a[G.toUpperCase()]??_a.NONE);const X=jn(t),{url:D,label:L}=DM(t,s),B=await WA(D,L,i);let A=e+u;c!==void 0&&(A=Math.min(e+c*u,A));const Z=A+y,E=Z+.01,S={begin:e,end:E,frequency:X,freqspread:t.detune,position:t.wt,warp:t.warp,warpMode:G,voices:Math.max(t.unison??1,1),panspread:t.spread,phaserand:t.wtphaserand??t.unison>1?1:0},V=Sr("wavetable",()=>new AudioWorkletNode(h,"wavetable-oscillator-processor",{outputChannelCount:[2]}));if(Object.entries(S).forEach(([it,ze])=>{const Ce=V.parameters.get(it),Be=ze!==void 0?ze:Ce.defaultValue;Ce.value=Be}),V.port.postMessage({type:"initialize",payload:B}),h.currentTime>e){ct(`[wavetable] still loading sound "${a}:${o}"`,"highlight");return}const T=[t.wtattack,t.wtdecay,t.wtsustain,t.wtrelease],K=[t.warpattack,t.warpdecay,t.warpsustain,t.warprelease],J=V.parameters,Y=J.get("position"),Q=J.get("warp");let ee=t.wtrate;t.wtsync!=null&&(ee=r*t.wtsync);const ye=Ha(h,Y,e,Z,{offset:t.wt,amount:t.wtenv,defaultAmount:.5,values:T,holdEnd:A,defaultValues:[0,.5,0,.1]},{frequency:ee,depth:t.wtdepth,defaultDepth:.5,shape:t.wtshape,skew:t.wtskew,dcoffset:t.wtdc??0});let re=t.warprate;t.warpsync!=null&&(re=re=r*t.warpsync);const ge=Ha(h,Q,e,Z,{offset:t.warp,amount:t.warpenv,defaultAmount:.5,values:K,holdEnd:A,defaultValues:[0,.5,0,.1]},{frequency:re,depth:t.warpdepth,defaultDepth:.5,shape:t.warpshape,skew:t.warpskew,dcoffset:t.warpdc??0}),pe=zs(V.parameters.get("detune"),t,e),Ke=vr(V.parameters.get("frequency"),t,e),pt=h.createGain(),ut=V.connect(pt);Wt(ut.gain,d,m,g,y,0,.3,e,A,"linear"),Vs(V.parameters.get("detune"),t,e,A);const z={node:ut,nodes:{source:[V],wt_lfo:[ye],warp_lfo:[ge],...Ke?.nodes,...pe?.nodes}},xe=fn(h,()=>{jo(V),pe?.stop(),Ke?.stop(),Se(ye),Se(ge),n()},e,E);return z.stop=it=>{xe.stop(it)},z}const nu=128,Ua="System Standard";let su=nu;function i2(e){su=parseInt(e)??nu}let ru=!1;function a2(e){ru=e==!0}const an=vA();function sn(e,t,n={}){e=e.toLowerCase().replace(/\s+/g,"_"),an.setKey(e,{onTrigger:t,data:n})}let o2=e=>e;function mn(e){return o2(e)}function KA(e){o2=e}function Ja(e){for(const n in e)e[n.toLowerCase()]=e[n];const t=an.get();for(const n in t){const[s,r]=n.split("_");if(!r)continue;const i=e[s];if(i){if(typeof i=="string")t[`${i}_${r}`.toLowerCase()]=t[n];else if(Array.isArray(i))for(const a of i)t[`${a}_${r}`.toLowerCase()]=t[n]}}an.set({...t})}async function _A(e){const t=await(await fetch(e)).json();Ja(t)}async function jA(...e){switch(e.length){case 1:return typeof e[0]=="string"?_A(e[0]):Ja(e[0]);case 2:return Ja({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function UA(e,t){if(as(e)==null){ct("soundAlias: original sound not found");return}an.setKey(t,as(e))}function as(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),an.get().triangle):an.get()[e.toLowerCase()]}const u2=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const t=new Map;return t.set(Ua,""),e.forEach(n=>{t.set(n.label,n.deviceId)}),t};let Lr={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,busgain:1,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8,tremolodepth:1,tremolophase:0,release:.01};const JA=Object.freeze({...Lr});function OA(e,t){Lr[e]=t}function QA(){Lr={...JA}}let iu=new Map(Object.entries(Lr));function au(e,t){iu.set(e,t)}function rt(e){return iu.get(e)}function qA(e){Object.keys(e).forEach(t=>{au(t,e[t])})}function c2(){iu=new Map(Object.entries(Lr))}function $A(e){c2(),e==="1.0"&&au("fanchor",.5)}const eD=()=>an.set({});let l2=[];function p2(e){l2.push(e)}let Jr;function h2(){if(!Jr){const e=Ge(),t=l2.concat([CA]);Jr=Promise.all(t.map(n=>e.audioWorklet.addModule(n))).then(()=>Jr=void 0)}return Jr}async function ou(e={}){const{disableWorklets:t=!1,maxPolyphony:n,audioDeviceName:s=Ua,multiChannelOrbits:r=!1}=e;if(i2(n),a2(r),n2(),typeof window>"u")return;const i=Ge();if(s!=null&&s!=Ua)try{const a=(await u2()).get(s),o=(a??"").length>0;i.sinkId!==a&&o&&await i.setSinkId(a),ct(`[superdough] Audio Device set to ${s}, it might take a few seconds before audio plays on all output channels`)}catch{ct("[superdough] failed to set audio interface","warning")}if(!i instanceof OfflineAudioContext&&await i.resume(),t){ct("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await h2(),ct("[superdough] AudioWorklets loaded")}catch(a){console.warn("could not load AudioWorklet effects",a)}ct("[superdough] ready")}let ha;async function d2(e){return ha||(ha=new Promise(t=>{document.addEventListener("mousedown",async function n(){document.removeEventListener("mousedown",n),await ou(e),t()})})),ha}let us;function Di(){return us==null&&(us=new t2(Ge())),us}function Oa(e){return us=e,us}function m2(e,t){Di().output.connectToDestination(e,t)}function tD(e,t,n=1,s=.5,r=1e3,i=2e3){const a=Ge(),o=Is(a,{frequency:n,depth:i*2,begin:e,end:t}),u=1;let c=282;const h=[];for(let d=0;d<u;d++){const m=Sr("filter",()=>a.createBiquadFilter());m.type="notch",m.gain.value=1,m.frequency.value=r+c,m.Q.value=2-Math.min(Math.max(s*2,0),1.9),o.connect(m.detune),c+=282,h.push(m)}return{filterChain:h,lfo:o}}function nD(e){e=e??0;const t=["12db","ladder","24db"];return typeof e=="number"?t[Math.floor(AM(e,t.length))]:e}let Ct={},cs={};function f2(e,t=1024,n=.5){if(!Ct[e]||Ct[e].context!=Ge()){const s=Ge().createAnalyser();s.fftSize=t,s.smoothingTimeConstant=n,Ct[e]=s,cs[e]=new Float32Array(Ct[e].frequencyBinCount)}return Ct[e].fftSize!==t&&(Ct[e].fftSize=t,cs[e]=new Float32Array(Ct[e].frequencyBinCount)),Ct[e]}function Si(e="time",t=1){const n={time:()=>Ct[t]?.getFloatTimeDomainData(cs[t]),frequency:()=>Ct[t]?.getFloatFrequencyData(cs[t])}[e];if(!n)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),cs[t]}function y2(){us?.reset(),Ct={},cs={}}let sr=new Map;function Cc(e){return(Array.isArray(e)?e:[e]).map(t=>t-1)}class sD{constructor(){this.audioNodes=[],this.tails=[]}connect(...t){return t.forEach(n=>{this.tails.forEach(s=>{s.connect(n)})}),this.tails=t,this.audioNodes.push(...t),this}connectOne(t,n){return this.tails[t].connect(n),this.tails[t]=n,this.audioNodes.push(n),this}releaseNodes(){this.audioNodes.forEach(t=>QF(t)?jo(t):Se(t)),this.audioNodes=[],this.tails=[]}}const Li=async(e,t,n,s=.5,r=.5)=>{const i={main:{}},a=Ge(),o=Di();let{stretch:u}=e;if(u!=null&&(t=t-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=n,t<a.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${t.toFixed(2)}, now: ${a.currentTime.toFixed(2)})`);return}let{s:c=rt("s"),bank:h,source:d,postgain:m=rt("postgain"),duckorbit:g,duckonset:y,duckattack:G,duckdepth:X,djf:D,release:L=rt("release"),dry:B,delay:A=rt("delay"),delayfeedback:Z=rt("delayfeedback"),delaysync:E=rt("delaysync"),delaytime:S,orbit:V=rt("orbit"),bus:T,busgain:K=rt("busgain"),room:J,roomfade:Y,roomlp:Q,roomdim:ee,roomsize:ye,ir:re,irspeed:ge,irbegin:pe,i:Ke=rt("i"),analyze:pt,fft:ut=rt("fft"),FX:z=[],FXrelease:xe}=e;S=S??fc(E,s);const it=Cc(ru&&V>0?[V*2-1,V*2]:rt("channels")),ze=e.channels!=null?Cc(e.channels):it,Ce=o.getOrbit(V,ze);g!=null&&o.duck(g,t,y,G,X),m=mn(m),A=mn(A),K=mn(K);const Be=t+n,De=Math.max(L,xe??0),ke=Be+De,wt=Math.round(Math.random()*1e6);for(let oe=0;oe<=sr.size-su;oe++){const O=sr.entries().next(),$e=O.value[1].deref(),he=O.value[0],Ne=t+.25;$e?.node?.gain?.linearRampToValueAtTime(0,Ne),$e?.stop?.(Ne),sr.delete(he)}if(["-","~","_"].includes(c))return;h&&c&&(c=`${h}_${c}`,e.s=c);const ce=new sD;let We;if(d)We=d(t,e,n,s),i.main.source=[We];else if(as(c)){const{onTrigger:oe}=as(c),O=await oe(t,e,()=>fn(a,()=>{ce.releaseNodes(),sr.delete(wt)},0,ke),s);O&&(We=O.node,sr.set(wt,new WeakRef(O)),i.main={...i.main,...O.nodes})}else throw new Error(`sound ${c} not found! Is it loaded?`);if(!We)return;if(a.currentTime>t){ct("[webaudio] skip hap: still loading",a.currentTime-t);return}ce.connect(We),z=[...z,e];for(let[oe,O]of Object.entries(z)){const $e=oe==z.length-1?"main":oe;i[$e]??={};const he=i[$e];let{gain:Ne=rt("gain"),velocity:bt=rt("velocity"),shapevol:hn=rt("shapevol"),distorttype:Nn=rt("distorttype"),distortvol:dn=rt("distortvol"),tremolodepth:Zt=rt("tremolodepth"),phaserdepth:Zn=rt("phaserdepth"),delay:Ze=rt("delay"),delayfeedback:Ue=rt("delayfeedback"),delaysync:de=rt("delaysync"),delaytime:Oe,i:Qe=rt("i")}=O;if(Ne=mn(Rn(Ne,1)),hn=mn(hn),dn=mn(dn),bt=mn(bt),Zt=mn(Zt),Ne*=bt,Oe=Oe??fc(de,s),O.workletSrc!==void 0){const se=Ft(a,"generic-processor",{},{outputChannelCount:[2]});ce.connect(se);const be=O.workletSrc.replace(/\bpat\[(\d+)\]/g,(dt,Vt)=>O.workletInputs[Vt]).replaceAll("sFreq",jn(e)).replaceAll("sGate",`cc('strudel-gate-${wt}')`),{src:He,ugens:st,registers:we}=compileKabel(be);se.port.postMessage({src:He,schema:{ugens:st,registers:we},start:t,gateEnd:Be,end:ke})}if(O.stretch!==void 0){const se=Ft(a,"phase-vocoder-processor",{pitchFactor:O.stretch});ce.connect(se),he.stretch=[se]}if(O.transient!==void 0){const se=Ft(a,"transient-processor",{},{processorOptions:{attack:O.transient,sustain:O.transsustain,begin:t,end:ke}});ce.connect(se),he.transient=se}const ss=_e(Ne);he.gain=[ss],ce.connect(ss);const rs=nD(e.ftype),ht=se=>RM(a,t,Be,se,s,r);if(O.cutoff!==void 0){const se=ca(O,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});se.type="lowpass";const{filter:be,lfo:He}=ht(se);if(he.lpf=[be],he.lpf_lfo=[He],ce.connect(be),He&&ce.audioNodes.push(He),rs==="24db"){const{filter:st,lfo:we}=ht(se);he.lpf.push(st),he.lpf_lfo.push(we),ce.connect(st),we&&ce.audioNodes.push(we)}}if(O.hcutoff!==void 0){const se=ca(O,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});se.type="highpass";const{filter:be,lfo:He}=ht(se);if(he.hpf=[be],he.hpf_lfo=[He],He&&ce.audioNodes.push(He),ce.connect(be),rs==="24db"){const{filter:st,lfo:we}=ht(se);he.hpf.push(st),he.hpf_lfo.push(we),ce.connect(st),we&&ce.audioNodes.push(we)}}if(O.bandf!==void 0){const se=ca(O,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});se.type="bandpass";const{filter:be,lfo:He}=ht(se);if(he.bpf=[be],he.bpf_lfo=[He],ce.connect(be),He&&ce.audioNodes.push(He),rs==="24db"){const{filter:st,lfo:we}=ht(se);he.bpf.push(st),he.bpf_lfo.push(we),ce.connect(st),we&&ce.audioNodes.push(we)}}if(O.vowel!==void 0){const se=a.createVowelFilter(O.vowel);he.vowel=se.filters,ce.connect(se)}if(O.coarse!==void 0){const se=Ft(a,"coarse-processor",{coarse:O.coarse});he.coarse=[se],ce.connect(se)}if(O.crush!==void 0){const se=Ft(a,"crush-processor",{crush:O.crush});he.crush=[se],ce.connect(se)}if(O.shape!==void 0){const se=Ft(a,"shape-processor",{shape:O.shape,postgain:hn});he.shape=[se],ce.connect(se)}if(O.distort!==void 0){const se=WM(O.distort,dn,Nn);he.distort=[se],ce.connect(se)}let Tn=O.tremolo;if(O.tremolosync!=null&&(Tn=s*O.tremolosync),Tn!==void 0){const se=Math.max(1-Zt,0),be=new GainNode(a,{gain:se}),He=r/s,st=Is(a,{skew:O.tremoloskew??(O.tremoloshape!=null?.5:1),frequency:Tn,depth:Zt,time:He,dcoffset:0,shape:O.tremoloshape,phaseoffset:O.tremolophase,min:0,max:1,curve:1.5,begin:t,end:ke});he.tremolo=[st],he.tremolo_gain=[be],st.connect(be.gain),ce.audioNodes.push(st),ce.connect(be)}if(O.compressor!==void 0){const se=EM(a,O.compressor,O.compressorRatio,O.compressorKnee,O.compressorAttack,O.compressorRelease);he.compressor=[se],ce.connect(se)}if(O.pan!==void 0){const se=a.createStereoPanner();he.pan=[se],se.pan.value=2*O.pan-1,ce.connect(se)}if(O.phaserrate!==void 0&&Zn>0){const{filterChain:se,lfo:be}=tD(t,ke,O.phaserrate,Zn,O.phasercenter,O.phasersweep);he.phaser=[...se],he.phaser_lfo=[be],se.forEach(He=>ce.connect(He)),ce.audioNodes.push(be)}if($e!=="main"&&Ze>0&&Oe>0&&Ue>0){const se=_e(1);Ue=bn(Ue,0,.98);const be=a.createFeedbackDelay(1,Oe,Ue),He=_e(Ze),st=_e(O.dry??1),we=new GainNode(a,{gain:1,channelCount:2,channelCountMode:"explicit"});ce.connect(se).connect(st,be).connectOne(1,He).connect(we),ce.audioNodes.push(be.feedbackGain,be.delayGain),he.delay=[be],he.delay_mix=[He]}if($e!=="main"&&O.room>0){let se;if(O.ir!==void 0){let Vt,zt=as(O.ir);Array.isArray(zt)?Vt=zt.data.samples[O.i%zt.data.samples.length]:typeof zt=="object"&&(Vt=Object.values(zt.data.samples).flat()[Qe%Object.values(zt.data.samples).length]),se=await pi(Vt,a,O.ir,0)}const be=_e(1),He=a.createReverb(O.roomsize,O.roomfade,O.roomlp,O.roomdim,se,O.irspeed,O.irbegin),st=_e(O.room),we=_e(O.dry??1),dt=new GainNode(a,{gain:1,channelCount:2,channelCountMode:"explicit"});ce.connect(be).connect(we,He).connectOne(1,st).connect(dt),he.room=[He],he.room_mix=[st]}}if(xe!==void 0&&xe>L){const oe=_e(1);oe.gain.setValueAtTime(1,Be+L),oe.gain.linearRampToValueAtTime(0,ke),ce.connect(oe)}const Gt=new GainNode(a,{gain:m});if(i.main.post=[Gt],ce.connect(Gt),A>0&&S>0&&Z>0){const oe=Ce.getDelay(S,Z,t);i.main.delay=[oe];const O=Ce.sendDelay(Gt,A);i.main.delay_mix=[O],ce.audioNodes.push(O)}if(J>0){let oe;if(re!==void 0){let he,Ne=as(re);Array.isArray(Ne)?he=Ne.data.samples[Ke%Ne.data.samples.length]:typeof Ne=="object"&&(he=Object.values(Ne.data.samples).flat()[Ke%Object.values(Ne.data.samples).length]),oe=await pi(he,a,re,0)}const O=Ce.getReverb(ye,Y,Q,ee,oe,ge,pe);i.main.room=[O];const $e=Ce.sendReverb(Gt,J);i.main.room_mix=[$e],ce.audioNodes.push($e)}if(T!=null){const oe=o.getBus(T),O=Pr(Gt,oe,K);ce.audioNodes.push(O)}if(D!=null){const oe=Ce.getDjf(D,t);i.main.djf=[oe]}if(pt&&!(a instanceof OfflineAudioContext)){const oe=f2(pt,2**(ut+5)),O=Pr(Gt,oe,1);ce.audioNodes.push(O)}if(B!=null){B=mn(B);const oe=new GainNode(a,{gain:B});ce.connect(oe),Ce.connectToOutput(oe)}else Ce.connectToOutput(Gt);z.forEach((oe,O)=>{const $e=O===z.length-1?"main":O;if(oe.lfo)for(const he of oe.lfo.__ids){const Ne=oe.lfo[he];Ne.fxi??=$e;const bt=TM(he,{...Ne,cps:s,cycle:r,begin:t,end:ke},i);bt&&ce.audioNodes.push(bt)}if(oe.env)for(const he of oe.env.__ids){const Ne=oe.env[he];Ne.fxi??=$e;const bt=IM(he,{...Ne,begin:t,end:ke},i);bt&&ce.audioNodes.push(bt)}if(oe.bmod)for(const he of oe.bmod.__ids){const Ne=oe.bmod[he];Ne.fxi??=$e;const{toCleanup:bt}=YM({...Ne,begin:t},i,us);ce.audioNodes.push(...bt)}})},rD=(e,t,n,s)=>{Li(t,e-n,t.duration/s,s)},iD=["triangle","square","sawtooth","sine","user","one"],aD=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function oD(e,t){const n=e,s=new Float32Array(t);for(let r=0;r<t;r++){const i=r*2/t-1;s[r]=Math.tanh(i*n)}return s}function g2(){[...iD].forEach(e=>{sn(e,(t,n,s)=>{const[r,i,a,o]=Nt([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]),u=_e(.3),c=M2(e,t,n,()=>{Se(u),s()}),{node:h,nodes:d,stop:m,triggerRelease:g}=c,{duration:y}=n,G=_e(1),X=h.connect(u).connect(G),D=t+y;Wt(X.gain,r,i,a,o,0,1,t,D,"linear");const L=D+o+.01;return g?.(L),m(L),{node:X,nodes:d,stop:B=>{m(B)}}},{type:"synth",prebake:!0})}),sn("sbd",(e,t,n)=>{const{duration:s,decay:r=.5,pdecay:i=.5,penv:a=36,clip:o}=t,u=Ge(),c=.02,h=1.2,d=.025,m=1,g=u.createOscillator();g.type="triangle",g.frequency.value=jn(t,29),g.detune.setValueAtTime(a*100,0),g.detune.setValueAtTime(a*100,e),g.detune.exponentialRampToValueAtTime(.001,e+i);const y=_e(1);y.gain.setValueAtTime(1,e+c),y.gain.exponentialRampToValueAtTime(.001,e+c+r),g.start(e);const G=Ia("brown",e,2),X=_e(1);X.gain.setValueAtTime(h,e),X.gain.exponentialRampToValueAtTime(.001,e+d);const D=new WaveShaperNode(u);D.curve=oD(2,u.sampleRate);const L=_e(m);Mn(g,()=>{Se(g),Se(y),Se(D),Se(G.node),Se(X),Se(L),n()});const B=g.connect(D).connect(y).connect(L);G.node.connect(X).connect(L);let A=e+r+.01;return o!=null&&(A=Math.min(e+o*s,A)),L.gain.setValueAtTime(m,A-.01),L.gain.linearRampToValueAtTime(0,A),g.stop(A),G.stop(A),{node:B,nodes:{source:[g]},stop:Z=>{g.stop(Z)}}},{type:"synth",prebake:!0}),sn("supersaw",(e,t,n)=>{const s=Ge();let{duration:r,n:i,unison:a=5,spread:o=.6,detune:u}=t;u=u??i??.18;const c=jn(t),[h,d,m,g]=Nt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),y=e+r,G=y+g+.01,X=bn(a,1,100);let D=X>1?bn(o,0,1):0;const L={frequency:c,begin:e,end:G,freqspread:u,voices:X,panspread:D},B=Sr("supersaw",()=>new AudioWorkletNode(s,"supersaw-oscillator",{outputChannelCount:[2]}));Object.entries(L).forEach(([T,K])=>{const J=B.parameters.get(T),Y=K!==void 0?K:J.defaultValue;J.value=Y}),B.port.postMessage({type:"initialize"});const A=1/Math.sqrt(X);Vs(B.parameters.get("detune"),t,e,y);const Z=zs(B.parameters.get("detune"),t,e),E=vr(B.parameters.get("frequency"),t,e);let S=_e(1);S=B.connect(S),Wt(S.gain,h,d,m,g,0,.3*A,e,y,"linear");let V=fn(s,()=>{jo(B),n(),E?.stop(),Z?.stop()},e,G);return{node:S,nodes:{source:[B],...E?.nodes,...Z?.nodes},stop:T=>{V.stop(T)}}},{prebake:!0,type:"synth"}),sn("bytebeat",(e,t,n)=>{const s=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:r=0}=t,i=jn(t),{byteBeatExpression:a=s[r%s.length],byteBeatStartTime:o}=t,u=Ge();let{duration:c}=t;const[h,d,m,g]=Nt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),y=e+c,G=y+g+.01;let X=Ft(u,"byte-beat-processor",{frequency:i,begin:e,end:G},{outputChannelCount:[2]});X.port.postMessage({codeText:a,byteBeatStartTime:o,frequency:i});let D=_e(1);D=X.connect(D),Wt(D.gain,h,d,m,g,0,1,e,y,"linear");let L=fn(u,()=>{Se(X),n()},e,G);return{node:D,source:X,stop:B=>{L.stop(B)}}},{prebake:!0,type:"synth"}),sn("pulse",(e,t,n)=>{const s=Ge();let{pwrate:r,pwsweep:i}=t;i==null&&(r!=null?i=.3:i=0),r==null&&i!=null&&(r=1);let{duration:a,pw:o=.5}=t;const u=jn(t),[c,h,d,m]=Nt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),g=e+a,y=g+m+.01;let G=Ft(s,"pulse-oscillator",{frequency:u,begin:e,end:y,pulsewidth:o},{outputChannelCount:[2]});Vs(G.parameters.get("detune"),t,e,g);const X=zs(G.parameters.get("detune"),t,e),D=vr(G.parameters.get("frequency"),t,e);let L=_e(1);L=G.connect(L),Wt(L.gain,c,h,d,m,0,1,e,g,"linear");let B;i!=0&&(B=Is(s,{frequency:r,depth:i,begin:e,end:y}),B.connect(G.parameters.get("pulsewidth")));let A=fn(s,()=>{Se(G),Se(B),n(),D?.stop(),X?.stop()},e,y);return{node:L,nodes:{source:[G],pw_lfo:[B],...D?.nodes,...X?.nodes},stop:Z=>{A.stop(Z)}}},{prebake:!0,type:"synth"}),sn("bus",(e,t,n)=>{const s=Ge(),[r,i,a,o]=Nt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,1,.01]),u=e+t.duration,c=u+o+.01,h=Di().getBus(t.n??0),d=h.connect(_e(0));Wt(d.gain,r,i,a,o,0,1,e,u,"linear");const m=fn(s,()=>{h.disconnect(d),n()},e,c);return{node:d,nodes:{source:[h]},stop:g=>{m.stop(g)}}},{prebake:!0,type:"input"}),[...Uo].forEach(e=>{sn(e,(t,n,s)=>{const[r,i,a,o]=Nt([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u,{density:c}=n;u=Ia(e,t,c);let{node:h,stop:d,triggerRelease:m}=u;const g=_e(.3),{duration:y}=n;Mn(h,()=>{Se(h),Se(g),s()});const G=_e(1);let X=h.connect(g).connect(G);const D=t+y;Wt(X.gain,r,i,a,o,0,1,t,D,"linear");const L=D+o+.01;return m?.(L),d(L),{node:X,nodes:{source:[h]},stop:B=>{d(B)}}},{type:"synth",prebake:!0})}),aD.forEach(([e,t])=>an.set({...an.get(),[e]:an.get()[t]}))}const Pc=2*Math.PI;function b2(e,t,n){e=typeof e=="object"?e:new Float32Array(e).fill(1);const s=e.length,r=new Float32Array(s+1),i=new Float32Array(s+1),a=Ge(),o=a.createOscillator(),u={sawtooth:h=>[0,-1/h],square:h=>[0,h%2===0?0:1/h],triangle:h=>[h%2===0?0:1/(h*h),0],user:h=>[0,1]};if(!u[n])throw new Error(`unknown wave type ${n}`);for(let h=0;h<s;h++){const d=e[h],[m,g]=u[n](h+1),y=t?.[h]??0;let G=m*d,X=g*d;if(y!==0){const D=Math.cos(Pc*y),L=Math.sin(Pc*y);G=D*G-L*X,X=L*G+D*X}r[h+1]=G,i[h+1]=X}const c=a.createPeriodicWave(r,i);return o.setPeriodicWave(c),o}function M2(e,t,n,s){const{duration:r,noise:i=0}=n,a=n.partials??n.n;let o;if(e==="user"&&!a&&(ct("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),e="triangle"),e=e==="user"&&!a?"triangle":e,e==="one")return o=new ConstantSourceNode(Ge(),{offset:1}),o.start(t),{node:o,nodes:{source:o},stop:d=>o?.stop(d)};!a||a?.length===0||e==="sine"?(o=Ge().createOscillator(),o.type=e||"triangle"):o=b2(a,n.phases,e),o.frequency.value=jn(n);const u=zs(o.detune,n,t);Vs(o.detune,n,t,t+r);const c=vr(o.frequency,n,t);let h;return i&&(h=OF(o,i,t)),Mn(o,()=>{h?.teardown(),Se(o),Se(h?.node),s()}),o.start(t),{node:h?.node||o,nodes:{source:[o],...u?.nodes,...c?.nodes},stop:d=>{c.stop(d),u?.stop(d),h?.stop(d),o.stop(d)},triggerRelease:d=>{}}}function uD(e=1,t=.05,n=220,s=0,r=0,i=.1,a=0,o=1,u=0,c=0,h=0,d=0,m=0,g=0,y=0,G=0,X=0,D=1,L=0,B=0){let A=Math.PI*2,Z=Ge().sampleRate,E=Ke=>Ke>0?1:-1,S=u*=500*A/Z/Z,V=n*=(1+t*2*Math.random()-t)*A/Z,T=[],K=0,J=0,Y=0,Q=1,ee=0,ye=0,re=0,ge,pe;for(s=s*Z+9,L*=Z,r*=Z,i*=Z,X*=Z,c*=500*A/Z**3,y*=A/Z,h*=A/Z,d*=Z,m=m*Z|0,pe=s+L+r+i+X|0;Y<pe;T[Y++]=re)++ye%(G*100|0)||(re=a?a>1?a>2?a>3?Math.sin((K%A)**3):Math.max(Math.min(Math.tan(K),1),-1):1-(2*K/A%2+2)%2:1-4*Math.abs(Math.round(K/A)-K/A):Math.sin(K),re=(m?1-B+B*Math.sin(A*Y/m):1)*E(re)*Math.abs(re)**o*e*1*(Y<s?Y/s:Y<s+L?1-(Y-s)/L*(1-D):Y<s+L+r?D:Y<pe-X?(pe-Y-X)/i*D:0),re=X?re/2+(X>Y?0:(Y<pe-X?1:(pe-Y)/X)*T[Y-X|0]/2):re),ge=(n+=u+=c)*Math.cos(y*J++),K+=ge-ge*g*(1-(Math.sin(Y)+1)*1e9%2),Q&&++Q>d&&(n+=h,V+=h,Q=0),m&&!(++ee%m)&&(n=V,u=S,Q||=1);return T}const x2=(e,t)=>{let{s:n,note:s=36,freq:r,zrand:i=0,attack:a=0,decay:o=0,sustain:u=.8,release:c=.1,curve:h=1,slide:d=0,deltaSlide:m=0,pitchJump:g=0,pitchJumpTime:y=0,lfo:G=0,znoise:X=0,zmod:D=0,zcrush:L=0,zdelay:B=0,tremolo:A=0,duration:Z=.2,zzfx:E}=e;const S=Math.max(Z-a-o,0);typeof s=="string"&&(s=Ai(s)),!r&&typeof s=="number"&&(r=FM(s)),n=n.replace("z_","");const V=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;h=n==="square"?0:h;const T=uD(...E||[.25,i,r,a,S,c,V,h,d,m,g,y,G,X,D,L,B,u,o,A]),K=Ge(),J=K.createBuffer(1,T.length,K.sampleRate);J.getChannelData(0).set(T);const Y=Ge().createBufferSource();return Y.buffer=J,Y.start(t),{node:Y}};function cD(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{sn(e,(t,n,s)=>{const{node:r}=x2({s:e,...n},t);return Mn(r,()=>{Se(r),s()}),{node:r,nodes:{source:[r]},stop:()=>{}}},{type:"synth",prebake:!0})})}let Ss;async function G2(e,t){const n=`dsp-worklet-${Date.now()}`,s=`${t}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,r=`data:text/javascript;base64,${btoa(s)}`;await e.audioWorklet.addModule(r);const i=new AudioWorkletNode(e,n);return{node:i,stop:()=>i.port.postMessage("stop")}}const C2=()=>{Ss&&(Ss?.stop(),Ss?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{e.data==="strudel-stop"?C2():e.data?.dough&&Ss?.node.port.postMessage(e.data)});const lD=async e=>{const t=Ge();C2(),Ss=await G2(t,e),Ss.node.connect(t.destination)};function P2(e,t,n,s){window.postMessage({time:s,dough:e.value,currentTime:t,duration:e.duration,cps:n})}let pr;function pD(){const e=Ge();pr=Ft(e,"dough-processor",{},{outputChannelCount:[2]}),m2(pr)}const ni=new Map,vc=new Map;H.prototype.supradough=function(){return this.onTrigger((e,t,n,s)=>{e.value._begin=s,e.value._duration=e.duration/n,!pr&&pD();const r=(e.value.bank?e.value.bank+"_":"")+e.value.s,i=e.value.n??0,a=`${r}:${i}`;if(ni.has(r)&&(e.value.s=a),ni.has(r)&&!vc.has(a)){const o=ni.get(r),u=o[i%o.length];console.log(`load ${a} from ${u}`);const c=mD(u);vc.set(a,c),c.then(({channels:h,sampleRate:d})=>pr.port.postMessage({sample:a,channels:h,sampleRate:d}))}pr.port.postMessage({spawn:e.value})},1)};function hD(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,s]=e.split("github:");return s=s.endsWith("/")?s.slice(0,-1):s,s.split("/").length===2&&(s+="/main"),`https://raw.githubusercontent.com/${s}/${t}`}async function dD(e){if(e.startsWith("github:")&&(e=hD(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[s,r]=e.split("shabda:");e=`https://shabda.ndre.gr/${r}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[s,r]=e.split("shabda/speech");r=r.startsWith("/")?r.substring(1):r;let[i,a]=r.split(":"),o="f",u="en-GB";i&&([u,o]=i.split("/")),e=`https://shabda.ndre.gr/speech/${a}.json?gender=${o}&language=${u}&strudel=1'`}if(typeof fetch!="function")return;const t=e.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const n=await fetch(e).then(s=>s.json()).catch(s=>{throw console.error(s),new Error(`error loading "${e}"`)});return[n,n._base||t]}async function mD(e){const t=await fetch(e).then(s=>s.arrayBuffer()).then(s=>Ge().decodeAudioData(s));let n=[];for(let s=0;s<t.numberOfChannels;s++)n.push(t.getChannelData(s));return{channels:n,sampleRate:t.sampleRate}}async function v2(e,t){if(typeof e=="string"){const[n,s]=await dD(e);return v2(n,s)}Object.entries(e).map(async([n,s])=>{n!=="_base"&&(s=s.map(r=>t+r),ni.set(n,s))})}const fD="data:text/javascript;base64,dmFyIGh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHUsbSxmKT0+bSBpbiB1P2h0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5udCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2NvbnN0IE89KGgscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaCxzKSx0KTtmdW5jdGlvbiBfKGgpe3JldHVybiBWKGgpfWZ1bmN0aW9uIFQoaCxzLHQpe2NvbnN0IGk9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksbj1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBoKmkrcypufWNsYXNzIGd7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy91KSUxLHR9fWNsYXNzIEl7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiBNKGgscyl7cmV0dXJuIGg8cz8oaC89cyxoK2gtaCpoLTEpOmg+MS1zPyhoPShoLTEpL3MsaCpoK2graCsxKTowfWNsYXNzIFN7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvdTtsZXQgaT1NKHRoaXMucGhhc2UsdCksbj0yKnRoaXMucGhhc2UtMS1pO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLG59fWZ1bmN0aW9uIHooaCxzLHQpe3JldHVybiBoPDI/MDooKG4sbCxyKT0+cioobC1uKStuKSgtcyouNSxzKi41LHQvKGgtMSkpfWZ1bmN0aW9uIEYoaCxzKXtyZXR1cm4gaCpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEx7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksaT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBuPTAsbD0wO2ZvcihsZXQgcj0wO3I8dGhpcy52b2ljZXM7cisrKXtjb25zdCBhPUYocyx6KHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxyKSkvdSxjPShyJjEpPT0xO2xldCBkPXQ7YyYmKGQ9aSk7bGV0IGI9TSh0aGlzLnBoYXNlW3JdLGEpLEU9Mip0aGlzLnBoYXNlW3JdLTEtYjtuPW4rRSpkLGw9bCtFKmQsdGhpcy5waGFzZVtyXSs9YSx0aGlzLnBoYXNlW3JdPjEmJih0aGlzLnBoYXNlW3JdLT0xKX1yZXR1cm4gbitsfX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgcXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiczAiLDApO2UodGhpcywiczEiLDApfXVwZGF0ZShzLHQsaT0wKXtpPU1hdGgubWF4KGksMCksdD1NYXRoLm1pbih0LDJlNCk7bGV0IG49MipNYXRoLnNpbih0Km0pO249TyhuLDAsMS4xNCk7Y29uc3Qgcj0xLU1hdGgucG93KC41LChpKy4xMjUpLy4xMjUpKm47cmV0dXJuIHRoaXMuczA9cip0aGlzLnMwLW4qdGhpcy5zMStuKnMsdGhpcy5zMT1yKnRoaXMuczErbip0aGlzLnMwLHRoaXMuczF9fWNsYXNzIEN7Y29uc3RydWN0b3Iocz0wKXt0aGlzLnBoYXNlPXN9c2F3KHMsdCl7bGV0IGk9KHRoaXMucGhhc2UrcyklMSxuPU0oaSx0KTtyZXR1cm4gMippLTEtbn11cGRhdGUocyx0PS41KXtjb25zdCBpPXMvdTtsZXQgbj10aGlzLnNhdygwLGkpLXRoaXMuc2F3KHQsaSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2UraSklMSxuK3QqMi0xfX1jbGFzcyBOe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMsdD0uNSl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTE8dD8xOi0xfX1jbGFzcyBQe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ1cGRhdGUiLHM9Pk1hdGgucmFuZG9tKCk8cypmP01hdGgucmFuZG9tKCk6MCl9fWNsYXNzIEd7dXBkYXRlKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMi0xfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy5vdXQ9MH11cGRhdGUoKXtsZXQgcz1NYXRoLnJhbmRvbSgpKjItMTtyZXR1cm4gdGhpcy5vdXQ9KHRoaXMub3V0Ky4wMipzKS8xLjAyLHRoaXMub3V0fX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHM9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCtzKi4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErcyouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMitzKi4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3MqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCtzKi41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtcyouMDE2ODk4O2NvbnN0IHQ9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNitzKi41MzYyO3JldHVybiB0aGlzLmI2PXMqLjExNTkyNix0Ki4xMX19Y2xhc3MgJHtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDEpfXVwZGF0ZShzKXt0aGlzLnBoYXNlKz1mKnM7bGV0IHQ9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHR9fWZ1bmN0aW9uIHgoaCxzLHQsaT0xKXtpZihoPD0wKXJldHVybiBzO2lmKGg+PTEpcmV0dXJuIHQ7bGV0IG47cmV0dXJuIGk9PT0wP249aDppPjA/bj1NYXRoLnBvdyhoLGkpOm49MS1NYXRoLnBvdygxLWgsLWkpLHMrKHQtcykqbn1jbGFzcyB2e2NvbnN0cnVjdG9yKHM9e30pe3RoaXMuc3RhdGU9Im9mZiIsdGhpcy5zdGFydFRpbWU9MCx0aGlzLnN0YXJ0VmFsPTAsdGhpcy5kZWNheUN1cnZlPXMuZGVjYXlDdXJ2ZT8/MX11cGRhdGUocyx0LGksbixsLHIpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lO3JldHVybiBwPmk/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1zLDEpOngocC9pLHRoaXMuc3RhcnRWYWwsMSwxKX1jYXNlImRlY2F5Ijp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZSxhPXgocC9uLDEsbCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEsYSk6cD5uPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1zLGwpOmF9Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1sKSxsO2Nhc2UicmVsZWFzZSI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7aWYocD5yKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IGE9eChwL3IsdGhpcy5zdGFydFZhbCwwLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hKSxhfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn19Y29uc3QgVz0xMDtjbGFzcyBSe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ3cml0ZUlkeCIsMCk7ZSh0aGlzLCJyZWFkSWR4IiwwKTtlKHRoaXMsImJ1ZmZlciIsbmV3IEZsb2F0MzJBcnJheShXKnUpKX13cml0ZShzLHQpe3RoaXMud3JpdGVJZHg9KHRoaXMud3JpdGVJZHgrMSkldGhpcy5idWZmZXIubGVuZ3RoLHRoaXMuYnVmZmVyW3RoaXMud3JpdGVJZHhdPXM7bGV0IGk9TWF0aC5taW4oTWF0aC5mbG9vcih1KnQpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1pLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLndyaXRlKHMsdCksdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe2UodGhpcywiZGVsYXkiLG5ldyBSKTtlKHRoaXMsIm1vZHVsYXRvciIsbmV3IGspfXVwZGF0ZShzLHQsaSxuLGwpe2NvbnN0IHI9dGhpcy5tb2R1bGF0b3IudXBkYXRlKG4pKmwscD10aGlzLmRlbGF5LnVwZGF0ZShzLGkqKDErcikpO3JldHVybiBUKHMscCx0KX19Y2xhc3MgVXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiaG9sZCIsMCk7ZSh0aGlzLCJ0IiwwKX11cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBZe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBpPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmkpL2l9fWNsYXNzIFp7dXBkYXRlKHMsdD0wLGk9MSl7aT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsaSkpO2NvbnN0IG49TWF0aC5leHBtMSh0KTtyZXR1cm4oMStuKSpzLygxK24qTWF0aC5hYnMocykpKml9fWNsYXNzIHd7Y29uc3RydWN0b3Iocyx0LGkpe2UodGhpcywiYnVmZmVyIik7ZSh0aGlzLCJzYW1wbGVSYXRlIik7ZSh0aGlzLCJwb3MiLDApO2UodGhpcywic2FtcGxlRnJlcSIsQSgpKTt0aGlzLmJ1ZmZlcj1zLHRoaXMuc2FtcGxlUmF0ZT10LHRoaXMuZHVyYXRpb249dGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc2FtcGxlUmF0ZSx0aGlzLnNwZWVkPXUvdGhpcy5zYW1wbGVSYXRlLGkmJih0aGlzLnNwZWVkKj10aGlzLmR1cmF0aW9uKX11cGRhdGUocyl7aWYodGhpcy5wb3M+PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PXMvdGhpcy5zYW1wbGVGcmVxKnRoaXMuc3BlZWQ7bGV0IGk9dGhpcy5idWZmZXJbTWF0aC5mbG9vcih0aGlzLnBvcyldO3JldHVybiB0aGlzLnBvcz10aGlzLnBvcyt0LGl9fWUodywic2FtcGxlcyIsbmV3IE1hcCk7Y29uc3QgeT0oaCxzPSJsaW5lYXIiLHQpPT57Y29uc3RbcixwLGEsY109aDtpZihyPT1udWxsJiZwPT1udWxsJiZhPT1udWxsJiZjPT1udWxsKXJldHVybiB0Pz9bLjAwMSwuMDAxLDEsLjAxXTtjb25zdCBkPWE/PyhyIT1udWxsJiZwPT1udWxsfHxyPT1udWxsJiZwPT1udWxsPzE6LjAwMSk7cmV0dXJuW01hdGgubWF4KHI/PzAsLjAwMSksTWF0aC5tYXgocD8/MCwuMDAxKSxNYXRoLm1pbihkLDEpLE1hdGgubWF4KGM/PzAsLjAxKV19O2xldCBEPXtzaW5lOmcsc2F3OlMsemF3Okksc2F3dG9vdGg6Uyx6YXd0b290aDpJLHN1cGVyc2F3OkwsdHJpOmssdHJpYW5nbGU6ayxwdWxzZTpDLHNxdWFyZTpDLHB1bHplOk4sZHVzdDpQLGNyYWNrbGU6UCxpbXB1bHNlOiQsd2hpdGU6Ryxicm93bjpqLHBpbms6Qn07Y29uc3QgSD17Y2hvcnVzOjAsbm90ZTo0OCxzOiJ0cmlhbmdsZSIsYmFuazoiIixnYWluOjEscG9zdGdhaW46MSx2ZWxvY2l0eToxLGRlbnNpdHk6Ii4wMyIsZnR5cGU6IjEyZGIiLGZhbmNob3I6MCxyZXNvbmFuY2U6MCxocmVzb25hbmNlOjAsYmFuZHE6MCxjaGFubmVsczpbMSwyXSxwaGFzZXJkZXB0aDouNzUsc2hhcGV2b2w6MSxkaXN0b3J0dm9sOjEsZGVsYXk6MCxieXRlQmVhdEV4cHJlc3Npb246IjAiLGRlbGF5ZmVlZGJhY2s6LjUsZGVsYXlzcGVlZDoxLGRlbGF5dGltZTouMjUsb3JiaXQ6MSxpOjEsZmZ0OjgsejoidHJpYW5nbGUiLHBhbjouNSxmbWg6MSxmbWVudjowLHNwZWVkOjEscHc6LjV9O2xldCBvPWg9PkhbaF07Y29uc3QgSj17YzowLGQ6MixlOjQsZjo1LGc6NyxhOjksYjoxMX0sSz17IiMiOjEsYjotMSxzOjEsZjotMX0sUT0oaCxzPTMpPT57dmFyIGE7bGV0W3QsaT0iIixuPSIiXT0oKGE9U3RyaW5nKGgpLm1hdGNoKC9eKFthLWdBLUddKShbI2JzZl0qKShbMC05XSopJC8pKT09bnVsbD92b2lkIDA6YS5zbGljZSgxKSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraCsnIicpO2NvbnN0IGw9Slt0LnRvTG93ZXJDYXNlKCldLHI9KGk9PW51bGw/dm9pZCAwOmkuc3BsaXQoIiIpLnJlZHVjZSgoYyxkKT0+YytLW2RdLDApKXx8MDtyZXR1cm4oTnVtYmVyKG58fHMpKzEpKjEyK2wrcn0sdHQ9aD0+TWF0aC5wb3coMiwoaC02OSkvMTIpKjQ0MCxBPWg9PihoPWh8fG8oIm5vdGUiKSx0eXBlb2YgaD09InN0cmluZyImJihoPVEoaCwzKSksdHQoaCkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyBVKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgWSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWil9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIGV0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgUix0aGlzLl9kZWxheVI9bmV3IFJ9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyBzdChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGl0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgYXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IGV0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1pdCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsYXQpfSkoKTsK",yD=fD;p2(yD);const{Pattern:gD,logger:Qa,repl:bD}=CM;XM(Qa);const X2=e=>(e.ensureObjectValue(),e.value),w2=(e,t,n,s,r)=>Li(X2(e),r,n,s,e.whole?.begin.valueOf());async function MD(e,t,n,s,r,i,a,o=void 0){let u=Ge();await u.close(),u=new OfflineAudioContext(2,(s-n)/t*r,r),li(u),Oa(new t2(u)),await ou({maxPolyphony:i,multiChannelOrbits:a}),Qa("[webaudio] preloading");let c=e.queryArc(n,s,{_cps:t}).sort((h,d)=>h.whole.begin.valueOf()-d.whole.begin.valueOf());for(const h of c)if(h.hasOnset())try{await Li(X2(h),(h.whole.begin.valueOf()-n)/t,h.duration/t,t,(h.whole?.begin.valueOf()-n)/t)}catch(d){Cr(d,"webaudio")}return Qa("[webaudio] start rendering"),u.startRendering().then(h=>{const d=xD(h),m=new Blob([d],{type:"audio/wav"}),g=URL.createObjectURL(m),y=document.createElement("a");y.href=g,o=o?`${o}.wav`:`${new Date().toISOString()}.wav`,y.download=`${o}`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g)}).finally(async()=>{li(null),Oa(null),y2()})}function Z2(e={}){const t=e.audioContext??Ge();return li(t),e={getTime:()=>t.currentTime,defaultOutput:w2,...e},bD(e)}gD.prototype.dough=function(){return this.onTrigger(P2,1)};function xD(e,t){t=t||{};var n=e.numberOfChannels,s=e.sampleRate,r=t.float32?3:1,i=r===3?32:16,a;return n===2?a=CD(e.getChannelData(0),e.getChannelData(1)):a=e.getChannelData(0),GD(a,r,s,n,i)}function GD(e,t,n,s,r){var i=r/8,a=s*i,o=new ArrayBuffer(44+e.length*i),u=new DataView(o);return Or(u,0,"RIFF"),u.setUint32(4,36+e.length*i,!0),Or(u,8,"WAVE"),Or(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,t,!0),u.setUint16(22,s,!0),u.setUint32(24,n,!0),u.setUint32(28,n*a,!0),u.setUint16(32,a,!0),u.setUint16(34,r,!0),Or(u,36,"data"),u.setUint32(40,e.length*i,!0),t===1?vD(u,44,e):PD(u,44,e),o}function CD(e,t){for(var n=e.length+t.length,s=new Float32Array(n),r=0,i=0;r<n;)s[r++]=e[i],s[r++]=t[i],i++;return s}function PD(e,t,n){for(var s=0;s<n.length;s++,t+=4)e.setFloat32(t,n[s],!0)}function vD(e,t,n){for(var s=0;s<n.length;s++,t+=2){var r=Math.max(-1,Math.min(1,n[s]));e.setInt16(t,r<0?r*32768:r*32767,!0)}}function Or(e,t,n){for(var s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))}const bs=(e="test-canvas",t)=>{let{contextType:n="2d",pixelated:s=!1,pixelRatio:r=window.devicePixelRatio}={},i=document.querySelector("#"+e);if(!i){i=document.createElement("canvas"),i.id=e,i.width=window.innerWidth*r,i.height=window.innerHeight*r,i.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",s&&(i.style.imageRendering="pixelated"),document.body.prepend(i);let a;window.addEventListener("resize",()=>{a&&clearTimeout(a),a=setTimeout(()=>{i.width=window.innerWidth*r,i.height=window.innerHeight*r},200)})}return i.getContext(n,{willReadFrequently:!0})};let hr={};function XD(e){hr[e]!==void 0&&(cancelAnimationFrame(hr[e]),delete hr[e])}let Ln={};H.prototype.draw=function(e,t){if(typeof window>"u")return this;let{id:n=1,lookbehind:s=0,lookahead:r=0}=t,i=Math.max(za(),0);XD(n),s=Math.abs(s),Ln[n]=(Ln[n]||[]).filter(c=>!c.isInFuture(i));let a=this.queryArc(i,i+r).filter(c=>c.hasOnset());Ln[n]=Ln[n].concat(a);let o;const u=()=>{const c=za(),h=c+r;Ln[n]=Ln[n].filter(g=>g.isInNearPast(s,c));let d=Math.max(o||h,h-1/10);const m=this.queryArc(d,h).filter(g=>g.hasOnset());Ln[n]=Ln[n].concat(m),o=h,e(Ln[n],c,h,this),hr[n]=requestAnimationFrame(u)};return hr[n]=requestAnimationFrame(u),this};H.prototype.onPaint=function(e){return this.withState(t=>(t.controls.painters||(t.controls.painters=[]),t.controls.painters.push(e),t))};H.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};let wD={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function kn(){return wD}let Xc="#22222210";H.prototype.animate=function({callback:e,sync:t=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const s=bs();let{clientWidth:r,clientHeight:i}=s.canvas;r*=window.devicePixelRatio,i*=window.devicePixelRatio;let a=n===0?"99":Number((1-n)*100).toFixed(0);a=a.length===1?`0${a}`:a,Xc=`#200010${a}`;const o=u=>{let c;u=Math.round(u),c=this.slow(1e3).queryArc(u,u),s.fillStyle=Xc,s.fillRect(0,0,r,i),c.forEach(h=>{let{x:d,y:m,w:g,h:y,s:G,r:X,angle:D=0,fill:L="darkseagreen"}=h.value;if(g*=r,y*=i,X!==void 0&&D!==void 0){const A=D*2*Math.PI,[Z,E]=[(r-g)/2,(i-y)/2];d=Z+Math.cos(A)*X*Z,m=E+Math.sin(A)*X*E}else d*=r-g,m*=i-y;const B={...h.value,x:d,y:m,w:g,h:y};s.fillStyle=L,G==="rect"?s.fillRect(d,m,g,y):G==="ellipse"&&(s.beginPath(),s.ellipse(d+g/2,m+y/2,g/2,y/2,0,0,2*Math.PI),s.fill()),e&&e(s,B,h)}),window.frame=requestAnimationFrame(o)};return window.frame=requestAnimationFrame(o),Ye};const{x:F2,y:gV,w:bV,h:MV,angle:xV,r:GV,fill:CV,smear:PV}=Ao("x","y","w","h","angle","r","fill","smear");R("rescale",function(e,t){return t.mul(F2(e).w(e).y(e).h(e))});R("moveXY",function(e,t,n){return n.add(F2(e).y(t))});R("zoomIn",function(e,t){const n=je(1).sub(e).div(2);return t.rescale(e).move(n,n)});const rr=(e,t,n)=>e*(n-t)+t,wc=e=>{let{value:t}=e;typeof e.value!="object"&&(t={value:t});let{note:n,n:s,freq:r,s:i}=t;if(r)return mo(r);if(n=n??s,typeof n=="string")try{return gn(n)}catch{return 0}return typeof n=="number"?n:i?"_"+i:t};H.prototype.pianoroll=function(e={}){let{cycles:t=4,playhead:n=.5,overscan:s=0,hideNegative:r=!1,ctx:i=bs(),id:a=1}=e,o=-t*n,u=t*(1-n);const c=(h,d)=>(!r||h.whole.begin>=0)&&h.isWithinTime(d+o,d+u);return this.draw((h,d)=>{A2({...e,time:d,ctx:i,haps:h.filter(m=>c(m,d))})},{lookbehind:o-s,lookahead:u+s,id:a}),this};function A2({time:e,haps:t,cycles:n=4,playhead:s=.5,flipTime:r=0,flipValues:i=0,hideNegative:a=!1,inactive:o=kn().foreground,active:u=kn().foreground,background:c="transparent",smear:h=0,playheadColor:d=kn().foreground,minMidi:m=10,maxMidi:g=90,autorange:y=0,timeframe:G,fold:X=1,vertical:D=0,labels:L=!1,fill:B=1,fillActive:A=!1,strokeActive:Z=!0,stroke:E,hideInactive:S=0,colorizeInactive:V=1,fontFamily:T,ctx:K,id:J}={}){const Y=K.canvas.width,Q=K.canvas.height;let ee=-n*s,ye=n*(1-s);J&&(t=t.filter(De=>De.hasTag(J))),G&&(console.warn("timeframe is deprecated! use from/to instead"),ee=0,ye=G);const re=D?Q:Y,ge=D?Y:Q;let pe=D?[re,0]:[0,re];const Ke=ye-ee,pt=D?[0,ge]:[ge,0];let ut=g-m+1,z=ge/ut,xe=[];r&&pe.reverse(),i&&pt.reverse();const{min:it,max:ze,values:Ce}=t.reduce(({min:De,max:ke,values:wt},ce)=>{const We=wc(ce);return{min:We<De?We:De,max:We>ke?We:ke,values:wt.includes(We)?wt:[...wt,We]}},{min:1/0,max:-1/0,values:[]});y&&(m=it,g=ze,ut=g-m+1),xe=Ce.sort((De,ke)=>typeof De=="number"&&typeof ke=="number"?De-ke:typeof De=="number"?1:String(De).localeCompare(String(ke))),z=X?ge/xe.length:ge/ut,K.fillStyle=c,K.globalAlpha=1,h||(K.clearRect(0,0,Y,Q),K.fillRect(0,0,Y,Q)),t.forEach(De=>{const ke=De.whole.begin<=e&&De.endClipped>e;let wt=E??(Z&&ke),ce=!ke&&B||ke&&A;if(S&&!ke)return;let We=De.value?.color;u=We||u,o=V&&We||o,We=ke?u:o,K.fillStyle=ce?We:"transparent",K.strokeStyle=We;const{velocity:Gt=1,gain:oe=1}=De.value||{};K.globalAlpha=Gt*oe;const O=(De.whole.begin-(r?ye:ee))/Ke,$e=rr(O,...pe);let he=rr(De.duration/Ke,0,re);const Ne=wc(De),bt=X?xe.indexOf(Ne)/xe.length:(Number(Ne)-m)/ut,hn=rr(bt,...pt);let Nn=0;const dn=rr(e/Ke,...pe);let Zt;if(D?Zt=[hn+1-(i?z:0),re-dn+$e+Nn+1-(r?0:he),z-2,he-2]:Zt=[$e-dn+Nn+1-(r?he:0),hn+1-(i?0:z),he-2,z-2],wt&&K.strokeRect(...Zt),ce&&K.fillRect(...Zt),L){const Zn=De.value.note??De.value.s+(De.value.n?`:${De.value.n}`:""),{label:Ze,activeLabel:Ue}=De.value,de=(ke&&Ue||Ze)??Zn;let Oe=D?he:z*.75;K.font=`${Oe}px ${T||"monospace"}`,K.fillStyle=ce?"black":We,K.textBaseline="top",K.fillText(de,...Zt)}}),K.globalAlpha=1;const Be=rr(-ee/Ke,...pe);return K.strokeStyle=d,K.beginPath(),D?(K.moveTo(0,Be),K.lineTo(ge,Be)):(K.moveTo(Be,0),K.lineTo(Be,ge)),K.stroke(),this}function ZD(e,t={}){let[n,s]=e;n=Math.abs(n);const r=s+n,i=r!==0?n/r:0;return{fold:1,...t,cycles:r,playhead:i}}const FD=(e={})=>(t,n,s,r)=>A2({ctx:t,time:n,haps:s,...ZD(r,e)});H.prototype.punchcard=function(e){return this.onPaint(FD(e))};H.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function AD(e,t,n,s){const r=(e-90)*Math.PI/180;return[n+Math.cos(r)*t,s+Math.sin(r)*t]}const Zc=(e,t,n,s,r=0)=>AD((e+r)*360,t*e,n,s);function Fc(e){let{ctx:t,from:n=0,to:s=3,margin:r=50,cx:i=100,cy:a=100,rotate:o=0,thickness:u=r/2,color:c=kn().foreground,cap:h="round",stretch:d=1,fromOpacity:m=1,toOpacity:g=1}=e;n*=d,s*=d,o*=d,t.lineWidth=u,t.lineCap=h,t.strokeStyle=c,t.globalAlpha=m,t.beginPath();let[y,G]=Zc(n,r,i,a,o);t.moveTo(y,G);const X=1/60;let D=n;for(;D<=s;){const[L,B]=Zc(D,r,i,a,o);t.globalAlpha=(D-n)/(s-n)*g,t.lineTo(L,B),D+=X}t.stroke()}function DD(e){let{stretch:t=1,size:n=80,thickness:s=n/2,cap:r="butt",inset:i=3,playheadColor:a="#ffffff",playheadLength:o=.02,playheadThickness:u=s,padding:c=0,steady:h=1,activeColor:d=kn().foreground,inactiveColor:m=kn().gutterForeground,colorizeInactive:g=0,fade:y=!0,ctx:G,time:X,haps:D,drawTime:L,id:B}=e;B&&(D=D.filter(Y=>Y.hasTag(B)));const[A,Z]=[G.canvas.width,G.canvas.height];G.clearRect(0,0,A*2,Z*2);const[E,S]=[A/2,Z/2],V={margin:n/t,cx:E,cy:S,stretch:t,cap:r,thickness:s},T={...V,thickness:u,from:i-o,to:i,color:a},[K]=L,J=h*X;D.forEach(Y=>{const Q=Y.whole.begin<=X&&Y.endClipped>X,ee=Y.whole.begin-X+i,ye=Y.endClipped-X+i-c,re=Y.value?.color||d,ge=g||Q?re:m,pe=y?1-Math.abs((Y.whole.begin-X)/K):1;Fc({ctx:G,...V,from:ee,to:ye,rotate:J,color:ge,fromOpacity:pe,toOpacity:pe})}),Fc({ctx:G,...T,rotate:J})}H.prototype.spiral=function(e={}){return this.onPaint((t,n,s,r)=>DD({ctx:t,time:n,haps:s,drawTime:r,...e}))};const SD=Es(36),Ac=(e,t,n,s)=>{s=s*Math.PI*2;const r=Math.sin(s)*n+e,i=Math.cos(s)*n+t;return[r,i]},Dc=(e,t)=>.5-Math.log2(e/t)%1;function LD({haps:e,ctx:t,id:n,hapcircles:s=1,circle:r=0,edo:i=12,root:a=SD,thickness:o=3,hapRadius:u=6,mode:c="flake",margin:h=10}={}){const d=c==="polygon",m=c==="flake",g=t.canvas.width,y=t.canvas.height;t.clearRect(0,0,g,y);const G=kn().foreground,X=Math.min(g,y)/2-o/2-u-h,D=g/2,L=y/2;n&&(e=e.filter(A=>A.hasTag(n))),t.strokeStyle=G,t.fillStyle=G,t.globalAlpha=1,t.lineWidth=o,r&&(t.beginPath(),t.arc(D,L,X,0,2*Math.PI),t.stroke()),i&&(Array.from({length:i},(A,Z)=>{const E=Dc(a*Math.pow(2,Z/i),a),[S,V]=Ac(D,L,X,E);t.beginPath(),t.arc(S,V,u,0,2*Math.PI),t.fill()}),t.stroke());let B=[];t.lineWidth=u,e.forEach(A=>{let Z;try{Z=_l(A)}catch{return}const E=Dc(Z,a),[S,V]=Ac(D,L,X,E),T=A.value.color||G;t.strokeStyle=T,t.fillStyle=T;const{velocity:K=1,gain:J=1}=A.value||{},Y=K*J;t.globalAlpha=Y,B.push([S,V,E,T,Y]),t.beginPath(),s&&(t.moveTo(S+u,V),t.arc(S,V,u,0,2*Math.PI),t.fill()),m&&(t.moveTo(D,L),t.lineTo(S,V)),t.stroke()}),t.strokeStyle=G,t.globalAlpha=1,d&&B.length&&(B=B.sort((A,Z)=>A[2]-Z[2]),t.beginPath(),t.moveTo(B[0][0],B[0][1]),B.forEach(([A,Z,E,S,V])=>{t.strokeStyle=S,t.globalAlpha=V,t.lineTo(A,Z)}),t.lineTo(B[0][0],B[0][1]),t.stroke())}H.prototype.pitchwheel=function(e={}){let{ctx:t=bs(),id:n=1}=e;return this.tag(n).onPaint((s,r,i)=>LD({...e,ctx:t,haps:i.filter(a=>a.isActive(r)),id:n}))};function D2(e,{align:t=!0,color:n="white",thickness:s=3,scale:r=.25,pos:i=.75,trigger:a=0,ctx:o=bs(),id:u=1}={}){o.lineWidth=s,o.strokeStyle=n;let c=o.canvas;if(!e){o.beginPath();let G=i*c.height;o.moveTo(0,G),o.lineTo(c.width,G),o.stroke();return}const h=Si("time",u);o.beginPath();const d=e.frequencyBinCount;let m=t?Array.from(h).findIndex((G,X,D)=>X&&D[X-1]>-a&&G<=-a):0;m=Math.max(m,0);const g=c.width*1/d;let y=0;for(let G=m;G<d;G++){const X=h[G]+1,D=(i-r*(X-1))*c.height;G===0?o.moveTo(y,D):o.lineTo(y,D),y+=g}o.stroke()}function S2(e,{color:t="white",scale:n=.25,pos:s=.75,lean:r=.5,min:i=-150,max:a=0,ctx:o=bs(),id:u=1}={}){if(!e){o.beginPath();let y=s*h.height;o.moveTo(0,y),o.lineTo(h.width,y),o.stroke();return}const c=Si("frequency",u),h=o.canvas;o.fillStyle=t;const d=e.frequencyBinCount,m=h.width*1/d;let g=0;for(let y=0;y<d;y++){const G=Gi((c[y]-i)/(a-i),0,1)*n,X=G*h.height,D=(s-G*r)*h.height;o.fillRect(g,D,Math.max(m,1),X),g+=m}}function L2(e=0,t="0,0,0",n=bs()){e?(n.fillStyle=`rgba(${t},${1-e})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}H.prototype.fscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(()=>{L2(e.smear,"0,0,0",e.ctx),Ct[t]&&S2(Ct[t],e)},{id:t})};H.prototype.tscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{e.color=n[0]?.value?.color||kn().foreground,e.color,L2(e.smear,"0,0,0",e.ctx),D2(Ct[t],e)},{id:t})};H.prototype.scope=H.prototype.tscope;let Sc={};H.prototype.spectrum=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{e.color=n[0]?.value?.color||Sc[t]||kn().foreground,Sc[t]=e.color,ED(Ct[t],e)},{id:t})};H.prototype.scope=H.prototype.tscope;const da=new Map;function ED(e,{thickness:t=3,speed:n=1,min:s=-80,max:r=0,ctx:i=bs(),id:a=1,color:o}={}){if(i.lineWidth=t,i.strokeStyle=o,!e)return;const u=n,c=Si("frequency",a),h=i.canvas;i.fillStyle=o;const d=e.frequencyBinCount;let m=da.get(a)||i.getImageData(0,0,h.width,h.height);da.set(a,m),i.clearRect(0,0,i.canvas.width,i.canvas.height),i.putImageData(m,-u,0);let g=h.width-n;for(let y=0;y<d;y++){const G=Gi((c[y]-s)/(r-s),0,1);i.globalAlpha=G;const X=Math.log(y+1)/Math.log(d)*h.height;i.fillRect(g,h.height-X,u,2)}da.set(a,i.getImageData(0,0,h.width,h.height))}const RD=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:nu,Warpmode:_a,aliasBank:jA,get analysers(){return Ct},get analysersData(){return cs},applyFM:vr,applyGainCurve:mn,applyParameterModulators:Ha,cleanupOnEnd:NM,connectBusModulator:YM,connectEnvelope:IM,connectLFO:TM,connectToDestination:m2,createFilter:RM,distortionAlgorithms:Oo,dough:lD,doughTrigger:P2,doughsamples:v2,drawFrequencyScope:S2,drawTimeScope:D2,drywet:kM,dspWorklet:G2,effectSend:Pr,errorLogger:Cr,gainNode:_e,getADSRValues:Nt,getAnalyserById:f2,getAnalyzerData:Si,getAudioContext:Ge,getAudioContextCurrentTime:JF,getAudioDevices:u2,getCachedBuffer:DA,getCompressor:EM,getDefaultValue:rt,getDistortion:WM,getDistortionAlgorithm:bA,getEnvelope:LM,getFrequencyFromValue:jn,getLfo:Is,getLoadedBuffer:LA,getOscillator:M2,getParamADSR:Wt,getParamLfo:Jo,getPitchEnvelope:Vs,getSampleBuffer:KM,getSampleBufferSource:_M,getSampleInfo:HM,getSound:as,getSuperdoughAudioController:Di,getVibratoOscillator:zs,getWorklet:Ft,getZZFX:x2,initAudio:ou,initAudioOnFirstClick:d2,loadBuffer:pi,loadWorklets:h2,logger:ct,get maxPolyphony(){return su},get multiChannelOrbits(){return ru},noises:Uo,onTriggerSample:$M,onTriggerSynth:r2,onceEnded:Mn,processSampleMap:OM,registerSampleSource:e2,registerSamplesPrefix:EA,registerSound:sn,registerSynthSounds:g2,registerWaveTable:tu,registerWorklet:p2,registerZZFXSounds:cD,releaseAudioNode:Se,renderPatternAudio:MD,resetDefaultValues:c2,resetDefaults:QA,resetGlobalEffects:y2,resetLoadedSounds:eD,resetSeenKeys:n2,reverseBuffer:jM,samples:qM,scheduleAtTime:uA,setAudioContext:li,setDefault:OA,setDefaultAudioContext:PM,setDefaultValue:au,setDefaultValues:qA,setGainCurve:KA,setLogger:XM,setMaxPolyphony:i2,setMultiChannelOrbits:a2,setSuperdoughAudioController:Oa,setVersionDefaults:$A,soundAlias:UA,soundMap:an,superdough:Li,superdoughTrigger:rD,tables:HA,waveformN:b2,webAudioTimeout:fn,webaudioOutput:w2,webaudioRepl:Z2},Symbol.toStringTag,{value:"Module"}));function kD(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function ds(e,t,n,s){var r=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(r,ds.prototype),r.expected=t,r.found=n,r.location=s,r.name="SyntaxError",r}kD(ds,Error);function ma(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}ds.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<e.length;s++)if(e[s].source===this.location.source){n=e[s].text.split(/\r\n|\n|\r/g);break}var r=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(r):r,a=this.location.source+":"+i.line+":"+i.column;if(n){var o=this.location.end,u=ma("",i.line.toString().length," "),c=n[r.line-1],h=r.line===o.line?o.column:c.length+1,d=h-r.column||1;t+=`
 --> `+a+`
`+u+` |
`+i.line+" | "+c+`
`+u+" | "+ma("",r.column-1," ")+ma("",d,"^")}else t+=`
 at `+a}return t};ds.buildMessage=function(e,t){var n={literal:function(c){return'"'+r(c.text)+'"'},class:function(c){var h=c.parts.map(function(d){return Array.isArray(d)?i(d[0])+"-"+i(d[1]):i(d)});return"["+(c.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function s(c){return c.charCodeAt(0).toString(16).toUpperCase()}function r(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+s(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+s(h)})}function i(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+s(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+s(h)})}function a(c){return n[c.type](c)}function o(c){var h=c.map(a),d,m;if(h.sort(),h.length>0){for(d=1,m=1;d<h.length;d++)h[d-1]!==h[d]&&(h[m]=h[d],m++);h.length=m}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function u(c){return c?'"'+r(c)+'"':"end of input"}return"Expected "+o(e)+" but "+u(t)+" found."};function E2(e,t){t=t!==void 0?t:{};var n={},s=t.grammarSource,r={start:Ou},i=Ou,a=".",o="-",u="0",c=",",h="|",d="[",m="]",g="{",y="}",G="%",X="<",D=">",L="!",B="(",A=")",Z="/",E="*",S="?",V=":",T="..",K="^",J="struct",Y="target",Q="euclid",ee="slow",ye="rotL",re="rotR",ge="fast",pe="scale",Ke="//",pt="cat",ut="$",z="setcps",xe="setbpm",it="hush",ze=/^[1-9]/,Ce=/^[eE]/,Be=/^[+\-]/,De=/^[0-9]/,ke=/^[ \n\r\t\xA0]/,wt=/^["']/,ce=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,We=/^[@_]/,Gt=/^[^\n]/,oe=sa("number"),O=Ee(".",!1),$e=An([["1","9"]],!1,!1),he=An(["e","E"],!1,!1),Ne=An(["+","-"],!1,!1),bt=Ee("-",!1),hn=Ee("0",!1),Nn=An([["0","9"]],!1,!1),dn=sa("whitespace"),Zt=An([" ",`
`,"\r","	"," "],!1,!1),Zn=Ee(",",!1),Ze=Ee("|",!1),Ue=An(['"',"'"],!1,!1),de=sa('a letter, a number, "-", "#", ".", "^", "_"'),Oe=An(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),Qe=Ee("[",!1),ss=Ee("]",!1),rs=Ee("{",!1),ht=Ee("}",!1),Tn=Ee("%",!1),se=Ee("<",!1),be=Ee(">",!1),He=An(["@","_"],!1,!1),st=Ee("!",!1),we=Ee("(",!1),dt=Ee(")",!1),Vt=Ee("/",!1),zt=Ee("*",!1),Wr=Ee("?",!1),ta=Ee(":",!1),na=Ee("..",!1),l=Ee("^",!1),b=Ee("struct",!1),f=Ee("target",!1),M=Ee("euclid",!1),P=Ee("slow",!1),k=Ee("rotL",!1),N=Ee("rotR",!1),_=Ee("fast",!1),te=Ee("scale",!1),Fe=Ee("//",!1),at=An([`
`],!0,!1),Fn=Ee("cat",!1),In=Ee("$",!1),Nr=Ee("setcps",!1),Tr=Ee("setbpm",!1),Yt=Ee("hush",!1),Kx=function(){return parseFloat(D5())},_x=function(p){const C=p.join("");return C==="."||C==="_"},jx=function(p){return new M9(p.join(""))},Ux=function(p){return p},Jx=function(p,C){return p.arguments_.stepsPerCycle=C,p},Ox=function(p){return p},Qx=function(p){return p.arguments_.alignment="polymeter_slowcat",p},qx=function(p){return C=>C.options_.weight=(C.options_.weight??1)+(p??2)-1},$x=function(p){return C=>{const F=(C.options_.reps??1)+(p??2)-1;C.options_.reps=F,C.options_.ops=C.options_.ops.filter(W=>W.type_!=="replicate"),C.options_.ops.push({type_:"replicate",arguments_:{amount:F}}),C.options_.weight=F}},e5=function(p,C,F){return W=>W.options_.ops.push({type_:"bjorklund",arguments_:{pulse:p,step:C,rotation:F}})},t5=function(p){return C=>C.options_.ops.push({type_:"stretch",arguments_:{amount:p,type:"slow"}})},n5=function(p){return C=>C.options_.ops.push({type_:"stretch",arguments_:{amount:p,type:"fast"}})},s5=function(p){return C=>C.options_.ops.push({type_:"degradeBy",arguments_:{amount:p,seed:oa++}})},r5=function(p){return C=>C.options_.ops.push({type_:"tail",arguments_:{element:p}})},i5=function(p){return C=>C.options_.ops.push({type_:"range",arguments_:{element:p}})},a5=function(p,C){const F=new G9(p,{ops:[],weight:1,reps:1});for(const W of C)W(F);return F},o5=function(p,C){return new Kr(C,"fastcat",void 0,!!p)},u5=function(p){return{alignment:"stack",list:p}},c5=function(p){return{alignment:"rand",list:p,seed:oa++}},l5=function(p){return{alignment:"feet",list:p,seed:oa++}},p5=function(p,C){return C&&C.list.length>0?new Kr([p,...C.list],C.alignment,C.seed):p},h5=function(p,C){return new Kr(C?[p,...C.list]:[p],"polymeter")},d5=function(p){return p},m5=function(p){return{name:"struct",args:{mini:p}}},f5=function(p){return{name:"target",args:{name:p}}},y5=function(p,C,F){return{name:"bjorklund",args:{pulse:p,step:parseInt(C)}}},g5=function(p){return{name:"stretch",args:{amount:p}}},b5=function(p){return{name:"shift",args:{amount:"-"+p}}},M5=function(p){return{name:"shift",args:{amount:p}}},x5=function(p){return{name:"stretch",args:{amount:"1/"+p}}},G5=function(p){return{name:"scale",args:{scale:p.join("")}}},ju=function(p,C){return C},C5=function(p,C){return C.unshift(p),new Kr(C,"slowcat")},P5=function(p){return p},v5=function(p,C){return new x9(p.name,p.args,C)},X5=function(p){return p},w5=function(p){return p},Z5=function(p){return new aa("setcps",{value:p})},F5=function(p){return new aa("setcps",{value:p/120/2})},A5=function(){return new aa("hush")},w=t.peg$currPos|0,Pe=w,xs=[{line:1,column:1}],qt=w,Ir=t.peg$maxFailExpected||[],ae=t.peg$silentFails|0,$s;if(t.startRule){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=r[t.startRule]}function D5(){return e.substring(Pe,w)}function Uu(){return ra(Pe,w)}function Ee(p,C){return{type:"literal",text:p,ignoreCase:C}}function An(p,C,F){return{type:"class",parts:p,inverted:C,ignoreCase:F}}function S5(){return{type:"end"}}function sa(p){return{type:"other",description:p}}function Ju(p){var C=xs[p],F;if(C)return C;if(p>=xs.length)F=xs.length-1;else for(F=p;!xs[--F];);for(C=xs[F],C={line:C.line,column:C.column};F<p;)e.charCodeAt(F)===10?(C.line++,C.column=1):C.column++,F++;return xs[p]=C,C}function ra(p,C,F){var W=Ju(p),ue=Ju(C),et={source:s,start:{offset:p,line:W.line,column:W.column},end:{offset:C,line:ue.line,column:ue.column}};return et}function me(p){w<qt||(w>qt&&(qt=w,Ir=[]),Ir.push(p))}function L5(p,C,F){return new ds(ds.buildMessage(p,C),p,C,F)}function Ou(){var p;return p=b9(),p}function Dn(){var p,C;return ae++,p=w,B5(),C=Yr(),C!==n?(z5(),V5(),Pe=p,p=Kx()):(w=p,p=n),ae--,p===n&&ae===0&&me(oe),p}function E5(){var p;return e.charCodeAt(w)===46?(p=a,w++):(p=n,ae===0&&me(O)),p}function R5(){var p;return p=e.charAt(w),ze.test(p)?w++:(p=n,ae===0&&me($e)),p}function k5(){var p;return p=e.charAt(w),Ce.test(p)?w++:(p=n,ae===0&&me(he)),p}function V5(){var p,C,F,W,ue;if(p=w,C=k5(),C!==n){if(F=e.charAt(w),Be.test(F)?w++:(F=n,ae===0&&me(Ne)),F===n&&(F=null),W=[],ue=Gs(),ue!==n)for(;ue!==n;)W.push(ue),ue=Gs();else W=n;W!==n?(C=[C,F,W],p=C):(w=p,p=n)}else w=p,p=n;return p}function z5(){var p,C,F,W;if(p=w,C=E5(),C!==n){if(F=[],W=Gs(),W!==n)for(;W!==n;)F.push(W),W=Gs();else F=n;F!==n?(C=[C,F],p=C):(w=p,p=n)}else w=p,p=n;return p}function Yr(){var p,C,F,W;if(p=W5(),p===n)if(p=w,C=R5(),C!==n){for(F=[],W=Gs();W!==n;)F.push(W),W=Gs();C=[C,F],p=C}else w=p,p=n;return p}function B5(){var p;return e.charCodeAt(w)===45?(p=o,w++):(p=n,ae===0&&me(bt)),p}function W5(){var p;return e.charCodeAt(w)===48?(p=u,w++):(p=n,ae===0&&me(hn)),p}function Gs(){var p;return p=e.charAt(w),De.test(p)?w++:(p=n,ae===0&&me(Nn)),p}function fe(){var p,C;for(ae++,p=[],C=e.charAt(w),ke.test(C)?w++:(C=n,ae===0&&me(Zt));C!==n;)p.push(C),C=e.charAt(w),ke.test(C)?w++:(C=n,ae===0&&me(Zt));return ae--,C=n,ae===0&&me(dn),p}function Cs(){var p,C,F,W;return p=w,C=fe(),e.charCodeAt(w)===44?(F=c,w++):(F=n,ae===0&&me(Zn)),F!==n?(W=fe(),C=[C,F,W],p=C):(w=p,p=n),p}function Qu(){var p,C,F,W;return p=w,C=fe(),e.charCodeAt(w)===124?(F=h,w++):(F=n,ae===0&&me(Ze)),F!==n?(W=fe(),C=[C,F,W],p=C):(w=p,p=n),p}function qu(){var p,C,F,W;return p=w,C=fe(),e.charCodeAt(w)===46?(F=a,w++):(F=n,ae===0&&me(O)),F!==n?(W=fe(),C=[C,F,W],p=C):(w=p,p=n),p}function Ps(){var p;return p=e.charAt(w),wt.test(p)?w++:(p=n,ae===0&&me(Ue)),p}function Hr(){var p;return ae++,p=e.charAt(w),ce.test(p)?w++:(p=n,ae===0&&me(Oe)),ae--,p===n&&ae===0&&me(de),p}function $u(){var p,C,F,W;if(p=w,fe(),C=[],F=Hr(),F!==n)for(;F!==n;)C.push(F),F=Hr();else C=n;return C!==n?(F=fe(),Pe=w,W=_x(C),W?W=n:W=void 0,W!==n?(Pe=p,p=jx(C)):(w=p,p=n)):(w=p,p=n),p}function N5(){var p,C,F,W;return p=w,fe(),e.charCodeAt(w)===91?(C=d,w++):(C=n,ae===0&&me(Qe)),C!==n?(fe(),F=nc(),F!==n?(fe(),e.charCodeAt(w)===93?(W=m,w++):(W=n,ae===0&&me(ss)),W!==n?(fe(),Pe=p,p=Ux(F)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function T5(){var p,C,F,W,ue;return p=w,fe(),e.charCodeAt(w)===123?(C=g,w++):(C=n,ae===0&&me(rs)),C!==n?(fe(),F=sc(),F!==n?(fe(),e.charCodeAt(w)===125?(W=y,w++):(W=n,ae===0&&me(ht)),W!==n?(ue=I5(),ue===n&&(ue=null),fe(),Pe=p,p=Jx(F,ue)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function I5(){var p,C,F;return p=w,e.charCodeAt(w)===37?(C=G,w++):(C=n,ae===0&&me(Tn)),C!==n?(F=vs(),F!==n?(Pe=p,p=Ox(F)):(w=p,p=n)):(w=p,p=n),p}function Y5(){var p,C,F,W;return p=w,fe(),e.charCodeAt(w)===60?(C=X,w++):(C=n,ae===0&&me(se)),C!==n?(fe(),F=sc(),F!==n?(fe(),e.charCodeAt(w)===62?(W=D,w++):(W=n,ae===0&&me(be)),W!==n?(fe(),Pe=p,p=Qx(F)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function vs(){var p;return p=$u(),p===n&&(p=N5(),p===n&&(p=T5(),p===n&&(p=Y5()))),p}function ec(){var p;return p=H5(),p===n&&(p=_5(),p===n&&(p=j5(),p===n&&(p=U5(),p===n&&(p=K5(),p===n&&(p=J5(),p===n&&(p=O5(),p===n&&(p=Q5()))))))),p}function H5(){var p,C,F;return p=w,fe(),C=e.charAt(w),We.test(C)?w++:(C=n,ae===0&&me(He)),C!==n?(F=Dn(),F===n&&(F=null),Pe=p,p=qx(F)):(w=p,p=n),p}function K5(){var p,C,F;return p=w,fe(),e.charCodeAt(w)===33?(C=L,w++):(C=n,ae===0&&me(st)),C!==n?(F=Dn(),F===n&&(F=null),Pe=p,p=$x(F)):(w=p,p=n),p}function _5(){var p,C,F,W,ue,et,$t;return p=w,e.charCodeAt(w)===40?(C=B,w++):(C=n,ae===0&&me(we)),C!==n?(fe(),F=er(),F!==n?(fe(),W=Cs(),W!==n?(fe(),ue=er(),ue!==n?(fe(),Cs(),fe(),et=er(),et===n&&(et=null),fe(),e.charCodeAt(w)===41?($t=A,w++):($t=n,ae===0&&me(dt)),$t!==n?(Pe=p,p=e5(F,ue,et)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function j5(){var p,C,F;return p=w,e.charCodeAt(w)===47?(C=Z,w++):(C=n,ae===0&&me(Vt)),C!==n?(F=vs(),F!==n?(Pe=p,p=t5(F)):(w=p,p=n)):(w=p,p=n),p}function U5(){var p,C,F;return p=w,e.charCodeAt(w)===42?(C=E,w++):(C=n,ae===0&&me(zt)),C!==n?(F=vs(),F!==n?(Pe=p,p=n5(F)):(w=p,p=n)):(w=p,p=n),p}function J5(){var p,C,F;return p=w,e.charCodeAt(w)===63?(C=S,w++):(C=n,ae===0&&me(Wr)),C!==n?(F=Dn(),F===n&&(F=null),Pe=p,p=s5(F)):(w=p,p=n),p}function O5(){var p,C,F;return p=w,e.charCodeAt(w)===58?(C=V,w++):(C=n,ae===0&&me(ta)),C!==n?(F=vs(),F!==n?(Pe=p,p=r5(F)):(w=p,p=n)):(w=p,p=n),p}function Q5(){var p,C,F;return p=w,e.substr(w,2)===T?(C=T,w+=2):(C=n,ae===0&&me(na)),C!==n?(F=vs(),F!==n?(Pe=p,p=i5(F)):(w=p,p=n)):(w=p,p=n),p}function er(){var p,C,F,W;if(p=w,C=vs(),C!==n){for(F=[],W=ec();W!==n;)F.push(W),W=ec();Pe=p,p=a5(C,F)}else w=p,p=n;return p}function Yn(){var p,C,F,W;if(p=w,e.charCodeAt(w)===94?(C=K,w++):(C=n,ae===0&&me(l)),C===n&&(C=null),F=[],W=er(),W!==n)for(;W!==n;)F.push(W),W=er();else F=n;return F!==n?(Pe=p,p=o5(C,F)):(w=p,p=n),p}function tc(){var p,C,F,W,ue;if(p=w,C=[],F=w,W=Cs(),W!==n?(ue=Yn(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n),F!==n)for(;F!==n;)C.push(F),F=w,W=Cs(),W!==n?(ue=Yn(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n);else C=n;return C!==n&&(Pe=p,C=u5(C)),p=C,p}function q5(){var p,C,F,W,ue;if(p=w,C=[],F=w,W=Qu(),W!==n?(ue=Yn(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n),F!==n)for(;F!==n;)C.push(F),F=w,W=Qu(),W!==n?(ue=Yn(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n);else C=n;return C!==n&&(Pe=p,C=c5(C)),p=C,p}function $5(){var p,C,F,W,ue;if(p=w,C=[],F=w,W=qu(),W!==n?(ue=Yn(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n),F!==n)for(;F!==n;)C.push(F),F=w,W=qu(),W!==n?(ue=Yn(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n);else C=n;return C!==n&&(Pe=p,C=l5(C)),p=C,p}function nc(){var p,C,F;return p=w,C=Yn(),C!==n?(F=tc(),F===n&&(F=q5(),F===n&&(F=$5())),F===n&&(F=null),Pe=p,p=p5(C,F)):(w=p,p=n),p}function sc(){var p,C,F;return p=w,C=Yn(),C!==n?(F=tc(),F===n&&(F=null),Pe=p,p=h5(C,F)):(w=p,p=n),p}function e9(){var p,C,F,W;return p=w,fe(),C=Ps(),C!==n?(fe(),F=nc(),F!==n?(fe(),W=Ps(),W!==n?(Pe=p,p=d5(F)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function t9(){var p;return p=c9(),p===n&&(p=i9(),p===n&&(p=u9(),p===n&&(p=s9(),p===n&&(p=r9(),p===n&&(p=n9(),p===n&&(p=o9(),p===n&&(p=a9()))))))),p}function n9(){var p,C,F;return p=w,e.substr(w,6)===J?(C=J,w+=6):(C=n,ae===0&&me(b)),C!==n?(fe(),F=Xs(),F!==n?(Pe=p,p=m5(F)):(w=p,p=n)):(w=p,p=n),p}function s9(){var p,C,F,W,ue;return p=w,e.substr(w,6)===Y?(C=Y,w+=6):(C=n,ae===0&&me(f)),C!==n?(fe(),F=Ps(),F!==n?(W=$u(),W!==n?(ue=Ps(),ue!==n?(Pe=p,p=f5(W)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function r9(){var p,C,F,W;return p=w,e.substr(w,6)===Q?(C=Q,w+=6):(C=n,ae===0&&me(M)),C!==n?(fe(),F=Yr(),F!==n?(fe(),W=Yr(),W!==n?(fe(),Yr(),Pe=p,p=y5(F,W)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function i9(){var p,C,F;return p=w,e.substr(w,4)===ee?(C=ee,w+=4):(C=n,ae===0&&me(P)),C!==n?(fe(),F=Dn(),F!==n?(Pe=p,p=g5(F)):(w=p,p=n)):(w=p,p=n),p}function a9(){var p,C,F;return p=w,e.substr(w,4)===ye?(C=ye,w+=4):(C=n,ae===0&&me(k)),C!==n?(fe(),F=Dn(),F!==n?(Pe=p,p=b5(F)):(w=p,p=n)):(w=p,p=n),p}function o9(){var p,C,F;return p=w,e.substr(w,4)===re?(C=re,w+=4):(C=n,ae===0&&me(N)),C!==n?(fe(),F=Dn(),F!==n?(Pe=p,p=M5(F)):(w=p,p=n)):(w=p,p=n),p}function u9(){var p,C,F;return p=w,e.substr(w,4)===ge?(C=ge,w+=4):(C=n,ae===0&&me(_)),C!==n?(fe(),F=Dn(),F!==n?(Pe=p,p=x5(F)):(w=p,p=n)):(w=p,p=n),p}function c9(){var p,C,F,W,ue;if(p=w,e.substr(w,5)===pe?(C=pe,w+=5):(C=n,ae===0&&me(te)),C!==n)if(fe(),F=Ps(),F!==n){if(W=[],ue=Hr(),ue!==n)for(;ue!==n;)W.push(ue),ue=Hr();else W=n;W!==n?(ue=Ps(),ue!==n?(Pe=p,p=G5(W)):(w=p,p=n)):(w=p,p=n)}else w=p,p=n;else w=p,p=n;return p}function ia(){var p,C,F,W;if(p=w,e.substr(w,2)===Ke?(C=Ke,w+=2):(C=n,ae===0&&me(Fe)),C!==n){for(F=[],W=e.charAt(w),Gt.test(W)?w++:(W=n,ae===0&&me(at));W!==n;)F.push(W),W=e.charAt(w),Gt.test(W)?w++:(W=n,ae===0&&me(at));C=[C,F],p=C}else w=p,p=n;return p}function l9(){var p,C,F,W,ue,et,$t,ws;if(p=w,e.substr(w,3)===pt?(C=pt,w+=3):(C=n,ae===0&&me(Fn)),C!==n)if(fe(),e.charCodeAt(w)===91?(F=d,w++):(F=n,ae===0&&me(Qe)),F!==n)if(fe(),W=Xs(),W!==n){for(ue=[],et=w,$t=Cs(),$t!==n?(ws=Xs(),ws!==n?(Pe=et,et=ju(W,ws)):(w=et,et=n)):(w=et,et=n);et!==n;)ue.push(et),et=w,$t=Cs(),$t!==n?(ws=Xs(),ws!==n?(Pe=et,et=ju(W,ws)):(w=et,et=n)):(w=et,et=n);et=fe(),e.charCodeAt(w)===93?($t=m,w++):($t=n,ae===0&&me(ss)),$t!==n?(Pe=p,p=C5(W,ue)):(w=p,p=n)}else w=p,p=n;else w=p,p=n;else w=p,p=n;return p}function p9(){var p;return p=l9(),p===n&&(p=e9()),p}function Xs(){var p,C,F,W,ue;if(p=w,C=p9(),C!==n){for(fe(),F=[],W=ia();W!==n;)F.push(W),W=ia();Pe=p,p=P5(C)}else w=p,p=n;return p===n&&(p=w,C=t9(),C!==n?(fe(),e.charCodeAt(w)===36?(F=ut,w++):(F=n,ae===0&&me(In)),F!==n?(W=fe(),ue=Xs(),ue!==n?(Pe=p,p=v5(C,ue)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)),p}function h9(){var p,C;return p=w,C=Xs(),C!==n&&(Pe=p,C=X5(C)),p=C,p===n&&(p=ia()),p}function d9(){var p;return p=h9(),p}function m9(){var p,C;return p=w,fe(),C=f9(),C===n&&(C=y9(),C===n&&(C=g9())),C!==n?(fe(),Pe=p,p=w5(C)):(w=p,p=n),p}function f9(){var p,C,F;return p=w,e.substr(w,6)===z?(C=z,w+=6):(C=n,ae===0&&me(Nr)),C!==n?(fe(),F=Dn(),F!==n?(Pe=p,p=Z5(F)):(w=p,p=n)):(w=p,p=n),p}function y9(){var p,C,F;return p=w,e.substr(w,6)===xe?(C=xe,w+=6):(C=n,ae===0&&me(Tr)),C!==n?(fe(),F=Dn(),F!==n?(Pe=p,p=F5(F)):(w=p,p=n)):(w=p,p=n),p}function g9(){var p,C;return p=w,e.substr(w,4)===it?(C=it,w+=4):(C=n,ae===0&&me(Yt)),C!==n&&(Pe=p,C=A5()),p=C,p}function b9(){var p;return p=d9(),p===n&&(p=m9()),p}var M9=function(p){this.type_="atom",this.source_=p,this.location_=Uu()},Kr=function(p,C,F,W){this.type_="pattern",this.arguments_={alignment:C,_steps:W},F!==void 0&&(this.arguments_.seed=F),this.source_=p},x9=function(p,C,F){this.type_=p,this.arguments_=C,this.source_=F},G9=function(p,C){this.type_="element",this.source_=p,this.options_=C,this.location_=Uu()},aa=function(p,C){this.type_="command",this.name_=p,this.options_=C},oa=0;if($s=i(),t.peg$library)return{peg$result:$s,peg$currPos:w,peg$FAILED:n,peg$maxFailExpected:Ir,peg$maxFailPos:qt};if($s!==n&&w===e.length)return $s;throw $s!==n&&w<e.length&&me(S5()),L5(Ir,qt<e.length?e.charAt(qt):null,qt<e.length?ra(qt,qt+1):ra(qt,qt))}const VD=["start"],R2=3e-4,zD=(e,t)=>(n,s)=>{const r=e.source_[s].options_?.ops,i=n.__steps_source;if(r)for(const a of r)switch(a.type_){case"stretch":{const o=["fast","slow"],{type:u,amount:c}=a.arguments_;if(!o.includes(u))throw new Error(`mini: stretch: type must be one of ${o.join("|")} but got ${u}`);n=j(n)[u](t(c));break}case"replicate":{const{amount:o}=a.arguments_;n=j(n),n=n._repeatCycles(o)._fast(o);break}case"bjorklund":{a.arguments_.rotation?n=n.euclidRot(t(a.arguments_.pulse),t(a.arguments_.step),t(a.arguments_.rotation)):n=n.euclid(t(a.arguments_.pulse),t(a.arguments_.step));break}case"degradeBy":{n=j(n)._degradeByWith(Dt.early(R2*a.arguments_.seed),a.arguments_.amount??.5);break}case"tail":{const o=t(a.arguments_.element);n=n.fmap(u=>c=>Array.isArray(u)?[...u,c]:[u,c]).appLeft(o);break}case"range":{const o=t(a.arguments_.element);n=j(n);const u=(c,h,d=1)=>Array.from({length:Math.abs(h-c)/d+1},(m,g)=>c<h?c+g*d:c-g*d);n=((c,h)=>c.squeezeBind(d=>h.bind(m=>Xt(...u(d,m)))))(n,o);break}default:console.warn(`operator "${a.type_}" not implemented`)}return n.__steps_source=n.__steps_source||i,n};function Ys(e,t,n,s=0){n?.(e);const r=i=>Ys(i,t,n,s);switch(e.type_){case"pattern":{const i=e.source_.map(c=>r(c)).map(zD(e,r)),a=e.arguments_.alignment,o=i.filter(c=>c.__steps_source);let u;switch(a){case"stack":{u=Te(...i),o.length&&(u._steps=rn(...o.map(c=>U(c._steps))));break}case"polymeter_slowcat":{u=Te(...i.map(c=>c._slow(c.__weight))),o.length&&(u._steps=rn(...o.map(c=>U(c._steps))));break}case"polymeter":{const c=e.arguments_.stepsPerCycle?r(e.arguments_.stepsPerCycle).fmap(d=>U(d)):je(U(i.length>0?i[0].__weight:1)),h=i.map(d=>d.fast(c.fmap(m=>m.div(d.__weight))));u=Te(...h);break}case"rand":{u=Fi(Dt.early(R2*e.arguments_.seed).segment(1),i),o.length&&(u._steps=rn(...o.map(c=>U(c._steps))));break}case"feet":{u=Xt(...i);break}default:{if(e.source_.some(c=>!!c.options_?.weight)){const c=e.source_.reduce((h,d)=>h.add(d.options_?.weight||U(1)),U(0));u=Xo(...e.source_.map((h,d)=>[h.options_?.weight||U(1),i[d]])),u.__weight=c,u._steps=c,o.length&&(u._steps=u._steps.mul(rn(...o.map(h=>U(h._steps)))))}else u=cn(...i),u._steps=i.length;e.arguments_._steps&&(u.__steps_source=!0)}}return o.length&&(u.__steps_source=!0),u}case"element":return r(e.source_);case"atom":{if(e.source_==="~"||e.source_==="-")return Ye;if(!e.location_)return console.warn("no location for",e),e.source_;const i=isNaN(Number(e.source_))?e.source_:Number(e.source_);if(s===-1)return je(i);const[a,o]=uu(t,e,s);return je(i).withLoc(a,o)}case"stretch":return r(e.source_).slow(r(e.arguments_.amount));default:return console.warn(`node type "${e.type_}" not implemented -> returning silence`),Ye}}const uu=(e,t,n=0)=>{const{start:s,end:r}=t.location_,i=e?.split("").slice(s.offset,r.offset).join(""),[a=0,o=0]=i?i.split(t.source_).map(u=>u.split("").filter(c=>c===" ").length):[];return[s.offset+a+n,r.offset-o+n]},Er=(e,t=0,n=e)=>{try{return E2(e)}catch(s){const r=[s.location.start.offset+t,s.location.end.offset+t],i=n.slice(0,r[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${i}: ${s.message}`)}},k2=(e,t,n)=>{const s=Er(e,t,n);let r=[];return Ys(s,e,i=>{i.type_==="atom"&&r.push(i)},-1),r},cu=(e,t=0,n)=>k2(e,t,n).map(s=>uu(e,s,t)),lu=(...e)=>{const t=e.map(n=>{const s=`"${n}"`,r=Er(s);return Ys(r,s)});return cn(...t)},BD=(e,t)=>{const n=`"${e}"`,s=Er(n);return Ys(s,n,null,t)},WD=e=>{const t=Er(e);return Ys(t,e)};function ND(e){return typeof e=="string"?lu(e):j(e)}function V2(){ap(lu)}const TD=Object.freeze(Object.defineProperty({__proto__:null,StartRules:VD,SyntaxError:ds,getLeafLocation:uu,getLeafLocations:cu,getLeaves:k2,h:WD,m:BD,mini:lu,mini2ast:Er,miniAllStrings:V2,minify:ND,parse:E2,patternifyAST:Ys},Symbol.toStringTag,{value:"Module"}));var ID=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],z2=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],YD="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",B2="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",fa={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ya="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",HD={5:ya,"5module":ya+" export import",6:ya+" const class extends export import super"},KD=/^in(stanceof)?$/,_D=new RegExp("["+B2+"]"),jD=new RegExp("["+B2+YD+"]");function qa(e,t){for(var n=65536,s=0;s<t.length;s+=2){if(n+=t[s],n>e)return!1;if(n+=t[s+1],n>=e)return!0}return!1}function Vn(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&_D.test(String.fromCharCode(e)):t===!1?!1:qa(e,z2)}function Bs(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&jD.test(String.fromCharCode(e)):t===!1?!1:qa(e,z2)||qa(e,ID)}var Ve=function(e,t){t===void 0&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function Ht(e,t){return new Ve(e,{beforeExpr:!0,binop:t})}var Kt={beforeExpr:!0},Et={startsExpr:!0},pu={};function Re(e,t){return t===void 0&&(t={}),t.keyword=e,pu[e]=new Ve(e,t)}var x={num:new Ve("num",Et),regexp:new Ve("regexp",Et),string:new Ve("string",Et),name:new Ve("name",Et),privateId:new Ve("privateId",Et),eof:new Ve("eof"),bracketL:new Ve("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ve("]"),braceL:new Ve("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ve("}"),parenL:new Ve("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ve(")"),comma:new Ve(",",Kt),semi:new Ve(";",Kt),colon:new Ve(":",Kt),dot:new Ve("."),question:new Ve("?",Kt),questionDot:new Ve("?."),arrow:new Ve("=>",Kt),template:new Ve("template"),invalidTemplate:new Ve("invalidTemplate"),ellipsis:new Ve("...",Kt),backQuote:new Ve("`",Et),dollarBraceL:new Ve("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ve("=",{beforeExpr:!0,isAssign:!0}),assign:new Ve("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ve("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ve("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ht("||",1),logicalAND:Ht("&&",2),bitwiseOR:Ht("|",3),bitwiseXOR:Ht("^",4),bitwiseAND:Ht("&",5),equality:Ht("==/!=/===/!==",6),relational:Ht("</>/<=/>=",7),bitShift:Ht("<</>>/>>>",8),plusMin:new Ve("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ht("%",10),star:Ht("*",10),slash:Ht("/",10),starstar:new Ve("**",{beforeExpr:!0}),coalesce:Ht("??",1),_break:Re("break"),_case:Re("case",Kt),_catch:Re("catch"),_continue:Re("continue"),_debugger:Re("debugger"),_default:Re("default",Kt),_do:Re("do",{isLoop:!0,beforeExpr:!0}),_else:Re("else",Kt),_finally:Re("finally"),_for:Re("for",{isLoop:!0}),_function:Re("function",Et),_if:Re("if"),_return:Re("return",Kt),_switch:Re("switch"),_throw:Re("throw",Kt),_try:Re("try"),_var:Re("var"),_const:Re("const"),_while:Re("while",{isLoop:!0}),_with:Re("with"),_new:Re("new",{beforeExpr:!0,startsExpr:!0}),_this:Re("this",Et),_super:Re("super",Et),_class:Re("class",Et),_extends:Re("extends",Kt),_export:Re("export"),_import:Re("import",Et),_null:Re("null",Et),_true:Re("true",Et),_false:Re("false",Et),_in:Re("in",{beforeExpr:!0,binop:7}),_instanceof:Re("instanceof",{beforeExpr:!0,binop:7}),_typeof:Re("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Re("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Re("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ot=/\r\n?|\n|\u2028|\u2029/,UD=new RegExp(Ot.source,"g");function Hs(e){return e===10||e===13||e===8232||e===8233}function W2(e,t,n){n===void 0&&(n=e.length);for(var s=t;s<n;s++){var r=e.charCodeAt(s);if(Hs(r))return s<n-1&&r===13&&e.charCodeAt(s+1)===10?s+2:s+1}return-1}var N2=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,_t=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,T2=Object.prototype,JD=T2.hasOwnProperty,OD=T2.toString,Ks=Object.hasOwn||function(e,t){return JD.call(e,t)},Lc=Array.isArray||function(e){return OD.call(e)==="[object Array]"},Ec=Object.create(null);function Un(e){return Ec[e]||(Ec[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function zn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var QD=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Xr=function(e,t){this.line=e,this.column=t};Xr.prototype.offset=function(e){return new Xr(this.line,this.column+e)};var Ei=function(e,t,n){this.start=t,this.end=n,e.sourceFile!==null&&(this.source=e.sourceFile)};function I2(e,t){for(var n=1,s=0;;){var r=W2(e,s,t);if(r<0)return new Xr(n,t-s);++n,s=r}}var $a={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Rc=!1;function qD(e){var t={};for(var n in $a)t[n]=e&&Ks(e,n)?e[n]:$a[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Rc&&typeof console=="object"&&console.warn&&(Rc=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Lc(t.onToken)){var s=t.onToken;t.onToken=function(r){return s.push(r)}}return Lc(t.onComment)&&(t.onComment=$D(t,t.onComment)),t}function $D(e,t){return function(n,s,r,i,a,o){var u={type:n?"Block":"Line",value:s,start:r,end:i};e.locations&&(u.loc=new Ei(this,a,o)),e.ranges&&(u.range=[r,i]),t.push(u)}}var wr=1,_s=2,hu=4,Y2=8,H2=16,K2=32,du=64,_2=128,Rr=256,mu=wr|_s|Rr;function fu(e,t){return _s|(e?hu:0)|(t?Y2:0)}var hi=0,yu=1,Wn=2,j2=3,U2=4,J2=5,lt=function(e,t,n){this.options=e=qD(e),this.sourceFile=e.sourceFile,this.keywords=Un(HD[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var s="";e.allowReserved!==!0&&(s=fa[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(s+=" await")),this.reservedWords=Un(s);var r=(s?s+" ":"")+fa.strict;this.reservedWordsStrict=Un(r),this.reservedWordsStrictBind=Un(r+" "+fa.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ot).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=x.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(wr),this.regexpState=null,this.privateNameStack=[]},Xn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};lt.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};Xn.inFunction.get=function(){return(this.currentVarScope().flags&_s)>0};Xn.inGenerator.get=function(){return(this.currentVarScope().flags&Y2)>0&&!this.currentVarScope().inClassFieldInit};Xn.inAsync.get=function(){return(this.currentVarScope().flags&hu)>0&&!this.currentVarScope().inClassFieldInit};Xn.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Rr)return!1;if(t.flags&_s)return(t.flags&hu)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Xn.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&du)>0||n||this.options.allowSuperOutsideMethod};Xn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&_2)>0};Xn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Xn.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(_s|Rr))>0||n};Xn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Rr)>0};lt.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,s=0;s<e.length;s++)n=e[s](n);return n};lt.parse=function(e,t){return new this(t,e).parse()};lt.parseExpressionAt=function(e,t,n){var s=new this(n,e,t);return s.nextToken(),s.parseExpression()};lt.tokenizer=function(e,t){return new this(t,e)};Object.defineProperties(lt.prototype,Xn);var Lt=lt.prototype,eS=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Lt.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){_t.lastIndex=e,e+=_t.exec(this.input)[0].length;var t=eS.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){_t.lastIndex=e+t[0].length;var n=_t.exec(this.input),s=n.index+n[0].length,r=this.input.charAt(s);return r===";"||r==="}"||Ot.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(s+1)==="=")}e+=t[0].length,_t.lastIndex=e,e+=_t.exec(this.input)[0].length,this.input[e]===";"&&e++}};Lt.eat=function(e){return this.type===e?(this.next(),!0):!1};Lt.isContextual=function(e){return this.type===x.name&&this.value===e&&!this.containsEsc};Lt.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Lt.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Lt.canInsertSemicolon=function(){return this.type===x.eof||this.type===x.braceR||Ot.test(this.input.slice(this.lastTokEnd,this.start))};Lt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Lt.semicolon=function(){!this.eat(x.semi)&&!this.insertSemicolon()&&this.unexpected()};Lt.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Lt.expect=function(e){this.eat(e)||this.unexpected()};Lt.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Ri=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Lt.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Lt.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,s=e.doubleProto;if(!t)return n>=0||s>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),s>=0&&this.raiseRecoverable(s,"Redefinition of __proto__ property")};Lt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Lt.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var ie=lt.prototype;ie.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==x.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var s=0,r=Object.keys(this.undefinedExports);s<r.length;s+=1){var i=r[s];this.raiseRecoverable(this.undefinedExports[i].start,"Export '"+i+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var gu={kind:"loop"},tS={kind:"switch"};ie.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;_t.lastIndex=this.pos;var t=_t.exec(this.input),n=this.pos+t[0].length,s=this.input.charCodeAt(n);if(s===91||s===92)return!0;if(e)return!1;if(s===123||s>55295&&s<56320)return!0;if(Vn(s,!0)){for(var r=n+1;Bs(s=this.input.charCodeAt(r),!0);)++r;if(s===92||s>55295&&s<56320)return!0;var i=this.input.slice(n,r);if(!KD.test(i))return!0}return!1};ie.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;_t.lastIndex=this.pos;var e=_t.exec(this.input),t=this.pos+e[0].length,n;return!Ot.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Bs(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};ie.parseStatement=function(e,t,n){var s=this.type,r=this.startNode(),i;switch(this.isLet(e)&&(s=x._var,i="let"),s){case x._break:case x._continue:return this.parseBreakContinueStatement(r,s.keyword);case x._debugger:return this.parseDebuggerStatement(r);case x._do:return this.parseDoStatement(r);case x._for:return this.parseForStatement(r);case x._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case x._class:return e&&this.unexpected(),this.parseClass(r,!0);case x._if:return this.parseIfStatement(r);case x._return:return this.parseReturnStatement(r);case x._switch:return this.parseSwitchStatement(r);case x._throw:return this.parseThrowStatement(r);case x._try:return this.parseTryStatement(r);case x._const:case x._var:return i=i||this.value,e&&i!=="var"&&this.unexpected(),this.parseVarStatement(r,i);case x._while:return this.parseWhileStatement(r);case x._with:return this.parseWithStatement(r);case x.braceL:return this.parseBlock(!0,r);case x.semi:return this.parseEmptyStatement(r);case x._export:case x._import:if(this.options.ecmaVersion>10&&s===x._import){_t.lastIndex=this.pos;var a=_t.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===x._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var c=this.value,h=this.parseExpression();return s===x.name&&h.type==="Identifier"&&this.eat(x.colon)?this.parseLabeledStatement(r,c,h,e):this.parseExpressionStatement(r,h)}};ie.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(x.semi)||this.insertSemicolon()?e.label=null:this.type!==x.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var s=0;s<this.labels.length;++s){var r=this.labels[s];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return s===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};ie.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};ie.parseDoStatement=function(e){return this.next(),this.labels.push(gu),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(x._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(x.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};ie.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(gu),this.enterScope(0),this.expect(x.parenL),this.type===x.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===x._var||this.type===x._const||n){var s=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(s,!0,r),this.finishNode(s,"VariableDeclaration"),(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&s.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===x._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,s)):(t>-1&&this.unexpected(t),this.parseFor(e,s))}var i=this.isContextual("let"),a=!1,o=this.containsEsc,u=new Ri,c=this.start,h=t>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===x._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===x._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(h.start===c&&!o&&h.type==="Identifier"&&h.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),i&&a&&this.raise(h.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(h,!1,u),this.checkLValPattern(h),this.parseForIn(e,h)):(this.checkExpressionErrors(u,!0),t>-1&&this.unexpected(t),this.parseFor(e,h))};ie.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,dr|(n?0:eo),!1,t)};ie.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(x._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};ie.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(x.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};ie.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(x.braceL),this.labels.push(tS),this.enterScope(0);for(var t,n=!1;this.type!==x.braceR;)if(this.type===x._case||this.type===x._default){var s=this.type===x._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),s?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(x.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};ie.parseThrowStatement=function(e){return this.next(),Ot.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var nS=[];ie.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?K2:0),this.checkLValPattern(e,t?U2:Wn),this.expect(x.parenR),e};ie.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===x._catch){var t=this.startNode();this.next(),this.eat(x.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(x._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};ie.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};ie.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(gu),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};ie.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};ie.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};ie.parseLabeledStatement=function(e,t,n,s){for(var r=0,i=this.labels;r<i.length;r+=1){var a=i[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===x._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===e.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(s?s.indexOf("label")===-1?s+"label":s:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};ie.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};ie.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(x.braceL),e&&this.enterScope(0);this.type!==x.braceR;){var s=this.parseStatement(null);t.body.push(s)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};ie.parseFor=function(e,t){return e.init=t,this.expect(x.semi),e.test=this.type===x.semi?null:this.parseExpression(),this.expect(x.semi),e.update=this.type===x.parenR?null:this.parseExpression(),this.expect(x.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};ie.parseForIn=function(e,t){var n=this.type===x._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(x.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};ie.parseVar=function(e,t,n,s){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(x.eq)?r.init=this.parseMaybeAssign(t):!s&&n==="const"&&!(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!s&&r.id.type!=="Identifier"&&!(t&&(this.type===x._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(x.comma))break}return e};ie.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?yu:Wn,!1)};var dr=1,eo=2,O2=4;ie.parseFunction=function(e,t,n,s,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!s)&&(this.type===x.star&&t&eo&&this.unexpected(),e.generator=this.eat(x.star)),this.options.ecmaVersion>=8&&(e.async=!!s),t&dr&&(e.id=t&O2&&this.type!==x.name?null:this.parseIdent(),e.id&&!(t&eo)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?yu:Wn:j2));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fu(e.async,e.generator)),t&dr||(e.id=this.type===x.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&dr?"FunctionDeclaration":"FunctionExpression")};ie.parseFunctionParams=function(e){this.expect(x.parenL),e.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};ie.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var s=this.enterClassBody(),r=this.startNode(),i=!1;for(r.body=[],this.expect(x.braceL);this.type!==x.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(i&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),i=!0):a.key&&a.key.type==="PrivateIdentifier"&&sS(s,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};ie.parseClassElement=function(e){if(this.eat(x.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),s="",r=!1,i=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(x.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===x.star?o=!0:s="static"}if(n.static=o,!s&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===x.star)&&!this.canInsertSemicolon()?i=!0:s="async"),!s&&(t>=9||!i)&&this.eat(x.star)&&(r=!0),!s&&!i&&!r){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:s=u)}if(s?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=s,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===x.parenL||a!=="method"||r||i){var c=!n.static&&di(n,"constructor"),h=c&&e;c&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,r,i,h)}else this.parseClassField(n);return n};ie.isClassElementNameStart=function(){return this.type===x.name||this.type===x.privateId||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword};ie.parseClassElementName=function(e){this.type===x.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};ie.parseClassMethod=function(e,t,n,s){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&di(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var i=e.value=this.parseMethod(t,n,s);return e.kind==="get"&&i.params.length!==0&&this.raiseRecoverable(i.start,"getter should have no params"),e.kind==="set"&&i.params.length!==1&&this.raiseRecoverable(i.start,"setter should have exactly one param"),e.kind==="set"&&i.params[0].type==="RestElement"&&this.raiseRecoverable(i.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};ie.parseClassField=function(e){if(di(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&di(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(x.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};ie.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Rr|du);this.type!==x.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};ie.parseClassId=function(e,t){this.type===x.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Wn,!1)):(t===!0&&this.unexpected(),e.id=null)};ie.parseClassSuper=function(e){e.superClass=this.eat(x._extends)?this.parseExprSubscripts(null,!1):null};ie.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};ie.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var s=this.privateNameStack.length,r=s===0?null:this.privateNameStack[s-1],i=0;i<n.length;++i){var a=n[i];Ks(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function sS(e,t){var n=t.key.name,s=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),s==="iget"&&r==="iset"||s==="iset"&&r==="iget"||s==="sget"&&r==="sset"||s==="sset"&&r==="sget"?(e[n]="true",!1):s?!0:(e[n]=r,!1)}function di(e,t){var n=e.computed,s=e.key;return!n&&(s.type==="Identifier"&&s.name===t||s.type==="Literal"&&s.value===t)}ie.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==x.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};ie.parseExport=function(e,t){if(this.next(),this.eat(x.star))return this.parseExportAllDeclaration(e,t);if(this.eat(x._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==x.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,s=e.specifiers;n<s.length;n+=1){var r=s[n];this.checkUnreserved(r.local),this.checkLocalExport(r.local),r.local.type==="Literal"&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};ie.parseExportDeclaration=function(e){return this.parseStatement(null)};ie.parseExportDefaultDeclaration=function(){var e;if(this.type===x._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,dr|O2,!1,e)}else if(this.type===x._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var s=this.parseMaybeAssign();return this.semicolon(),s}};ie.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Ks(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};ie.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var s=0,r=t.properties;s<r.length;s+=1){var i=r[s];this.checkPatternExport(e,i)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};ie.checkVariableExport=function(e,t){if(e)for(var n=0,s=t;n<s.length;n+=1){var r=s[n];this.checkPatternExport(e,r.id)}};ie.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};ie.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};ie.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(x.braceL);!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;t.push(this.parseExportSpecifier(e))}return t};ie.parseImport=function(e){return this.next(),this.type===x.string?(e.specifiers=nS,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===x.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};ie.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Wn),this.finishNode(e,"ImportSpecifier")};ie.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Wn),this.finishNode(e,"ImportDefaultSpecifier")};ie.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Wn),this.finishNode(e,"ImportNamespaceSpecifier")};ie.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===x.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(x.comma)))return e;if(this.type===x.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(x.braceL);!this.eat(x.braceR);){if(t)t=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;e.push(this.parseImportSpecifier())}return e};ie.parseWithClause=function(){var e=[];if(!this.eat(x._with))return e;this.expect(x.braceL);for(var t={},n=!0;!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var s=this.parseImportAttribute(),r=s.key.type==="Identifier"?s.key.name:s.key.value;Ks(t,r)&&this.raiseRecoverable(s.key.start,"Duplicate attribute key '"+r+"'"),t[r]=!0,e.push(s)}return e};ie.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===x.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(x.colon),this.type!==x.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")};ie.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===x.string){var e=this.parseLiteral(this.value);return QD.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};ie.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};ie.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Qt=lt.prototype;Qt.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var s=0,r=e.properties;s<r.length;s+=1){var i=r[s];this.toAssignable(i,t),i.type==="RestElement"&&(i.argument.type==="ArrayPattern"||i.argument.type==="ObjectPattern")&&this.raise(i.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Qt.toAssignableList=function(e,t){for(var n=e.length,s=0;s<n;s++){var r=e[s];r&&this.toAssignable(r,t)}if(n){var i=e[n-1];this.options.ecmaVersion===6&&t&&i&&i.type==="RestElement"&&i.argument.type!=="Identifier"&&this.unexpected(i.argument.start)}return e};Qt.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Qt.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==x.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Qt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case x.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(x.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case x.braceL:return this.parseObj(!0)}return this.parseIdent()};Qt.parseBindingList=function(e,t,n,s){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(x.comma),t&&this.type===x.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===x.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else r.push(this.parseAssignableListItem(s))}return r};Qt.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Qt.parseBindingListItem=function(e){return e};Qt.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(x.eq))return n;var s=this.startNodeAt(e,t);return s.left=n,s.right=this.parseMaybeAssign(),this.finishNode(s,"AssignmentPattern")};Qt.checkLValSimple=function(e,t,n){t===void 0&&(t=hi);var s=t!==hi;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(s?"Binding ":"Assigning to ")+e.name+" in strict mode"),s&&(t===Wn&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Ks(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==J2&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":s&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return s&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(s?"Binding":"Assigning to")+" rvalue")}};Qt.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=hi),e.type){case"ObjectPattern":for(var s=0,r=e.properties;s<r.length;s+=1){var i=r[s];this.checkLValInnerPattern(i,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Qt.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=hi),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var nn=function(e,t,n,s,r){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=s,this.generator=!!r},nt={b_stat:new nn("{",!1),b_expr:new nn("{",!0),b_tmpl:new nn("${",!1),p_stat:new nn("(",!1),p_expr:new nn("(",!0),q_tmpl:new nn("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new nn("function",!1),f_expr:new nn("function",!0),f_expr_gen:new nn("function",!0,!1,null,!0),f_gen:new nn("function",!1,!1,null,!0)},js=lt.prototype;js.initialContext=function(){return[nt.b_stat]};js.curContext=function(){return this.context[this.context.length-1]};js.braceIsBlock=function(e){var t=this.curContext();return t===nt.f_expr||t===nt.f_stat?!0:e===x.colon&&(t===nt.b_stat||t===nt.b_expr)?!t.isExpr:e===x._return||e===x.name&&this.exprAllowed?Ot.test(this.input.slice(this.lastTokEnd,this.start)):e===x._else||e===x.semi||e===x.eof||e===x.parenR||e===x.arrow?!0:e===x.braceL?t===nt.b_stat:e===x._var||e===x._const||e===x.name?!1:!this.exprAllowed};js.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};js.updateContext=function(e){var t,n=this.type;n.keyword&&e===x.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};js.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};x.parenR.updateContext=x.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===nt.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};x.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?nt.b_stat:nt.b_expr),this.exprAllowed=!0};x.dollarBraceL.updateContext=function(){this.context.push(nt.b_tmpl),this.exprAllowed=!0};x.parenL.updateContext=function(e){var t=e===x._if||e===x._for||e===x._with||e===x._while;this.context.push(t?nt.p_stat:nt.p_expr),this.exprAllowed=!0};x.incDec.updateContext=function(){};x._function.updateContext=x._class.updateContext=function(e){e.beforeExpr&&e!==x._else&&!(e===x.semi&&this.curContext()!==nt.p_stat)&&!(e===x._return&&Ot.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===x.colon||e===x.braceL)&&this.curContext()===nt.b_stat)?this.context.push(nt.f_expr):this.context.push(nt.f_stat),this.exprAllowed=!1};x.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};x.backQuote.updateContext=function(){this.curContext()===nt.q_tmpl?this.context.pop():this.context.push(nt.q_tmpl),this.exprAllowed=!1};x.star.updateContext=function(e){if(e===x._function){var t=this.context.length-1;this.context[t]===nt.f_expr?this.context[t]=nt.f_expr_gen:this.context[t]=nt.f_gen}this.exprAllowed=!0};x.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==x.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Me=lt.prototype;Me.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var s=e.key,r;switch(s.type){case"Identifier":r=s.name;break;case"Literal":r=String(s.value);break;default:return}var i=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&i==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=s.start):this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;i==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[i],o&&this.raiseRecoverable(s.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[i]=!0}};Me.parseExpression=function(e,t){var n=this.start,s=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===x.comma){var i=this.startNodeAt(n,s);for(i.expressions=[r];this.eat(x.comma);)i.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(i,"SequenceExpression")}return r};Me.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var s=!1,r=-1,i=-1,a=-1;t?(r=t.parenthesizedAssign,i=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Ri,s=!0);var o=this.start,u=this.startLoc;(this.type===x.parenL||this.type===x.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var h=this.startNodeAt(o,u);return h.operator=this.value,this.type===x.eq&&(c=this.toAssignable(c,!1,t)),s||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===x.eq?this.checkLValPattern(c):this.checkLValSimple(c),h.left=c,this.next(),h.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(h,"AssignmentExpression")}else s&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),i>-1&&(t.trailingComma=i),c};Me.parseMaybeConditional=function(e,t){var n=this.start,s=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(x.question)){var i=this.startNodeAt(n,s);return i.test=r,i.consequent=this.parseMaybeAssign(),this.expect(x.colon),i.alternate=this.parseMaybeAssign(e),this.finishNode(i,"ConditionalExpression")}return r};Me.parseExprOps=function(e,t){var n=this.start,s=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,s,-1,e)};Me.parseExprOp=function(e,t,n,s,r){var i=this.type.binop;if(i!=null&&(!r||this.type!==x._in)&&i>s){var a=this.type===x.logicalOR||this.type===x.logicalAND,o=this.type===x.coalesce;o&&(i=x.logicalAND.binop);var u=this.value;this.next();var c=this.start,h=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,h,i,r),m=this.buildBinary(t,n,e,d,u,a||o);return(a&&this.type===x.coalesce||o&&(this.type===x.logicalOR||this.type===x.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(m,t,n,s,r)}return e};Me.buildBinary=function(e,t,n,s,r,i){s.type==="PrivateIdentifier"&&this.raise(s.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=s,this.finishNode(a,i?"LogicalExpression":"BinaryExpression")};Me.parseMaybeUnary=function(e,t,n,s){var r=this.start,i=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(s),t=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===x.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,s),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&Q2(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&to(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===x.privateId)(s||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==x._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,s),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(r,i);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(x.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,i,a,this.parseMaybeUnary(null,!1,!1,s),"**",!1);else return a};function Q2(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&Q2(e.expression)}function to(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&to(e.expression)||e.type==="ParenthesizedExpression"&&to(e.expression)}Me.parseExprSubscripts=function(e,t){var n=this.start,s=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var i=this.parseSubscripts(r,n,s,!1,t);return e&&i.type==="MemberExpression"&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1),e.trailingComma>=i.start&&(e.trailingComma=-1)),i};Me.parseSubscripts=function(e,t,n,s,r){for(var i=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,s,i,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(t,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}e=o}};Me.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(x.arrow)};Me.parseSubscriptAsyncArrow=function(e,t,n,s){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,s)};Me.parseSubscript=function(e,t,n,s,r,i,a){var o=this.options.ecmaVersion>=11,u=o&&this.eat(x.questionDot);s&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(x.bracketL);if(c||u&&this.type!==x.parenL&&this.type!==x.backQuote||this.eat(x.dot)){var h=this.startNodeAt(t,n);h.object=e,c?(h.property=this.parseExpression(),this.expect(x.bracketR)):this.type===x.privateId&&e.type!=="Super"?h.property=this.parsePrivateIdent():h.property=this.parseIdent(this.options.allowReserved!=="never"),h.computed=!!c,o&&(h.optional=u),e=this.finishNode(h,"MemberExpression")}else if(!s&&this.eat(x.parenL)){var d=new Ri,m=this.yieldPos,g=this.awaitPos,y=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var G=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1,d);if(r&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=m,this.awaitPos=g,this.awaitIdentPos=y,this.parseSubscriptAsyncArrow(t,n,G,a);this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=g||this.awaitPos,this.awaitIdentPos=y||this.awaitIdentPos;var X=this.startNodeAt(t,n);X.callee=e,X.arguments=G,o&&(X.optional=u),e=this.finishNode(X,"CallExpression")}else if(this.type===x.backQuote){(u||i)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var D=this.startNodeAt(t,n);D.tag=e,D.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(D,"TaggedTemplateExpression")}return e};Me.parseExprAtom=function(e,t,n){this.type===x.slash&&this.readRegexp();var s,r=this.potentialArrowAt===this.start;switch(this.type){case x._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),s=this.startNode(),this.next(),this.type===x.parenL&&!this.allowDirectSuper&&this.raise(s.start,"super() call outside constructor of a subclass"),this.type!==x.dot&&this.type!==x.bracketL&&this.type!==x.parenL&&this.unexpected(),this.finishNode(s,"Super");case x._this:return s=this.startNode(),this.next(),this.finishNode(s,"ThisExpression");case x.name:var i=this.start,a=this.startLoc,o=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(x._function))return this.overrideContext(nt.f_expr),this.parseFunction(this.startNodeAt(i,a),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(x.arrow))return this.parseArrowExpression(this.startNodeAt(i,a),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===x.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(x.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,a),[u],!0,t)}return u;case x.regexp:var c=this.value;return s=this.parseLiteral(c.value),s.regex={pattern:c.pattern,flags:c.flags},s;case x.num:case x.string:return this.parseLiteral(this.value);case x._null:case x._true:case x._false:return s=this.startNode(),s.value=this.type===x._null?null:this.type===x._true,s.raw=this.type.keyword,this.next(),this.finishNode(s,"Literal");case x.parenL:var h=this.start,d=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=h),e.parenthesizedBind<0&&(e.parenthesizedBind=h)),d;case x.bracketL:return s=this.startNode(),this.next(),s.elements=this.parseExprList(x.bracketR,!0,!0,e),this.finishNode(s,"ArrayExpression");case x.braceL:return this.overrideContext(nt.b_expr),this.parseObj(!1,e);case x._function:return s=this.startNode(),this.next(),this.parseFunction(s,0);case x._class:return this.parseClass(this.startNode(),!1);case x._new:return this.parseNew();case x.backQuote:return this.parseTemplate();case x._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Me.parseExprAtomDefault=function(){this.unexpected()};Me.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===x.parenL&&!e)return this.parseDynamicImport(t);if(this.type===x.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Me.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(x.parenR)?e.options=null:(this.expect(x.comma),this.afterTrailingComma(x.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(x.parenR)||(this.expect(x.comma),this.afterTrailingComma(x.parenR)||this.unexpected())));else if(!this.eat(x.parenR)){var t=this.start;this.eat(x.comma)&&this.eat(x.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Me.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Me.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Me.parseParenExpression=function(){this.expect(x.parenL);var e=this.parseExpression();return this.expect(x.parenR),e};Me.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Me.parseParenAndDistinguishExpression=function(e,t){var n=this.start,s=this.startLoc,r,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,u=[],c=!0,h=!1,d=new Ri,m=this.yieldPos,g=this.awaitPos,y;for(this.yieldPos=0,this.awaitPos=0;this.type!==x.parenR;)if(c?c=!1:this.expect(x.comma),i&&this.afterTrailingComma(x.parenR,!0)){h=!0;break}else if(this.type===x.ellipsis){y=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var G=this.lastTokEnd,X=this.lastTokEndLoc;if(this.expect(x.parenR),e&&this.shouldParseArrow(u)&&this.eat(x.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=g,this.parseParenArrowList(n,s,u,t);(!u.length||h)&&this.unexpected(this.lastTokStart),y&&this.unexpected(y),this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=g||this.awaitPos,u.length>1?(r=this.startNodeAt(a,o),r.expressions=u,this.finishNodeAt(r,"SequenceExpression",G,X)):r=u[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var D=this.startNodeAt(n,s);return D.expression=r,this.finishNode(D,"ParenthesizedExpression")}else return r};Me.parseParenItem=function(e){return e};Me.parseParenArrowList=function(e,t,n,s){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,s)};var rS=[];Me.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===x.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var s=this.start,r=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),s,r,!0,!1),this.eat(x.parenL)?e.arguments=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1):e.arguments=rS,this.finishNode(e,"NewExpression")};Me.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===x.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===x.backQuote,this.finishNode(n,"TemplateElement")};Me.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var s=this.parseTemplateElement({isTagged:t});for(n.quasis=[s];!s.tail;)this.type===x.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(x.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(x.braceR),n.quasis.push(s=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Me.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===x.name||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===x.star)&&!Ot.test(this.input.slice(this.lastTokEnd,this.start))};Me.parseObj=function(e,t){var n=this.startNode(),s=!0,r={};for(n.properties=[],this.next();!this.eat(x.braceR);){if(s)s=!1;else if(this.expect(x.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(x.braceR))break;var i=this.parseProperty(e,t);e||this.checkPropClash(i,r,t),n.properties.push(i)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Me.parseProperty=function(e,t){var n=this.startNode(),s,r,i,a;if(this.options.ecmaVersion>=9&&this.eat(x.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===x.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(s=this.eat(x.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!s&&this.isAsyncProp(n)?(r=!0,s=this.options.ecmaVersion>=9&&this.eat(x.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,s,r,i,a,t,o),this.finishNode(n,"Property")};Me.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Me.parsePropertyValue=function(e,t,n,s,r,i,a,o){(n||s)&&this.type===x.colon&&this.unexpected(),this.eat(x.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===x.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,s)):!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==x.comma&&this.type!==x.braceR&&this.type!==x.eq?((n||s)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||s)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,i,this.copyNode(e.key)):this.type===x.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,i,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Me.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(x.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(x.bracketR),e.key;e.computed=!1}return e.key=this.type===x.num||this.type===x.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Me.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Me.parseMethod=function(e,t,n){var s=this.startNode(),r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(s),this.options.ecmaVersion>=6&&(s.generator=e),this.options.ecmaVersion>=8&&(s.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fu(t,s.generator)|du|(n?_2:0)),this.expect(x.parenL),s.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(s,!1,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(s,"FunctionExpression")};Me.parseArrowExpression=function(e,t,n,s){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(fu(n,!1)|H2),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,s),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};Me.parseFunctionBody=function(e,t,n,s){var r=t&&this.type!==x.braceL,i=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(s),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!i||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!i&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,J2),e.body=this.parseBlock(!1,void 0,a&&!i),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Me.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var s=n[t];if(s.type!=="Identifier")return!1}return!0};Me.checkParams=function(e,t){for(var n=Object.create(null),s=0,r=e.params;s<r.length;s+=1){var i=r[s];this.checkLValInnerPattern(i,yu,t?null:n)}};Me.parseExprList=function(e,t,n,s){for(var r=[],i=!0;!this.eat(e);){if(i)i=!1;else if(this.expect(x.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===x.comma?a=null:this.type===x.ellipsis?(a=this.parseSpread(s),s&&this.type===x.comma&&s.trailingComma<0&&(s.trailingComma=this.start)):a=this.parseMaybeAssign(!1,s),r.push(a)}return r};Me.checkUnreserved=function(e){var t=e.start,n=e.end,s=e.name;if(this.inGenerator&&s==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&s==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&s==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(s==="arguments"||s==="await")&&this.raise(t,"Cannot use "+s+" in class static initialization block"),this.keywords.test(s)&&this.raise(t,"Unexpected keyword '"+s+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(s)&&(!this.inAsync&&s==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+s+"' is reserved"))}};Me.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Me.parseIdentNode=function(){var e=this.startNode();return this.type===x.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=x.name):this.unexpected(),e};Me.parsePrivateIdent=function(){var e=this.startNode();return this.type===x.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Me.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===x.semi||this.canInsertSemicolon()||this.type!==x.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(x.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Me.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var mi=lt.prototype;mi.raise=function(e,t){var n=I2(this.input,e);t+=" ("+n.line+":"+n.column+")";var s=new SyntaxError(t);throw s.pos=e,s.loc=n,s.raisedAt=this.pos,s};mi.raiseRecoverable=mi.raise;mi.curPosition=function(){if(this.options.locations)return new Xr(this.curLine,this.pos-this.lineStart)};var ts=lt.prototype,iS=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ts.enterScope=function(e){this.scopeStack.push(new iS(e))};ts.exitScope=function(){this.scopeStack.pop()};ts.treatFunctionsAsVarInScope=function(e){return e.flags&_s||!this.inModule&&e.flags&wr};ts.declareName=function(e,t,n){var s=!1;if(t===Wn){var r=this.currentScope();s=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&wr&&delete this.undefinedExports[e]}else if(t===U2){var i=this.currentScope();i.lexical.push(e)}else if(t===j2){var a=this.currentScope();this.treatFunctionsAsVar?s=a.lexical.indexOf(e)>-1:s=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(u.flags&K2&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){s=!0;break}if(u.var.push(e),this.inModule&&u.flags&wr&&delete this.undefinedExports[e],u.flags&mu)break}s&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};ts.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};ts.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};ts.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&mu)return t}};ts.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&mu&&!(t.flags&H2))return t}};var ki=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new Ei(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},kr=lt.prototype;kr.startNode=function(){return new ki(this,this.start,this.startLoc)};kr.startNodeAt=function(e,t){return new ki(this,e,t)};function q2(e,t,n,s){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=s),this.options.ranges&&(e.range[1]=n),e}kr.finishNode=function(e,t){return q2.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};kr.finishNodeAt=function(e,t,n,s){return q2.call(this,e,t,n,s)};kr.copyNode=function(e){var t=new ki(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var aS="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",$2="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",e3=$2+" Extended_Pictographic",t3=e3,n3=t3+" EBase EComp EMod EPres ExtPict",s3=n3,oS=s3,uS={9:$2,10:e3,11:t3,12:n3,13:s3,14:oS},cS="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",lS={9:"",10:"",11:"",12:"",13:"",14:cS},kc="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",r3="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",i3=r3+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",a3=i3+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",o3=a3+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",u3=o3+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",pS=u3+" "+aS,hS={9:r3,10:i3,11:a3,12:o3,13:u3,14:pS},c3={};function dS(e){var t=c3[e]={binary:Un(uS[e]+" "+kc),binaryOfStrings:Un(lS[e]),nonBinary:{General_Category:Un(kc),Script:Un(hS[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var ga=0,Vc=[9,10,11,12,13,14];ga<Vc.length;ga+=1){var mS=Vc[ga];dS(mS)}var ne=lt.prototype,fi=function(e,t){this.parent=e,this.base=t||this};fi.prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var n=e;n;n=n.parent)if(t.base===n.base&&t!==n)return!0;return!1};fi.prototype.sibling=function(){return new fi(this.parent,this.base)};var wn=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=c3[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};wn.prototype.reset=function(e,t,n){var s=n.indexOf("v")!==-1,r=n.indexOf("u")!==-1;this.start=e|0,this.source=t+"",this.flags=n,s&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)};wn.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};wn.prototype.at=function(e,t){t===void 0&&(t=!1);var n=this.source,s=n.length;if(e>=s)return-1;var r=n.charCodeAt(e);if(!(t||this.switchU)||r<=55295||r>=57344||e+1>=s)return r;var i=n.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r};wn.prototype.nextIndex=function(e,t){t===void 0&&(t=!1);var n=this.source,s=n.length;if(e>=s)return s;var r=n.charCodeAt(e),i;return!(t||this.switchU)||r<=55295||r>=57344||e+1>=s||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2};wn.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};wn.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};wn.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};wn.prototype.eat=function(e,t){return t===void 0&&(t=!1),this.current(t)===e?(this.advance(t),!0):!1};wn.prototype.eatChars=function(e,t){t===void 0&&(t=!1);for(var n=this.pos,s=0,r=e;s<r.length;s+=1){var i=r[s],a=this.at(n,t);if(a===-1||a!==i)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0};ne.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,s=!1,r=!1,i=0;i<n.length;i++){var a=n.charAt(i);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,i+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),a==="u"&&(s=!0),a==="v"&&(r=!0)}this.options.ecmaVersion>=15&&s&&r&&this.raise(e.start,"Invalid regular expression flag")};function fS(e){for(var t in e)return!0;return!1}ne.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&fS(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};ne.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var s=n[t];e.groupNames[s]||e.raise("Invalid named capture referenced")}};ne.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new fi(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};ne.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};ne.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};ne.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};ne.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};ne.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};ne.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var s=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(s=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<s&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};ne.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};ne.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};ne.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),s=e.eat(45);if(n||s){for(var r=0;r<n.length;r++){var i=n.charAt(r);n.indexOf(i,r+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(s){var a=this.regexp_eatModifiers(e);!n&&!a&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var u=a.charAt(o);(a.indexOf(u,o+1)>-1||n.indexOf(u)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1};ne.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};ne.regexp_eatModifiers=function(e){for(var t="",n=0;(n=e.current())!==-1&&yS(n);)t+=zn(n),e.advance();return t};function yS(e){return e===105||e===109||e===115}ne.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};ne.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};ne.regexp_eatSyntaxCharacter=function(e){var t=e.current();return l3(t)?(e.lastIntValue=t,e.advance(),!0):!1};function l3(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}ne.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!l3(n);)e.advance();return e.pos!==t};ne.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};ne.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var s=0,r=n;s<r.length;s+=1){var i=r[s];i.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};ne.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};ne.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=zn(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=zn(e.lastIntValue);return!0}return!1};ne.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,s=e.current(n);return e.advance(n),s===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(s=e.lastIntValue),gS(s)?(e.lastIntValue=s,!0):(e.pos=t,!1)};function gS(e){return Vn(e,!0)||e===36||e===95}ne.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,s=e.current(n);return e.advance(n),s===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(s=e.lastIntValue),bS(s)?(e.lastIntValue=s,!0):(e.pos=t,!1)};function bS(e){return Bs(e,!0)||e===36||e===95||e===8204||e===8205}ne.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};ne.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};ne.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};ne.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};ne.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};ne.regexp_eatZero=function(e){return e.current()===48&&!Vi(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};ne.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};ne.regexp_eatControlLetter=function(e){var t=e.current();return p3(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function p3(e){return e>=65&&e<=90||e>=97&&e<=122}ne.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,s=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(s&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(s&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&MS(e.lastIntValue))return!0;s&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function MS(e){return e>=0&&e<=1114111}ne.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};ne.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var h3=0,Bn=1,jt=2;ne.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(xS(t))return e.lastIntValue=-1,e.advance(),Bn;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var s;if(e.eat(123)&&(s=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&s===jt&&e.raise("Invalid property name"),s;e.raise("Invalid property name")}return h3};function xS(e){return e===100||e===68||e===115||e===83||e===119||e===87}ne.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var s=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,s),Bn}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r)}return h3};ne.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Ks(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};ne.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Bn;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return jt;e.raise("Invalid property name")};ne.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";d3(t=e.current());)e.lastStringValue+=zn(t),e.advance();return e.lastStringValue!==""};function d3(e){return p3(e)||e===95}ne.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";GS(t=e.current());)e.lastStringValue+=zn(t),e.advance();return e.lastStringValue!==""};function GS(e){return d3(e)||Vi(e)}ne.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};ne.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===jt&&e.raise("Negated character class may contain strings"),!0}return!1};ne.regexp_classContents=function(e){return e.current()===93?Bn:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Bn)};ne.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};ne.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||y3(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var s=e.current();return s!==93?(e.lastIntValue=s,e.advance(),!0):!1};ne.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};ne.regexp_classSetExpression=function(e){var t=Bn,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===jt&&(t=jt);for(var s=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==jt&&(t=Bn);continue}e.raise("Invalid character in character class")}if(s!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(s!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===jt&&(t=jt)}};ne.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var s=e.lastIntValue;return n!==-1&&s!==-1&&n>s&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};ne.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Bn:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};ne.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),s=this.regexp_classContents(e);if(e.eat(93))return n&&s===jt&&e.raise("Negated character class may contain strings"),s;e.pos=t}if(e.eat(92)){var r=this.regexp_eatCharacterClassEscape(e);if(r)return r;e.pos=t}return null};ne.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};ne.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===jt&&(t=jt);return t};ne.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Bn:jt};ne.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&CS(n)||PS(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function CS(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function PS(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}ne.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return vS(t)?(e.lastIntValue=t,e.advance(),!0):!1};function vS(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}ne.regexp_eatClassControlLetter=function(e){var t=e.current();return Vi(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};ne.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};ne.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Vi(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Vi(e){return e>=48&&e<=57}ne.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;m3(n=e.current());)e.lastIntValue=16*e.lastIntValue+f3(n),e.advance();return e.pos!==t};function m3(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function f3(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}ne.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};ne.regexp_eatOctalDigit=function(e){var t=e.current();return y3(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function y3(e){return e>=48&&e<=55}ne.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var s=0;s<t;++s){var r=e.current();if(!m3(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+f3(r),e.advance()}return!0};var bu=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new Ei(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Le=lt.prototype;Le.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new bu(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Le.getToken=function(){return this.next(),new bu(this)};typeof Symbol<"u"&&(Le[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===x.eof,value:t}}}});Le.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(x.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Le.readToken=function(e){return Vn(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Le.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Le.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var s=void 0,r=t;(s=W2(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=s;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Le.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),s=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Hs(s);)s=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Le.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&N2.test(String.fromCharCode(e)))++this.pos;else break e}}};Le.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Le.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(x.ellipsis)):(++this.pos,this.finishToken(x.dot))};Le.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(x.assign,2):this.finishOp(x.slash,1)};Le.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,s=e===42?x.star:x.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,s=x.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(x.assign,n+1):this.finishOp(s,n)};Le.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(x.assign,3)}return this.finishOp(e===124?x.logicalOR:x.logicalAND,2)}return t===61?this.finishOp(x.assign,2):this.finishOp(e===124?x.bitwiseOR:x.bitwiseAND,1)};Le.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(x.assign,2):this.finishOp(x.bitwiseXOR,1)};Le.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ot.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(x.incDec,2):t===61?this.finishOp(x.assign,2):this.finishOp(x.plusMin,1)};Le.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(x.assign,n+1):this.finishOp(x.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(x.relational,n))};Le.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(x.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(x.arrow)):this.finishOp(e===61?x.eq:x.prefix,1)};Le.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(x.questionDot,2)}if(t===63){if(e>=12){var s=this.input.charCodeAt(this.pos+2);if(s===61)return this.finishOp(x.assign,3)}return this.finishOp(x.coalesce,2)}}return this.finishOp(x.question,1)};Le.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Vn(t,!0)||t===92))return this.finishToken(x.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+zn(t)+"'")};Le.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(x.parenL);case 41:return++this.pos,this.finishToken(x.parenR);case 59:return++this.pos,this.finishToken(x.semi);case 44:return++this.pos,this.finishToken(x.comma);case 91:return++this.pos,this.finishToken(x.bracketL);case 93:return++this.pos,this.finishToken(x.bracketR);case 123:return++this.pos,this.finishToken(x.braceL);case 125:return++this.pos,this.finishToken(x.braceR);case 58:return++this.pos,this.finishToken(x.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(x.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(x.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+zn(e)+"'")};Le.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Le.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var s=this.input.charAt(this.pos);if(Ot.test(s)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(s==="[")t=!0;else if(s==="]"&&t)t=!1;else if(s==="/"&&!t)break;e=s==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var i=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(i);var o=this.regexpState||(this.regexpState=new wn(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(r,a)}catch{}return this.finishToken(x.regexp,{pattern:r,flags:a,value:u})};Le.readInt=function(e,t,n){for(var s=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,i=this.pos,a=0,o=0,u=0,c=t??1/0;u<c;++u,++this.pos){var h=this.input.charCodeAt(this.pos),d=void 0;if(s&&h===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=h;continue}if(h>=97?d=h-97+10:h>=65?d=h-65+10:h>=48&&h<=57?d=h-48:d=1/0,d>=e)break;o=h,a=a*e+d}return s&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||t!=null&&this.pos-i!==t?null:a};function XS(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function g3(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Le.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=g3(this.input.slice(t,this.pos)),++this.pos):Vn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,n)};Le.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var s=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&s===110){var r=g3(this.input.slice(t,this.pos));return++this.pos,Vn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),s===46&&!n&&(++this.pos,this.readInt(10),s=this.input.charCodeAt(this.pos)),(s===69||s===101)&&!n&&(s=this.input.charCodeAt(++this.pos),(s===43||s===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Vn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=XS(this.input.slice(t,this.pos),n);return this.finishToken(x.num,i)};Le.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Le.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var s=this.input.charCodeAt(this.pos);if(s===e)break;s===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):s===8232||s===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Hs(s)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(x.string,t)};var b3={};Le.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===b3)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Le.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw b3;this.raise(e,t)};Le.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===x.template||this.type===x.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(x.dollarBraceL)):(++this.pos,this.finishToken(x.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(x.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Hs(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Le.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(x.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Le.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return zn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var s=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(s,8);return r>255&&(s=s.slice(0,-1),r=parseInt(s,8)),this.pos+=s.length-1,t=this.input.charCodeAt(this.pos),(s!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-s.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Hs(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Le.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Le.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,s=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(Bs(r,s))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var i=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?Vn:Bs)(a,s)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=zn(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Le.readWord=function(){var e=this.readWord1(),t=x.name;return this.keywords.test(e)&&(t=pu[e]),this.finishToken(t,e)};var wS="8.14.0";lt.acorn={Parser:lt,version:wS,defaultOptions:$a,Position:Xr,SourceLocation:Ei,getLineInfo:I2,Node:ki,TokenType:Ve,tokTypes:x,keywordTypes:pu,TokContext:nn,tokContexts:nt,isIdentifierChar:Bs,isIdentifierStart:Vn,Token:bu,isNewLine:Hs,lineBreak:Ot,lineBreakG:UD,nonASCIIwhitespace:N2};function ZS(e,t){return lt.parse(e,t)}var FS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function AS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return e[s]}})}),n}var zc={},Bc={},Wc;function DS(){return Wc||(Wc=1,(function(e){(function t(n){var s,r,i,a,o,u;function c(Z){var E={},S,V;for(S in Z)Z.hasOwnProperty(S)&&(V=Z[S],typeof V=="object"&&V!==null?E[S]=c(V):E[S]=V);return E}function h(Z,E){var S,V,T,K;for(V=Z.length,T=0;V;)S=V>>>1,K=T+S,E(Z[K])?V=S:(T=K+1,V-=S+1);return T}s={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},a={},o={},u={},r={Break:a,Skip:o,Remove:u};function d(Z,E){this.parent=Z,this.key=E}d.prototype.replace=function(Z){this.parent[this.key]=Z},d.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function m(Z,E,S,V){this.node=Z,this.path=E,this.wrap=S,this.ref=V}function g(){}g.prototype.path=function(){var Z,E,S,V,T,K;function J(Y,Q){if(Array.isArray(Q))for(S=0,V=Q.length;S<V;++S)Y.push(Q[S]);else Y.push(Q)}if(!this.__current.path)return null;for(T=[],Z=2,E=this.__leavelist.length;Z<E;++Z)K=this.__leavelist[Z],J(T,K.path);return J(T,this.__current.path),T},g.prototype.type=function(){var Z=this.current();return Z.type||this.__current.wrap},g.prototype.parents=function(){var Z,E,S;for(S=[],Z=1,E=this.__leavelist.length;Z<E;++Z)S.push(this.__leavelist[Z].node);return S},g.prototype.current=function(){return this.__current.node},g.prototype.__execute=function(Z,E){var S,V;return V=void 0,S=this.__current,this.__current=E,this.__state=null,Z&&(V=Z.call(this,E.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=S,V},g.prototype.notify=function(Z){this.__state=Z},g.prototype.skip=function(){this.notify(o)},g.prototype.break=function(){this.notify(a)},g.prototype.remove=function(){this.notify(u)},g.prototype.__initialize=function(Z,E){this.visitor=E,this.root=Z,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,E.fallback==="iteration"?this.__fallback=Object.keys:typeof E.fallback=="function"&&(this.__fallback=E.fallback),this.__keys=i,E.keys&&(this.__keys=Object.assign(Object.create(this.__keys),E.keys))};function y(Z){return Z==null?!1:typeof Z=="object"&&typeof Z.type=="string"}function G(Z,E){return(Z===s.ObjectExpression||Z===s.ObjectPattern)&&E==="properties"}function X(Z,E){for(var S=Z.length-1;S>=0;--S)if(Z[S].node===E)return!0;return!1}g.prototype.traverse=function(Z,E){var S,V,T,K,J,Y,Q,ee,ye,re,ge,pe;for(this.__initialize(Z,E),pe={},S=this.__worklist,V=this.__leavelist,S.push(new m(Z,null,null,null)),V.push(new m(null,null,null,null));S.length;){if(T=S.pop(),T===pe){if(T=V.pop(),Y=this.__execute(E.leave,T),this.__state===a||Y===a)return;continue}if(T.node){if(Y=this.__execute(E.enter,T),this.__state===a||Y===a)return;if(S.push(pe),V.push(T),this.__state===o||Y===o)continue;if(K=T.node,J=K.type||T.wrap,re=this.__keys[J],!re)if(this.__fallback)re=this.__fallback(K);else throw new Error("Unknown node type "+J+".");for(ee=re.length;(ee-=1)>=0;)if(Q=re[ee],ge=K[Q],!!ge){if(Array.isArray(ge)){for(ye=ge.length;(ye-=1)>=0;)if(ge[ye]&&!X(V,ge[ye])){if(G(J,re[ee]))T=new m(ge[ye],[Q,ye],"Property",null);else if(y(ge[ye]))T=new m(ge[ye],[Q,ye],null,null);else continue;S.push(T)}}else if(y(ge)){if(X(V,ge))continue;S.push(new m(ge,Q,null,null))}}}}},g.prototype.replace=function(Z,E){var S,V,T,K,J,Y,Q,ee,ye,re,ge,pe,Ke;function pt(ut){var z,xe,it,ze;if(ut.ref.remove()){for(xe=ut.ref.key,ze=ut.ref.parent,z=S.length;z--;)if(it=S[z],it.ref&&it.ref.parent===ze){if(it.ref.key<xe)break;--it.ref.key}}}for(this.__initialize(Z,E),ge={},S=this.__worklist,V=this.__leavelist,pe={root:Z},Y=new m(Z,null,null,new d(pe,"root")),S.push(Y),V.push(Y);S.length;){if(Y=S.pop(),Y===ge){if(Y=V.pop(),J=this.__execute(E.leave,Y),J!==void 0&&J!==a&&J!==o&&J!==u&&Y.ref.replace(J),(this.__state===u||J===u)&&pt(Y),this.__state===a||J===a)return pe.root;continue}if(J=this.__execute(E.enter,Y),J!==void 0&&J!==a&&J!==o&&J!==u&&(Y.ref.replace(J),Y.node=J),(this.__state===u||J===u)&&(pt(Y),Y.node=null),this.__state===a||J===a)return pe.root;if(T=Y.node,!!T&&(S.push(ge),V.push(Y),!(this.__state===o||J===o))){if(K=T.type||Y.wrap,ye=this.__keys[K],!ye)if(this.__fallback)ye=this.__fallback(T);else throw new Error("Unknown node type "+K+".");for(Q=ye.length;(Q-=1)>=0;)if(Ke=ye[Q],re=T[Ke],!!re)if(Array.isArray(re)){for(ee=re.length;(ee-=1)>=0;)if(re[ee]){if(G(K,ye[Q]))Y=new m(re[ee],[Ke,ee],"Property",new d(re,ee));else if(y(re[ee]))Y=new m(re[ee],[Ke,ee],null,new d(re,ee));else continue;S.push(Y)}}else y(re)&&S.push(new m(re,Ke,null,new d(T,Ke)))}}return pe.root};function D(Z,E){var S=new g;return S.traverse(Z,E)}function L(Z,E){var S=new g;return S.replace(Z,E)}function B(Z,E){var S;return S=h(E,function(V){return V.range[0]>Z.range[0]}),Z.extendedRange=[Z.range[0],Z.range[1]],S!==E.length&&(Z.extendedRange[1]=E[S].range[0]),S-=1,S>=0&&(Z.extendedRange[0]=E[S].range[1]),Z}function A(Z,E,S){var V=[],T,K,J,Y;if(!Z.range)throw new Error("attachComments needs range information");if(!S.length){if(E.length){for(J=0,K=E.length;J<K;J+=1)T=c(E[J]),T.extendedRange=[0,Z.range[0]],V.push(T);Z.leadingComments=V}return Z}for(J=0,K=E.length;J<K;J+=1)V.push(B(c(E[J]),S));return Y=0,D(Z,{enter:function(Q){for(var ee;Y<V.length&&(ee=V[Y],!(ee.extendedRange[1]>Q.range[0]));)ee.extendedRange[1]===Q.range[0]?(Q.leadingComments||(Q.leadingComments=[]),Q.leadingComments.push(ee),V.splice(Y,1)):Y+=1;if(Y===V.length)return r.Break;if(V[Y].extendedRange[0]>Q.range[1])return r.Skip}}),Y=0,D(Z,{leave:function(Q){for(var ee;Y<V.length&&(ee=V[Y],!(Q.range[1]<ee.extendedRange[0]));)Q.range[1]===ee.extendedRange[0]?(Q.trailingComments||(Q.trailingComments=[]),Q.trailingComments.push(ee),V.splice(Y,1)):Y+=1;if(Y===V.length)return r.Break;if(V[Y].extendedRange[0]>Q.range[1])return r.Skip}}),Z}return n.Syntax=s,n.traverse=D,n.replace=L,n.attachComments=A,n.VisitorKeys=i,n.VisitorOption=r,n.Controller=g,n.cloneEnvironment=function(){return t({})},n})(e)})(Bc)),Bc}var Qr={},Nc={exports:{}},Tc;function SS(){return Tc||(Tc=1,(function(){function e(a){if(a==null)return!1;switch(a.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function t(a){if(a==null)return!1;switch(a.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function n(a){if(a==null)return!1;switch(a.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function s(a){return n(a)||a!=null&&a.type==="FunctionDeclaration"}function r(a){switch(a.type){case"IfStatement":return a.alternate!=null?a.alternate:a.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return a.body}return null}function i(a){var o;if(a.type!=="IfStatement"||a.alternate==null)return!1;o=a.consequent;do{if(o.type==="IfStatement"&&o.alternate==null)return!0;o=r(o)}while(o);return!1}Nc.exports={isExpression:e,isStatement:n,isIterationStatement:t,isSourceElement:s,isProblematicIfStatement:i,trailingStatement:r}})()),Nc.exports}var Ic={exports:{}},Yc;function x3(){return Yc||(Yc=1,(function(){var e,t,n,s,r,i;t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function a(X){return 48<=X&&X<=57}function o(X){return 48<=X&&X<=57||97<=X&&X<=102||65<=X&&X<=70}function u(X){return X>=48&&X<=55}n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(X){return X===32||X===9||X===11||X===12||X===160||X>=5760&&n.indexOf(X)>=0}function h(X){return X===10||X===13||X===8232||X===8233}function d(X){if(X<=65535)return String.fromCharCode(X);var D=String.fromCharCode(Math.floor((X-65536)/1024)+55296),L=String.fromCharCode((X-65536)%1024+56320);return D+L}for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(r=new Array(128),i=0;i<128;++i)r[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function m(X){return X<128?s[X]:t.NonAsciiIdentifierStart.test(d(X))}function g(X){return X<128?r[X]:t.NonAsciiIdentifierPart.test(d(X))}function y(X){return X<128?s[X]:e.NonAsciiIdentifierStart.test(d(X))}function G(X){return X<128?r[X]:e.NonAsciiIdentifierPart.test(d(X))}Ic.exports={isDecimalDigit:a,isHexDigit:o,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:h,isIdentifierStartES5:m,isIdentifierPartES5:g,isIdentifierStartES6:y,isIdentifierPartES6:G}})()),Ic.exports}var Hc={exports:{}},Kc;function LS(){return Kc||(Kc=1,(function(){var e=x3();function t(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function n(m,g){return!g&&m==="yield"?!1:s(m,g)}function s(m,g){if(g&&t(m))return!0;switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}}function r(m,g){return m==="null"||m==="true"||m==="false"||n(m,g)}function i(m,g){return m==="null"||m==="true"||m==="false"||s(m,g)}function a(m){return m==="eval"||m==="arguments"}function o(m){var g,y,G;if(m.length===0||(G=m.charCodeAt(0),!e.isIdentifierStartES5(G)))return!1;for(g=1,y=m.length;g<y;++g)if(G=m.charCodeAt(g),!e.isIdentifierPartES5(G))return!1;return!0}function u(m,g){return(m-55296)*1024+(g-56320)+65536}function c(m){var g,y,G,X,D;if(m.length===0)return!1;for(D=e.isIdentifierStartES6,g=0,y=m.length;g<y;++g){if(G=m.charCodeAt(g),55296<=G&&G<=56319){if(++g,g>=y||(X=m.charCodeAt(g),!(56320<=X&&X<=57343)))return!1;G=u(G,X)}if(!D(G))return!1;D=e.isIdentifierPartES6}return!0}function h(m,g){return o(m)&&!r(m,g)}function d(m,g){return c(m)&&!i(m,g)}Hc.exports={isKeywordES5:n,isKeywordES6:s,isReservedWordES5:r,isReservedWordES6:i,isRestrictedWord:a,isIdentifierNameES5:o,isIdentifierNameES6:c,isIdentifierES5:h,isIdentifierES6:d}})()),Hc.exports}var _c;function ES(){return _c||(_c=1,(function(){Qr.ast=SS(),Qr.code=x3(),Qr.keyword=LS()})()),Qr}var qr={},ba={},$r={},ei={},jc;function RS(){if(jc)return ei;jc=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return ei.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},ei.decode=function(t){var n=65,s=90,r=97,i=122,a=48,o=57,u=43,c=47,h=26,d=52;return n<=t&&t<=s?t-n:r<=t&&t<=i?t-r+h:a<=t&&t<=o?t-a+d:t==u?62:t==c?63:-1},ei}var Uc;function G3(){if(Uc)return $r;Uc=1;var e=RS(),t=5,n=1<<t,s=n-1,r=n;function i(o){return o<0?(-o<<1)+1:(o<<1)+0}function a(o){var u=(o&1)===1,c=o>>1;return u?-c:c}return $r.encode=function(o){var u="",c,h=i(o);do c=h&s,h>>>=t,h>0&&(c|=r),u+=e.encode(c);while(h>0);return u},$r.decode=function(o,u,c){var h=o.length,d=0,m=0,g,y;do{if(u>=h)throw new Error("Expected more digits in base 64 VLQ value.");if(y=e.decode(o.charCodeAt(u++)),y===-1)throw new Error("Invalid base64 digit: "+o.charAt(u-1));g=!!(y&r),y&=s,d=d+(y<<m),m+=t}while(g);c.value=a(d),c.rest=u},$r}var Jc={},Oc;function Vr(){return Oc||(Oc=1,(function(e){function t(A,Z,E){if(Z in A)return A[Z];if(arguments.length===3)return E;throw new Error('"'+Z+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,s=/^data:.+\,.+$/;function r(A){var Z=A.match(n);return Z?{scheme:Z[1],auth:Z[2],host:Z[3],port:Z[4],path:Z[5]}:null}e.urlParse=r;function i(A){var Z="";return A.scheme&&(Z+=A.scheme+":"),Z+="//",A.auth&&(Z+=A.auth+"@"),A.host&&(Z+=A.host),A.port&&(Z+=":"+A.port),A.path&&(Z+=A.path),Z}e.urlGenerate=i;function a(A){var Z=A,E=r(A);if(E){if(!E.path)return A;Z=E.path}for(var S=e.isAbsolute(Z),V=Z.split(/\/+/),T,K=0,J=V.length-1;J>=0;J--)T=V[J],T==="."?V.splice(J,1):T===".."?K++:K>0&&(T===""?(V.splice(J+1,K),K=0):(V.splice(J,2),K--));return Z=V.join("/"),Z===""&&(Z=S?"/":"."),E?(E.path=Z,i(E)):Z}e.normalize=a;function o(A,Z){A===""&&(A="."),Z===""&&(Z=".");var E=r(Z),S=r(A);if(S&&(A=S.path||"/"),E&&!E.scheme)return S&&(E.scheme=S.scheme),i(E);if(E||Z.match(s))return Z;if(S&&!S.host&&!S.path)return S.host=Z,i(S);var V=Z.charAt(0)==="/"?Z:a(A.replace(/\/+$/,"")+"/"+Z);return S?(S.path=V,i(S)):V}e.join=o,e.isAbsolute=function(A){return A.charAt(0)==="/"||n.test(A)};function u(A,Z){A===""&&(A="."),A=A.replace(/\/$/,"");for(var E=0;Z.indexOf(A+"/")!==0;){var S=A.lastIndexOf("/");if(S<0||(A=A.slice(0,S),A.match(/^([^\/]+:\/)?\/*$/)))return Z;++E}return Array(E+1).join("../")+Z.substr(A.length+1)}e.relative=u;var c=(function(){var A=Object.create(null);return!("__proto__"in A)})();function h(A){return A}function d(A){return g(A)?"$"+A:A}e.toSetString=c?h:d;function m(A){return g(A)?A.slice(1):A}e.fromSetString=c?h:m;function g(A){if(!A)return!1;var Z=A.length;if(Z<9||A.charCodeAt(Z-1)!==95||A.charCodeAt(Z-2)!==95||A.charCodeAt(Z-3)!==111||A.charCodeAt(Z-4)!==116||A.charCodeAt(Z-5)!==111||A.charCodeAt(Z-6)!==114||A.charCodeAt(Z-7)!==112||A.charCodeAt(Z-8)!==95||A.charCodeAt(Z-9)!==95)return!1;for(var E=Z-10;E>=0;E--)if(A.charCodeAt(E)!==36)return!1;return!0}function y(A,Z,E){var S=X(A.source,Z.source);return S!==0||(S=A.originalLine-Z.originalLine,S!==0)||(S=A.originalColumn-Z.originalColumn,S!==0||E)||(S=A.generatedColumn-Z.generatedColumn,S!==0)||(S=A.generatedLine-Z.generatedLine,S!==0)?S:X(A.name,Z.name)}e.compareByOriginalPositions=y;function G(A,Z,E){var S=A.generatedLine-Z.generatedLine;return S!==0||(S=A.generatedColumn-Z.generatedColumn,S!==0||E)||(S=X(A.source,Z.source),S!==0)||(S=A.originalLine-Z.originalLine,S!==0)||(S=A.originalColumn-Z.originalColumn,S!==0)?S:X(A.name,Z.name)}e.compareByGeneratedPositionsDeflated=G;function X(A,Z){return A===Z?0:A===null?1:Z===null?-1:A>Z?1:-1}function D(A,Z){var E=A.generatedLine-Z.generatedLine;return E!==0||(E=A.generatedColumn-Z.generatedColumn,E!==0)||(E=X(A.source,Z.source),E!==0)||(E=A.originalLine-Z.originalLine,E!==0)||(E=A.originalColumn-Z.originalColumn,E!==0)?E:X(A.name,Z.name)}e.compareByGeneratedPositionsInflated=D;function L(A){return JSON.parse(A.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=L;function B(A,Z,E){if(Z=Z||"",A&&(A[A.length-1]!=="/"&&Z[0]!=="/"&&(A+="/"),Z=A+Z),E){var S=r(E);if(!S)throw new Error("sourceMapURL could not be parsed");if(S.path){var V=S.path.lastIndexOf("/");V>=0&&(S.path=S.path.substring(0,V+1))}Z=o(i(S),Z)}return a(Z)}e.computeSourceURL=B})(Jc)),Jc}var Ma={},Qc;function C3(){if(Qc)return Ma;Qc=1;var e=Vr(),t=Object.prototype.hasOwnProperty,n=typeof Map<"u";function s(){this._array=[],this._set=n?new Map:Object.create(null)}return s.fromArray=function(r,i){for(var a=new s,o=0,u=r.length;o<u;o++)a.add(r[o],i);return a},s.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(r,i){var a=n?r:e.toSetString(r),o=n?this.has(r):t.call(this._set,a),u=this._array.length;(!o||i)&&this._array.push(r),o||(n?this._set.set(r,u):this._set[a]=u)},s.prototype.has=function(r){if(n)return this._set.has(r);var i=e.toSetString(r);return t.call(this._set,i)},s.prototype.indexOf=function(r){if(n){var i=this._set.get(r);if(i>=0)return i}else{var a=e.toSetString(r);if(t.call(this._set,a))return this._set[a]}throw new Error('"'+r+'" is not in the set.')},s.prototype.at=function(r){if(r>=0&&r<this._array.length)return this._array[r];throw new Error("No element indexed by "+r)},s.prototype.toArray=function(){return this._array.slice()},Ma.ArraySet=s,Ma}var xa={},qc;function kS(){if(qc)return xa;qc=1;var e=Vr();function t(s,r){var i=s.generatedLine,a=r.generatedLine,o=s.generatedColumn,u=r.generatedColumn;return a>i||a==i&&u>=o||e.compareByGeneratedPositionsInflated(s,r)<=0}function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return n.prototype.unsortedForEach=function(s,r){this._array.forEach(s,r)},n.prototype.add=function(s){t(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},xa.MappingList=n,xa}var $c;function P3(){if($c)return ba;$c=1;var e=G3(),t=Vr(),n=C3().ArraySet,s=kS().MappingList;function r(i){i||(i={}),this._file=t.getArg(i,"file",null),this._sourceRoot=t.getArg(i,"sourceRoot",null),this._skipValidation=t.getArg(i,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new s,this._sourcesContents=null}return r.prototype._version=3,r.fromSourceMap=function(i){var a=i.sourceRoot,o=new r({file:i.file,sourceRoot:a});return i.eachMapping(function(u){var c={generated:{line:u.generatedLine,column:u.generatedColumn}};u.source!=null&&(c.source=u.source,a!=null&&(c.source=t.relative(a,c.source)),c.original={line:u.originalLine,column:u.originalColumn},u.name!=null&&(c.name=u.name)),o.addMapping(c)}),i.sources.forEach(function(u){var c=u;a!==null&&(c=t.relative(a,u)),o._sources.has(c)||o._sources.add(c);var h=i.sourceContentFor(u);h!=null&&o.setSourceContent(u,h)}),o},r.prototype.addMapping=function(i){var a=t.getArg(i,"generated"),o=t.getArg(i,"original",null),u=t.getArg(i,"source",null),c=t.getArg(i,"name",null);this._skipValidation||this._validateMapping(a,o,u,c),u!=null&&(u=String(u),this._sources.has(u)||this._sources.add(u)),c!=null&&(c=String(c),this._names.has(c)||this._names.add(c)),this._mappings.add({generatedLine:a.line,generatedColumn:a.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:u,name:c})},r.prototype.setSourceContent=function(i,a){var o=i;this._sourceRoot!=null&&(o=t.relative(this._sourceRoot,o)),a!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(o)]=a):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(i,a,o){var u=a;if(a==null){if(i.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);u=i.file}var c=this._sourceRoot;c!=null&&(u=t.relative(c,u));var h=new n,d=new n;this._mappings.unsortedForEach(function(m){if(m.source===u&&m.originalLine!=null){var g=i.originalPositionFor({line:m.originalLine,column:m.originalColumn});g.source!=null&&(m.source=g.source,o!=null&&(m.source=t.join(o,m.source)),c!=null&&(m.source=t.relative(c,m.source)),m.originalLine=g.line,m.originalColumn=g.column,g.name!=null&&(m.name=g.name))}var y=m.source;y!=null&&!h.has(y)&&h.add(y);var G=m.name;G!=null&&!d.has(G)&&d.add(G)},this),this._sources=h,this._names=d,i.sources.forEach(function(m){var g=i.sourceContentFor(m);g!=null&&(o!=null&&(m=t.join(o,m)),c!=null&&(m=t.relative(c,m)),this.setSourceContent(m,g))},this)},r.prototype._validateMapping=function(i,a,o,u){if(a&&typeof a.line!="number"&&typeof a.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(i&&"line"in i&&"column"in i&&i.line>0&&i.column>=0&&!a&&!o&&!u)){if(i&&"line"in i&&"column"in i&&a&&"line"in a&&"column"in a&&i.line>0&&i.column>=0&&a.line>0&&a.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:i,source:o,original:a,name:u}))}},r.prototype._serializeMappings=function(){for(var i=0,a=1,o=0,u=0,c=0,h=0,d="",m,g,y,G,X=this._mappings.toArray(),D=0,L=X.length;D<L;D++){if(g=X[D],m="",g.generatedLine!==a)for(i=0;g.generatedLine!==a;)m+=";",a++;else if(D>0){if(!t.compareByGeneratedPositionsInflated(g,X[D-1]))continue;m+=","}m+=e.encode(g.generatedColumn-i),i=g.generatedColumn,g.source!=null&&(G=this._sources.indexOf(g.source),m+=e.encode(G-h),h=G,m+=e.encode(g.originalLine-1-u),u=g.originalLine-1,m+=e.encode(g.originalColumn-o),o=g.originalColumn,g.name!=null&&(y=this._names.indexOf(g.name),m+=e.encode(y-c),c=y)),d+=m}return d},r.prototype._generateSourcesContent=function(i,a){return i.map(function(o){if(!this._sourcesContents)return null;a!=null&&(o=t.relative(a,o));var u=t.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)},r.prototype.toJSON=function(){var i={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(i.file=this._file),this._sourceRoot!=null&&(i.sourceRoot=this._sourceRoot),this._sourcesContents&&(i.sourcesContent=this._generateSourcesContent(i.sources,i.sourceRoot)),i},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},ba.SourceMapGenerator=r,ba}var ir={},el={},tl;function VS(){return tl||(tl=1,(function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(n,s,r,i,a,o){var u=Math.floor((s-n)/2)+n,c=a(r,i[u],!0);return c===0?u:c>0?s-u>1?t(u,s,r,i,a,o):o==e.LEAST_UPPER_BOUND?s<i.length?s:-1:u:u-n>1?t(n,u,r,i,a,o):o==e.LEAST_UPPER_BOUND?u:n<0?-1:n}e.search=function(n,s,r,i){if(s.length===0)return-1;var a=t(-1,s.length,n,s,r,i||e.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&r(s[a],s[a-1],!0)===0;)--a;return a}})(el)),el}var Ga={},nl;function zS(){if(nl)return Ga;nl=1;function e(s,r,i){var a=s[r];s[r]=s[i],s[i]=a}function t(s,r){return Math.round(s+Math.random()*(r-s))}function n(s,r,i,a){if(i<a){var o=t(i,a),u=i-1;e(s,o,a);for(var c=s[a],h=i;h<a;h++)r(s[h],c)<=0&&(u+=1,e(s,u,h));e(s,u+1,h);var d=u+1;n(s,r,i,d-1),n(s,r,d+1,a)}}return Ga.quickSort=function(s,r){n(s,r,0,s.length-1)},Ga}var sl;function BS(){if(sl)return ir;sl=1;var e=Vr(),t=VS(),n=C3().ArraySet,s=G3(),r=zS().quickSort;function i(c,h){var d=c;return typeof c=="string"&&(d=e.parseSourceMapInput(c)),d.sections!=null?new u(d,h):new a(d,h)}i.fromSourceMap=function(c,h){return a.fromSourceMap(c,h)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(c,h){var d=c.charAt(h);return d===";"||d===","},i.prototype._parseMappings=function(c,h){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(c,h,d){var m=h||null,g=d||i.GENERATED_ORDER,y;switch(g){case i.GENERATED_ORDER:y=this._generatedMappings;break;case i.ORIGINAL_ORDER:y=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var G=this.sourceRoot;y.map(function(X){var D=X.source===null?null:this._sources.at(X.source);return D=e.computeSourceURL(G,D,this._sourceMapURL),{source:D,generatedLine:X.generatedLine,generatedColumn:X.generatedColumn,originalLine:X.originalLine,originalColumn:X.originalColumn,name:X.name===null?null:this._names.at(X.name)}},this).forEach(c,m)},i.prototype.allGeneratedPositionsFor=function(c){var h=e.getArg(c,"line"),d={source:e.getArg(c,"source"),originalLine:h,originalColumn:e.getArg(c,"column",0)};if(d.source=this._findSourceIndex(d.source),d.source<0)return[];var m=[],g=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(g>=0){var y=this._originalMappings[g];if(c.column===void 0)for(var G=y.originalLine;y&&y.originalLine===G;)m.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++g];else for(var X=y.originalColumn;y&&y.originalLine===h&&y.originalColumn==X;)m.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++g]}return m},ir.SourceMapConsumer=i;function a(c,h){var d=c;typeof c=="string"&&(d=e.parseSourceMapInput(c));var m=e.getArg(d,"version"),g=e.getArg(d,"sources"),y=e.getArg(d,"names",[]),G=e.getArg(d,"sourceRoot",null),X=e.getArg(d,"sourcesContent",null),D=e.getArg(d,"mappings"),L=e.getArg(d,"file",null);if(m!=this._version)throw new Error("Unsupported version: "+m);G&&(G=e.normalize(G)),g=g.map(String).map(e.normalize).map(function(B){return G&&e.isAbsolute(G)&&e.isAbsolute(B)?e.relative(G,B):B}),this._names=n.fromArray(y.map(String),!0),this._sources=n.fromArray(g,!0),this._absoluteSources=this._sources.toArray().map(function(B){return e.computeSourceURL(G,B,h)}),this.sourceRoot=G,this.sourcesContent=X,this._mappings=D,this._sourceMapURL=h,this.file=L}a.prototype=Object.create(i.prototype),a.prototype.consumer=i,a.prototype._findSourceIndex=function(c){var h=c;if(this.sourceRoot!=null&&(h=e.relative(this.sourceRoot,h)),this._sources.has(h))return this._sources.indexOf(h);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==c)return d;return-1},a.fromSourceMap=function(c,h){var d=Object.create(a.prototype),m=d._names=n.fromArray(c._names.toArray(),!0),g=d._sources=n.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot,d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot),d.file=c._file,d._sourceMapURL=h,d._absoluteSources=d._sources.toArray().map(function(Z){return e.computeSourceURL(d.sourceRoot,Z,h)});for(var y=c._mappings.toArray().slice(),G=d.__generatedMappings=[],X=d.__originalMappings=[],D=0,L=y.length;D<L;D++){var B=y[D],A=new o;A.generatedLine=B.generatedLine,A.generatedColumn=B.generatedColumn,B.source&&(A.source=g.indexOf(B.source),A.originalLine=B.originalLine,A.originalColumn=B.originalColumn,B.name&&(A.name=m.indexOf(B.name)),X.push(A)),G.push(A)}return r(d.__originalMappings,e.compareByOriginalPositions),d},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a.prototype._parseMappings=function(c,h){for(var d=1,m=0,g=0,y=0,G=0,X=0,D=c.length,L=0,B={},A={},Z=[],E=[],S,V,T,K,J;L<D;)if(c.charAt(L)===";")d++,L++,m=0;else if(c.charAt(L)===",")L++;else{for(S=new o,S.generatedLine=d,K=L;K<D&&!this._charIsMappingSeparator(c,K);K++);if(V=c.slice(L,K),T=B[V],T)L+=V.length;else{for(T=[];L<K;)s.decode(c,L,A),J=A.value,L=A.rest,T.push(J);if(T.length===2)throw new Error("Found a source, but no line and column");if(T.length===3)throw new Error("Found a source and line, but no column");B[V]=T}S.generatedColumn=m+T[0],m=S.generatedColumn,T.length>1&&(S.source=G+T[1],G+=T[1],S.originalLine=g+T[2],g=S.originalLine,S.originalLine+=1,S.originalColumn=y+T[3],y=S.originalColumn,T.length>4&&(S.name=X+T[4],X+=T[4])),E.push(S),typeof S.originalLine=="number"&&Z.push(S)}r(E,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=E,r(Z,e.compareByOriginalPositions),this.__originalMappings=Z},a.prototype._findMapping=function(c,h,d,m,g,y){if(c[d]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(c[m]<0)throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return t.search(c,h,g,y)},a.prototype.computeColumnSpans=function(){for(var c=0;c<this._generatedMappings.length;++c){var h=this._generatedMappings[c];if(c+1<this._generatedMappings.length){var d=this._generatedMappings[c+1];if(h.generatedLine===d.generatedLine){h.lastGeneratedColumn=d.generatedColumn-1;continue}}h.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(c){var h={generatedLine:e.getArg(c,"line"),generatedColumn:e.getArg(c,"column")},d=this._findMapping(h,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(d>=0){var m=this._generatedMappings[d];if(m.generatedLine===h.generatedLine){var g=e.getArg(m,"source",null);g!==null&&(g=this._sources.at(g),g=e.computeSourceURL(this.sourceRoot,g,this._sourceMapURL));var y=e.getArg(m,"name",null);return y!==null&&(y=this._names.at(y)),{source:g,line:e.getArg(m,"originalLine",null),column:e.getArg(m,"originalColumn",null),name:y}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(c){return c==null}):!1},a.prototype.sourceContentFor=function(c,h){if(!this.sourcesContent)return null;var d=this._findSourceIndex(c);if(d>=0)return this.sourcesContent[d];var m=c;this.sourceRoot!=null&&(m=e.relative(this.sourceRoot,m));var g;if(this.sourceRoot!=null&&(g=e.urlParse(this.sourceRoot))){var y=m.replace(/^file:\/\//,"");if(g.scheme=="file"&&this._sources.has(y))return this.sourcesContent[this._sources.indexOf(y)];if((!g.path||g.path=="/")&&this._sources.has("/"+m))return this.sourcesContent[this._sources.indexOf("/"+m)]}if(h)return null;throw new Error('"'+m+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(c){var h=e.getArg(c,"source");if(h=this._findSourceIndex(h),h<0)return{line:null,column:null,lastColumn:null};var d={source:h,originalLine:e.getArg(c,"line"),originalColumn:e.getArg(c,"column")},m=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(m>=0){var g=this._originalMappings[m];if(g.source===d.source)return{line:e.getArg(g,"generatedLine",null),column:e.getArg(g,"generatedColumn",null),lastColumn:e.getArg(g,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},ir.BasicSourceMapConsumer=a;function u(c,h){var d=c;typeof c=="string"&&(d=e.parseSourceMapInput(c));var m=e.getArg(d,"version"),g=e.getArg(d,"sections");if(m!=this._version)throw new Error("Unsupported version: "+m);this._sources=new n,this._names=new n;var y={line:-1,column:0};this._sections=g.map(function(G){if(G.url)throw new Error("Support for url field in sections not implemented.");var X=e.getArg(G,"offset"),D=e.getArg(X,"line"),L=e.getArg(X,"column");if(D<y.line||D===y.line&&L<y.column)throw new Error("Section offsets must be ordered and non-overlapping.");return y=X,{generatedOffset:{generatedLine:D+1,generatedColumn:L+1},consumer:new i(e.getArg(G,"map"),h)}})}return u.prototype=Object.create(i.prototype),u.prototype.constructor=i,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var c=[],h=0;h<this._sections.length;h++)for(var d=0;d<this._sections[h].consumer.sources.length;d++)c.push(this._sections[h].consumer.sources[d]);return c}}),u.prototype.originalPositionFor=function(c){var h={generatedLine:e.getArg(c,"line"),generatedColumn:e.getArg(c,"column")},d=t.search(h,this._sections,function(g,y){var G=g.generatedLine-y.generatedOffset.generatedLine;return G||g.generatedColumn-y.generatedOffset.generatedColumn}),m=this._sections[d];return m?m.consumer.originalPositionFor({line:h.generatedLine-(m.generatedOffset.generatedLine-1),column:h.generatedColumn-(m.generatedOffset.generatedLine===h.generatedLine?m.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(c,h){for(var d=0;d<this._sections.length;d++){var m=this._sections[d],g=m.consumer.sourceContentFor(c,!0);if(g)return g}if(h)return null;throw new Error('"'+c+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(c){for(var h=0;h<this._sections.length;h++){var d=this._sections[h];if(d.consumer._findSourceIndex(e.getArg(c,"source"))!==-1){var m=d.consumer.generatedPositionFor(c);if(m){var g={line:m.line+(d.generatedOffset.generatedLine-1),column:m.column+(d.generatedOffset.generatedLine===m.line?d.generatedOffset.generatedColumn-1:0)};return g}}}return{line:null,column:null}},u.prototype._parseMappings=function(c,h){this.__generatedMappings=[],this.__originalMappings=[];for(var d=0;d<this._sections.length;d++)for(var m=this._sections[d],g=m.consumer._generatedMappings,y=0;y<g.length;y++){var G=g[y],X=m.consumer._sources.at(G.source);X=e.computeSourceURL(m.consumer.sourceRoot,X,this._sourceMapURL),this._sources.add(X),X=this._sources.indexOf(X);var D=null;G.name&&(D=m.consumer._names.at(G.name),this._names.add(D),D=this._names.indexOf(D));var L={source:X,generatedLine:G.generatedLine+(m.generatedOffset.generatedLine-1),generatedColumn:G.generatedColumn+(m.generatedOffset.generatedLine===G.generatedLine?m.generatedOffset.generatedColumn-1:0),originalLine:G.originalLine,originalColumn:G.originalColumn,name:D};this.__generatedMappings.push(L),typeof L.originalLine=="number"&&this.__originalMappings.push(L)}r(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),r(this.__originalMappings,e.compareByOriginalPositions)},ir.IndexedSourceMapConsumer=u,ir}var Ca={},rl;function WS(){if(rl)return Ca;rl=1;var e=P3().SourceMapGenerator,t=Vr(),n=/(\r?\n)/,s=10,r="$$$isSourceNode$$$";function i(a,o,u,c,h){this.children=[],this.sourceContents={},this.line=a??null,this.column=o??null,this.source=u??null,this.name=h??null,this[r]=!0,c!=null&&this.add(c)}return i.fromStringWithSourceMap=function(a,o,u){var c=new i,h=a.split(n),d=0,m=function(){var D=B(),L=B()||"";return D+L;function B(){return d<h.length?h[d++]:void 0}},g=1,y=0,G=null;return o.eachMapping(function(D){if(G!==null)if(g<D.generatedLine)X(G,m()),g++,y=0;else{var L=h[d]||"",B=L.substr(0,D.generatedColumn-y);h[d]=L.substr(D.generatedColumn-y),y=D.generatedColumn,X(G,B),G=D;return}for(;g<D.generatedLine;)c.add(m()),g++;if(y<D.generatedColumn){var L=h[d]||"";c.add(L.substr(0,D.generatedColumn)),h[d]=L.substr(D.generatedColumn),y=D.generatedColumn}G=D},this),d<h.length&&(G&&X(G,m()),c.add(h.splice(d).join(""))),o.sources.forEach(function(D){var L=o.sourceContentFor(D);L!=null&&(u!=null&&(D=t.join(u,D)),c.setSourceContent(D,L))}),c;function X(D,L){if(D===null||D.source===void 0)c.add(L);else{var B=u?t.join(u,D.source):D.source;c.add(new i(D.originalLine,D.originalColumn,B,L,D.name))}}},i.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(o){this.add(o)},this);else if(a[r]||typeof a=="string")a&&this.children.push(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.prepend=function(a){if(Array.isArray(a))for(var o=a.length-1;o>=0;o--)this.prepend(a[o]);else if(a[r]||typeof a=="string")this.children.unshift(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.walk=function(a){for(var o,u=0,c=this.children.length;u<c;u++)o=this.children[u],o[r]?o.walk(a):o!==""&&a(o,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(a){var o,u,c=this.children.length;if(c>0){for(o=[],u=0;u<c-1;u++)o.push(this.children[u]),o.push(a);o.push(this.children[u]),this.children=o}return this},i.prototype.replaceRight=function(a,o){var u=this.children[this.children.length-1];return u[r]?u.replaceRight(a,o):typeof u=="string"?this.children[this.children.length-1]=u.replace(a,o):this.children.push("".replace(a,o)),this},i.prototype.setSourceContent=function(a,o){this.sourceContents[t.toSetString(a)]=o},i.prototype.walkSourceContents=function(a){for(var o=0,u=this.children.length;o<u;o++)this.children[o][r]&&this.children[o].walkSourceContents(a);for(var c=Object.keys(this.sourceContents),o=0,u=c.length;o<u;o++)a(t.fromSetString(c[o]),this.sourceContents[c[o]])},i.prototype.toString=function(){var a="";return this.walk(function(o){a+=o}),a},i.prototype.toStringWithSourceMap=function(a){var o={code:"",line:1,column:0},u=new e(a),c=!1,h=null,d=null,m=null,g=null;return this.walk(function(y,G){o.code+=y,G.source!==null&&G.line!==null&&G.column!==null?((h!==G.source||d!==G.line||m!==G.column||g!==G.name)&&u.addMapping({source:G.source,original:{line:G.line,column:G.column},generated:{line:o.line,column:o.column},name:G.name}),h=G.source,d=G.line,m=G.column,g=G.name,c=!0):c&&(u.addMapping({generated:{line:o.line,column:o.column}}),h=null,c=!1);for(var X=0,D=y.length;X<D;X++)y.charCodeAt(X)===s?(o.line++,o.column=0,X+1===D?(h=null,c=!1):c&&u.addMapping({source:G.source,original:{line:G.line,column:G.column},generated:{line:o.line,column:o.column},name:G.name})):o.column++}),this.walkSourceContents(function(y,G){u.setSourceContent(y,G)}),{code:o.code,map:u}},Ca.SourceNode=i,Ca}var il;function NS(){return il||(il=1,qr.SourceMapGenerator=P3().SourceMapGenerator,qr.SourceMapConsumer=BS().SourceMapConsumer,qr.SourceNode=WS().SourceNode),qr}const TS="2.1.0",IS={version:TS};var al;function YS(){return al||(al=1,(function(e){(function(){var t,n,s,r,i,a,o,u,c,h,d,m,g,y,G,X,D,L,B,A,Z,E,S,V,T,K;i=DS(),a=ES(),t=i.Syntax;function J(l){return we.Expression.hasOwnProperty(l.type)}function Y(l){return we.Statement.hasOwnProperty(l.type)}n={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},s={"??":n.Coalesce,"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,in:n.Relational,instanceof:n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative,"**":n.Exponentiation};var Q=1,ee=2,ye=4,re=8,ge=16,pe=32,Ke=64,pt=ee|ye,ut=Q|ee,z=Q|ee|ye,xe=Q,it=ye,ze=Q|ye,Ce=Q,Be=Q|pe,De=0,ke=Q|ge,wt=Q|re;function ce(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function We(l,b){var f="";for(b|=0;b>0;b>>>=1,l+=l)b&1&&(f+=l);return f}function Gt(l){return/[\r\n]/g.test(l)}function oe(l){var b=l.length;return b&&a.code.isLineTerminator(l.charCodeAt(b-1))}function O(l,b){var f;for(f in b)b.hasOwnProperty(f)&&(l[f]=b[f]);return l}function $e(l,b){var f,M;function P(k){return typeof k=="object"&&k instanceof Object&&!(k instanceof RegExp)}for(f in b)b.hasOwnProperty(f)&&(M=b[f],P(M)?P(l[f])?$e(l[f],M):l[f]=$e({},M):l[f]=M);return l}function he(l){var b,f,M,P,k;if(l!==l)throw new Error("Numeric literal whose value is NaN");if(l<0||l===0&&1/l<0)throw new Error("Numeric literal whose value is negative");if(l===1/0)return c?"null":h?"1e400":"1e+400";if(b=""+l,!h||b.length<3)return b;for(f=b.indexOf("."),!c&&b.charCodeAt(0)===48&&f===1&&(f=0,b=b.slice(1)),M=b,b=b.replace("e+","e"),P=0,(k=M.indexOf("e"))>0&&(P=+M.slice(k+1),M=M.slice(0,k)),f>=0&&(P-=M.length-f-1,M=+(M.slice(0,f)+M.slice(f+1))+""),k=0;M.charCodeAt(M.length+k-1)===48;)--k;return k!==0&&(P-=k,M=M.slice(0,k)),P!==0&&(M+="e"+P),(M.length<b.length||d&&l>1e12&&Math.floor(l)===l&&(M="0x"+l.toString(16)).length<b.length)&&+M===l&&(b=M),b}function Ne(l,b){return(l&-2)===8232?(b?"u":"\\u")+(l===8232?"2028":"2029"):l===10||l===13?(b?"":"\\")+(l===10?"n":"r"):String.fromCharCode(l)}function bt(l){var b,f,M,P,k,N,_,te;if(f=l.toString(),l.source){if(b=f.match(/\/([^/]*)$/),!b)return f;for(M=b[1],f="",_=!1,te=!1,P=0,k=l.source.length;P<k;++P)N=l.source.charCodeAt(P),te?(f+=Ne(N,te),te=!1):(_?N===93&&(_=!1):N===47?f+="\\":N===91&&(_=!0),f+=Ne(N,te),te=N===92);return"/"+f+"/"+M}return f}function hn(l,b){var f;return l===8?"\\b":l===12?"\\f":l===9?"\\t":(f=l.toString(16).toUpperCase(),c||l>255?"\\u"+"0000".slice(f.length)+f:l===0&&!a.code.isDecimalDigit(b)?"\\0":l===11?"\\x0B":"\\x"+"00".slice(f.length)+f)}function Nn(l){if(l===92)return"\\\\";if(l===10)return"\\n";if(l===13)return"\\r";if(l===8232)return"\\u2028";if(l===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function dn(l){var b,f,M,P;for(P=m==="double"?'"':"'",b=0,f=l.length;b<f;++b)if(M=l.charCodeAt(b),M===39){P='"';break}else if(M===34){P="'";break}else M===92&&++b;return P+l+P}function Zt(l){var b="",f,M,P,k=0,N=0,_,te;for(f=0,M=l.length;f<M;++f){if(P=l.charCodeAt(f),P===39)++k;else if(P===34)++N;else if(P===47&&c)b+="\\";else if(a.code.isLineTerminator(P)||P===92){b+=Nn(P);continue}else if(!a.code.isIdentifierPartES5(P)&&(c&&P<32||!c&&!g&&(P<32||P>126))){b+=hn(P,l.charCodeAt(f+1));continue}b+=String.fromCharCode(P)}if(_=!(m==="double"||m==="auto"&&N<k),te=_?"'":'"',!(_?k:N))return te+b+te;for(l=b,b=te,f=0,M=l.length;f<M;++f)P=l.charCodeAt(f),(P===39&&_||P===34&&!_)&&(b+="\\"),b+=String.fromCharCode(P);return b+te}function Zn(l){var b,f,M,P="";for(b=0,f=l.length;b<f;++b)M=l[b],P+=Array.isArray(M)?Zn(M):M;return P}function Ze(l,b){if(!E)return Array.isArray(l)?Zn(l):l;if(b==null){if(l instanceof r)return l;b={}}return b.loc==null?new r(null,null,E,l,b.name||null):new r(b.loc.start.line,b.loc.start.column,E===!0?b.loc.source||null:E,l,b.name||null)}function Ue(){return G||" "}function de(l,b){var f,M,P,k;return f=Ze(l).toString(),f.length===0?[b]:(M=Ze(b).toString(),M.length===0?[l]:(P=f.charCodeAt(f.length-1),k=M.charCodeAt(0),(P===43||P===45)&&P===k||a.code.isIdentifierPartES5(P)&&a.code.isIdentifierPartES5(k)||P===47&&k===105?[l,Ue(),b]:a.code.isWhiteSpace(P)||a.code.isLineTerminator(P)||a.code.isWhiteSpace(k)||a.code.isLineTerminator(k)?[l,b]:[l,G,b]))}function Oe(l){return[o,l]}function Qe(l){var b;b=o,o+=u,l(o),o=b}function ss(l){var b;for(b=l.length-1;b>=0&&!a.code.isLineTerminator(l.charCodeAt(b));--b);return l.length-1-b}function rs(l,b){var f,M,P,k,N,_,te,Fe;for(f=l.split(/\r\n|[\r\n]/),_=Number.MAX_VALUE,M=1,P=f.length;M<P;++M){for(k=f[M],N=0;N<k.length&&a.code.isWhiteSpace(k.charCodeAt(N));)++N;_>N&&(_=N)}for(typeof b<"u"?(te=o,f[1][_]==="*"&&(b+=" "),o=b):(_&1&&--_,te=o),M=1,P=f.length;M<P;++M)Fe=Ze(Oe(f[M].slice(_))),f[M]=E?Fe.join(""):Fe;return o=te,f.join(`
`)}function ht(l,b){if(l.type==="Line"){if(oe(l.value))return"//"+l.value;var f="//"+l.value;return V||(f+=`
`),f}return A.format.indent.adjustMultilineComment&&/[\n\r]/.test(l.value)?rs("/*"+l.value+"*/",b):"/*"+l.value+"*/"}function Tn(l,b){var f,M,P,k,N,_,te,Fe,at,Fn,In,Nr,Tr,Yt;if(l.leadingComments&&l.leadingComments.length>0){if(k=b,V){for(P=l.leadingComments[0],b=[],Fe=P.extendedRange,at=P.range,In=S.substring(Fe[0],at[0]),Yt=(In.match(/\n/g)||[]).length,Yt>0?(b.push(We(`
`,Yt)),b.push(Oe(ht(P)))):(b.push(In),b.push(ht(P))),Fn=at,f=1,M=l.leadingComments.length;f<M;f++)P=l.leadingComments[f],at=P.range,Nr=S.substring(Fn[1],at[0]),Yt=(Nr.match(/\n/g)||[]).length,b.push(We(`
`,Yt)),b.push(Oe(ht(P))),Fn=at;Tr=S.substring(at[1],Fe[1]),Yt=(Tr.match(/\n/g)||[]).length,b.push(We(`
`,Yt))}else for(P=l.leadingComments[0],b=[],L&&l.type===t.Program&&l.body.length===0&&b.push(`
`),b.push(ht(P)),oe(Ze(b).toString())||b.push(`
`),f=1,M=l.leadingComments.length;f<M;++f)P=l.leadingComments[f],te=[ht(P)],oe(Ze(te).toString())||te.push(`
`),b.push(Oe(te));b.push(Oe(k))}if(l.trailingComments)if(V)P=l.trailingComments[0],Fe=P.extendedRange,at=P.range,In=S.substring(Fe[0],at[0]),Yt=(In.match(/\n/g)||[]).length,Yt>0?(b.push(We(`
`,Yt)),b.push(Oe(ht(P)))):(b.push(In),b.push(ht(P)));else for(N=!oe(Ze(b).toString()),_=We(" ",ss(Ze([o,b,u]).toString())),f=0,M=l.trailingComments.length;f<M;++f)P=l.trailingComments[f],N?(f===0?b=[b,u]:b=[b,_],b.push(ht(P,_))):b=[b,Oe(ht(P))],f!==M-1&&!oe(Ze(b).toString())&&(b=[b,`
`]);return b}function se(l,b,f){var M,P=0;for(M=l;M<b;M++)S[M]===`
`&&P++;for(M=1;M<P;M++)f.push(y)}function be(l,b,f){return b<f?["(",l,")"]:l}function He(l){var b,f,M;for(M=l.split(/\r\n|\n/),b=1,f=M.length;b<f;b++)M[b]=y+o+M[b];return M}function st(l,b){var f,M,P;return f=l[A.verbatim],typeof f=="string"?M=be(He(f),n.Sequence,b):(M=He(f.content),P=f.precedence!=null?f.precedence:n.Sequence,M=be(M,P,b)),Ze(M,l)}function we(){}we.prototype.maybeBlock=function(l,b){var f,M,P=this;return M=!A.comment||!l.leadingComments,l.type===t.BlockStatement&&M?[G,this.generateStatement(l,b)]:l.type===t.EmptyStatement&&M?";":(Qe(function(){f=[y,Oe(P.generateStatement(l,b))]}),f)},we.prototype.maybeBlockSuffix=function(l,b){var f=oe(Ze(b).toString());return l.type===t.BlockStatement&&(!A.comment||!l.leadingComments)&&!f?[b,G]:f?[b,o]:[b,y,o]};function dt(l){return Ze(l.name,l)}function Vt(l,b){return l.async?"async"+(b?Ue():G):""}function zt(l){var b=l.generator&&!A.moz.starlessGenerator;return b?"*"+G:""}function Wr(l){var b=l.value,f="";return b.async&&(f+=Vt(b,!l.computed)),b.generator&&(f+=zt(b)?"*":""),f}we.prototype.generatePattern=function(l,b,f){return l.type===t.Identifier?dt(l):this.generateExpression(l,b,f)},we.prototype.generateFunctionParams=function(l){var b,f,M,P;if(P=!1,l.type===t.ArrowFunctionExpression&&!l.rest&&(!l.defaults||l.defaults.length===0)&&l.params.length===1&&l.params[0].type===t.Identifier)M=[Vt(l,!0),dt(l.params[0])];else{for(M=l.type===t.ArrowFunctionExpression?[Vt(l,!1)]:[],M.push("("),l.defaults&&(P=!0),b=0,f=l.params.length;b<f;++b)P&&l.defaults[b]?M.push(this.generateAssignment(l.params[b],l.defaults[b],"=",n.Assignment,z)):M.push(this.generatePattern(l.params[b],n.Assignment,z)),b+1<f&&M.push(","+G);l.rest&&(l.params.length&&M.push(","+G),M.push("..."),M.push(dt(l.rest))),M.push(")")}return M},we.prototype.generateFunctionBody=function(l){var b,f;return b=this.generateFunctionParams(l),l.type===t.ArrowFunctionExpression&&(b.push(G),b.push("=>")),l.expression?(b.push(G),f=this.generateExpression(l.body,n.Assignment,z),f.toString().charAt(0)==="{"&&(f=["(",f,")"]),b.push(f)):b.push(this.maybeBlock(l.body,wt)),b},we.prototype.generateIterationForStatement=function(l,b,f){var M=["for"+(b.await?Ue()+"await":"")+G+"("],P=this;return Qe(function(){b.left.type===t.VariableDeclaration?Qe(function(){M.push(b.left.kind+Ue()),M.push(P.generateStatement(b.left.declarations[0],De))}):M.push(P.generateExpression(b.left,n.Call,z)),M=de(M,l),M=[de(M,P.generateExpression(b.right,n.Assignment,z)),")"]}),M.push(this.maybeBlock(b.body,f)),M},we.prototype.generatePropertyKey=function(l,b){var f=[];return b&&f.push("["),f.push(this.generateExpression(l,n.Assignment,z)),b&&f.push("]"),f},we.prototype.generateAssignment=function(l,b,f,M,P){return n.Assignment<M&&(P|=Q),be([this.generateExpression(l,n.Call,P),G+f+G,this.generateExpression(b,n.Assignment,P)],n.Assignment,M)},we.prototype.semicolon=function(l){return!D&&l&pe?"":";"},we.Statement={BlockStatement:function(l,b){var f,M,P=["{",y],k=this;return Qe(function(){l.body.length===0&&V&&(f=l.range,f[1]-f[0]>2&&(M=S.substring(f[0]+1,f[1]-1),M[0]===`
`&&(P=["{"]),P.push(M)));var N,_,te,Fe;for(Fe=Ce,b&re&&(Fe|=ge),N=0,_=l.body.length;N<_;++N)V&&(N===0&&(l.body[0].leadingComments&&(f=l.body[0].leadingComments[0].extendedRange,M=S.substring(f[0],f[1]),M[0]===`
`&&(P=["{"])),l.body[0].leadingComments||se(l.range[0],l.body[0].range[0],P)),N>0&&!l.body[N-1].trailingComments&&!l.body[N].leadingComments&&se(l.body[N-1].range[1],l.body[N].range[0],P)),N===_-1&&(Fe|=pe),l.body[N].leadingComments&&V?te=k.generateStatement(l.body[N],Fe):te=Oe(k.generateStatement(l.body[N],Fe)),P.push(te),oe(Ze(te).toString())||V&&N<_-1&&l.body[N+1].leadingComments||P.push(y),V&&N===_-1&&(l.body[N].trailingComments||se(l.body[N].range[1],l.range[1],P))}),P.push(Oe("}")),P},BreakStatement:function(l,b){return l.label?"break "+l.label.name+this.semicolon(b):"break"+this.semicolon(b)},ContinueStatement:function(l,b){return l.label?"continue "+l.label.name+this.semicolon(b):"continue"+this.semicolon(b)},ClassBody:function(l,b){var f=["{",y],M=this;return Qe(function(P){var k,N;for(k=0,N=l.body.length;k<N;++k)f.push(P),f.push(M.generateExpression(l.body[k],n.Sequence,z)),k+1<N&&f.push(y)}),oe(Ze(f).toString())||f.push(y),f.push(o),f.push("}"),f},ClassDeclaration:function(l,b){var f,M;return f=["class"],l.id&&(f=de(f,this.generateExpression(l.id,n.Sequence,z))),l.superClass&&(M=de("extends",this.generateExpression(l.superClass,n.Unary,z)),f=de(f,M)),f.push(G),f.push(this.generateStatement(l.body,Be)),f},DirectiveStatement:function(l,b){return A.raw&&l.raw?l.raw+this.semicolon(b):dn(l.directive)+this.semicolon(b)},DoWhileStatement:function(l,b){var f=de("do",this.maybeBlock(l.body,Ce));return f=this.maybeBlockSuffix(l.body,f),de(f,["while"+G+"(",this.generateExpression(l.test,n.Sequence,z),")"+this.semicolon(b)])},CatchClause:function(l,b){var f,M=this;return Qe(function(){var P;l.param?(f=["catch"+G+"(",M.generateExpression(l.param,n.Sequence,z),")"],l.guard&&(P=M.generateExpression(l.guard,n.Sequence,z),f.splice(2,0," if ",P))):f=["catch"]}),f.push(this.maybeBlock(l.body,Ce)),f},DebuggerStatement:function(l,b){return"debugger"+this.semicolon(b)},EmptyStatement:function(l,b){return";"},ExportDefaultDeclaration:function(l,b){var f=["export"],M;return M=b&pe?Be:Ce,f=de(f,"default"),Y(l.declaration)?f=de(f,this.generateStatement(l.declaration,M)):f=de(f,this.generateExpression(l.declaration,n.Assignment,z)+this.semicolon(b)),f},ExportNamedDeclaration:function(l,b){var f=["export"],M,P=this;return M=b&pe?Be:Ce,l.declaration?de(f,this.generateStatement(l.declaration,M)):(l.specifiers&&(l.specifiers.length===0?f=de(f,"{"+G+"}"):l.specifiers[0].type===t.ExportBatchSpecifier?f=de(f,this.generateExpression(l.specifiers[0],n.Sequence,z)):(f=de(f,"{"),Qe(function(k){var N,_;for(f.push(y),N=0,_=l.specifiers.length;N<_;++N)f.push(k),f.push(P.generateExpression(l.specifiers[N],n.Sequence,z)),N+1<_&&f.push(","+y)}),oe(Ze(f).toString())||f.push(y),f.push(o+"}")),l.source?f=de(f,["from"+G,this.generateExpression(l.source,n.Sequence,z),this.semicolon(b)]):f.push(this.semicolon(b))),f)},ExportAllDeclaration:function(l,b){return["export"+G,"*"+G,"from"+G,this.generateExpression(l.source,n.Sequence,z),this.semicolon(b)]},ExpressionStatement:function(l,b){var f,M;function P(_){var te;return _.slice(0,5)!=="class"?!1:(te=_.charCodeAt(5),te===123||a.code.isWhiteSpace(te)||a.code.isLineTerminator(te))}function k(_){var te;return _.slice(0,8)!=="function"?!1:(te=_.charCodeAt(8),te===40||a.code.isWhiteSpace(te)||te===42||a.code.isLineTerminator(te))}function N(_){var te,Fe,at;if(_.slice(0,5)!=="async"||!a.code.isWhiteSpace(_.charCodeAt(5)))return!1;for(Fe=6,at=_.length;Fe<at&&a.code.isWhiteSpace(_.charCodeAt(Fe));++Fe);return Fe===at||_.slice(Fe,Fe+8)!=="function"?!1:(te=_.charCodeAt(Fe+8),te===40||a.code.isWhiteSpace(te)||te===42||a.code.isLineTerminator(te))}return f=[this.generateExpression(l.expression,n.Sequence,z)],M=Ze(f).toString(),M.charCodeAt(0)===123||P(M)||k(M)||N(M)||B&&b&ge&&l.expression.type===t.Literal&&typeof l.expression.value=="string"?f=["(",f,")"+this.semicolon(b)]:f.push(this.semicolon(b)),f},ImportDeclaration:function(l,b){var f,M,P=this;return l.specifiers.length===0?["import",G,this.generateExpression(l.source,n.Sequence,z),this.semicolon(b)]:(f=["import"],M=0,l.specifiers[M].type===t.ImportDefaultSpecifier&&(f=de(f,[this.generateExpression(l.specifiers[M],n.Sequence,z)]),++M),l.specifiers[M]&&(M!==0&&f.push(","),l.specifiers[M].type===t.ImportNamespaceSpecifier?f=de(f,[G,this.generateExpression(l.specifiers[M],n.Sequence,z)]):(f.push(G+"{"),l.specifiers.length-M===1?(f.push(G),f.push(this.generateExpression(l.specifiers[M],n.Sequence,z)),f.push(G+"}"+G)):(Qe(function(k){var N,_;for(f.push(y),N=M,_=l.specifiers.length;N<_;++N)f.push(k),f.push(P.generateExpression(l.specifiers[N],n.Sequence,z)),N+1<_&&f.push(","+y)}),oe(Ze(f).toString())||f.push(y),f.push(o+"}"+G)))),f=de(f,["from"+G,this.generateExpression(l.source,n.Sequence,z),this.semicolon(b)]),f)},VariableDeclarator:function(l,b){var f=b&Q?z:pt;return l.init?[this.generateExpression(l.id,n.Assignment,f),G,"=",G,this.generateExpression(l.init,n.Assignment,f)]:this.generatePattern(l.id,n.Assignment,f)},VariableDeclaration:function(l,b){var f,M,P,k,N,_=this;f=[l.kind],N=b&Q?Ce:De;function te(){for(k=l.declarations[0],A.comment&&k.leadingComments?(f.push(`
`),f.push(Oe(_.generateStatement(k,N)))):(f.push(Ue()),f.push(_.generateStatement(k,N))),M=1,P=l.declarations.length;M<P;++M)k=l.declarations[M],A.comment&&k.leadingComments?(f.push(","+y),f.push(Oe(_.generateStatement(k,N)))):(f.push(","+G),f.push(_.generateStatement(k,N)))}return l.declarations.length>1?Qe(te):te(),f.push(this.semicolon(b)),f},ThrowStatement:function(l,b){return[de("throw",this.generateExpression(l.argument,n.Sequence,z)),this.semicolon(b)]},TryStatement:function(l,b){var f,M,P,k;if(f=["try",this.maybeBlock(l.block,Ce)],f=this.maybeBlockSuffix(l.block,f),l.handlers)for(M=0,P=l.handlers.length;M<P;++M)f=de(f,this.generateStatement(l.handlers[M],Ce)),(l.finalizer||M+1!==P)&&(f=this.maybeBlockSuffix(l.handlers[M].body,f));else{for(k=l.guardedHandlers||[],M=0,P=k.length;M<P;++M)f=de(f,this.generateStatement(k[M],Ce)),(l.finalizer||M+1!==P)&&(f=this.maybeBlockSuffix(k[M].body,f));if(l.handler)if(Array.isArray(l.handler))for(M=0,P=l.handler.length;M<P;++M)f=de(f,this.generateStatement(l.handler[M],Ce)),(l.finalizer||M+1!==P)&&(f=this.maybeBlockSuffix(l.handler[M].body,f));else f=de(f,this.generateStatement(l.handler,Ce)),l.finalizer&&(f=this.maybeBlockSuffix(l.handler.body,f))}return l.finalizer&&(f=de(f,["finally",this.maybeBlock(l.finalizer,Ce)])),f},SwitchStatement:function(l,b){var f,M,P,k,N,_=this;if(Qe(function(){f=["switch"+G+"(",_.generateExpression(l.discriminant,n.Sequence,z),")"+G+"{"+y]}),l.cases)for(N=Ce,P=0,k=l.cases.length;P<k;++P)P===k-1&&(N|=pe),M=Oe(this.generateStatement(l.cases[P],N)),f.push(M),oe(Ze(M).toString())||f.push(y);return f.push(Oe("}")),f},SwitchCase:function(l,b){var f,M,P,k,N,_=this;return Qe(function(){for(l.test?f=[de("case",_.generateExpression(l.test,n.Sequence,z)),":"]:f=["default:"],P=0,k=l.consequent.length,k&&l.consequent[0].type===t.BlockStatement&&(M=_.maybeBlock(l.consequent[0],Ce),f.push(M),P=1),P!==k&&!oe(Ze(f).toString())&&f.push(y),N=Ce;P<k;++P)P===k-1&&b&pe&&(N|=pe),M=Oe(_.generateStatement(l.consequent[P],N)),f.push(M),P+1!==k&&!oe(Ze(M).toString())&&f.push(y)}),f},IfStatement:function(l,b){var f,M,P,k=this;return Qe(function(){f=["if"+G+"(",k.generateExpression(l.test,n.Sequence,z),")"]}),P=b&pe,M=Ce,P&&(M|=pe),l.alternate?(f.push(this.maybeBlock(l.consequent,Ce)),f=this.maybeBlockSuffix(l.consequent,f),l.alternate.type===t.IfStatement?f=de(f,["else ",this.generateStatement(l.alternate,M)]):f=de(f,de("else",this.maybeBlock(l.alternate,M)))):f.push(this.maybeBlock(l.consequent,M)),f},ForStatement:function(l,b){var f,M=this;return Qe(function(){f=["for"+G+"("],l.init?l.init.type===t.VariableDeclaration?f.push(M.generateStatement(l.init,De)):(f.push(M.generateExpression(l.init,n.Sequence,pt)),f.push(";")):f.push(";"),l.test&&(f.push(G),f.push(M.generateExpression(l.test,n.Sequence,z))),f.push(";"),l.update&&(f.push(G),f.push(M.generateExpression(l.update,n.Sequence,z))),f.push(")")}),f.push(this.maybeBlock(l.body,b&pe?Be:Ce)),f},ForInStatement:function(l,b){return this.generateIterationForStatement("in",l,b&pe?Be:Ce)},ForOfStatement:function(l,b){return this.generateIterationForStatement("of",l,b&pe?Be:Ce)},LabeledStatement:function(l,b){return[l.label.name+":",this.maybeBlock(l.body,b&pe?Be:Ce)]},Program:function(l,b){var f,M,P,k,N;for(k=l.body.length,f=[L&&k>0?`
`:""],N=ke,P=0;P<k;++P)!L&&P===k-1&&(N|=pe),V&&(P===0&&(l.body[0].leadingComments||se(l.range[0],l.body[P].range[0],f)),P>0&&!l.body[P-1].trailingComments&&!l.body[P].leadingComments&&se(l.body[P-1].range[1],l.body[P].range[0],f)),M=Oe(this.generateStatement(l.body[P],N)),f.push(M),P+1<k&&!oe(Ze(M).toString())&&(V&&l.body[P+1].leadingComments||f.push(y)),V&&P===k-1&&(l.body[P].trailingComments||se(l.body[P].range[1],l.range[1],f));return f},FunctionDeclaration:function(l,b){return[Vt(l,!0),"function",zt(l)||Ue(),l.id?dt(l.id):"",this.generateFunctionBody(l)]},ReturnStatement:function(l,b){return l.argument?[de("return",this.generateExpression(l.argument,n.Sequence,z)),this.semicolon(b)]:["return"+this.semicolon(b)]},WhileStatement:function(l,b){var f,M=this;return Qe(function(){f=["while"+G+"(",M.generateExpression(l.test,n.Sequence,z),")"]}),f.push(this.maybeBlock(l.body,b&pe?Be:Ce)),f},WithStatement:function(l,b){var f,M=this;return Qe(function(){f=["with"+G+"(",M.generateExpression(l.object,n.Sequence,z),")"]}),f.push(this.maybeBlock(l.body,b&pe?Be:Ce)),f}},O(we.prototype,we.Statement),we.Expression={SequenceExpression:function(l,b,f){var M,P,k;for(n.Sequence<b&&(f|=Q),M=[],P=0,k=l.expressions.length;P<k;++P)M.push(this.generateExpression(l.expressions[P],n.Assignment,f)),P+1<k&&M.push(","+G);return be(M,n.Sequence,b)},AssignmentExpression:function(l,b,f){return this.generateAssignment(l.left,l.right,l.operator,b,f)},ArrowFunctionExpression:function(l,b,f){return be(this.generateFunctionBody(l),n.ArrowFunction,b)},ConditionalExpression:function(l,b,f){return n.Conditional<b&&(f|=Q),be([this.generateExpression(l.test,n.Coalesce,f),G+"?"+G,this.generateExpression(l.consequent,n.Assignment,f),G+":"+G,this.generateExpression(l.alternate,n.Assignment,f)],n.Conditional,b)},LogicalExpression:function(l,b,f){return l.operator==="??"&&(f|=Ke),this.BinaryExpression(l,b,f)},BinaryExpression:function(l,b,f){var M,P,k,N,_,te;return N=s[l.operator],P=l.operator==="**"?n.Postfix:N,k=l.operator==="**"?N:N+1,N<b&&(f|=Q),_=this.generateExpression(l.left,P,f),te=_.toString(),te.charCodeAt(te.length-1)===47&&a.code.isIdentifierPartES5(l.operator.charCodeAt(0))?M=[_,Ue(),l.operator]:M=de(_,l.operator),_=this.generateExpression(l.right,k,f),l.operator==="/"&&_.toString().charAt(0)==="/"||l.operator.slice(-1)==="<"&&_.toString().slice(0,3)==="!--"?(M.push(Ue()),M.push(_)):M=de(M,_),l.operator==="in"&&!(f&Q)?["(",M,")"]:(l.operator==="||"||l.operator==="&&")&&f&Ke?["(",M,")"]:be(M,N,b)},CallExpression:function(l,b,f){var M,P,k;for(M=[this.generateExpression(l.callee,n.Call,ut)],l.optional&&M.push("?."),M.push("("),P=0,k=l.arguments.length;P<k;++P)M.push(this.generateExpression(l.arguments[P],n.Assignment,z)),P+1<k&&M.push(","+G);return M.push(")"),f&ee?be(M,n.Call,b):["(",M,")"]},ChainExpression:function(l,b,f){n.OptionalChaining<b&&(f|=ee);var M=this.generateExpression(l.expression,n.OptionalChaining,f);return be(M,n.OptionalChaining,b)},NewExpression:function(l,b,f){var M,P,k,N,_;if(P=l.arguments.length,_=f&ye&&!X&&P===0?ze:xe,M=de("new",this.generateExpression(l.callee,n.New,_)),!(f&ye)||X||P>0){for(M.push("("),k=0,N=P;k<N;++k)M.push(this.generateExpression(l.arguments[k],n.Assignment,z)),k+1<N&&M.push(","+G);M.push(")")}return be(M,n.New,b)},MemberExpression:function(l,b,f){var M,P;return M=[this.generateExpression(l.object,n.Call,f&ee?ut:xe)],l.computed?(l.optional&&M.push("?."),M.push("["),M.push(this.generateExpression(l.property,n.Sequence,f&ee?z:ze)),M.push("]")):(!l.optional&&l.object.type===t.Literal&&typeof l.object.value=="number"&&(P=Ze(M).toString(),P.indexOf(".")<0&&!/[eExX]/.test(P)&&a.code.isDecimalDigit(P.charCodeAt(P.length-1))&&!(P.length>=2&&P.charCodeAt(0)===48)&&M.push(" ")),M.push(l.optional?"?.":"."),M.push(dt(l.property))),be(M,n.Member,b)},MetaProperty:function(l,b,f){var M;return M=[],M.push(typeof l.meta=="string"?l.meta:dt(l.meta)),M.push("."),M.push(typeof l.property=="string"?l.property:dt(l.property)),be(M,n.Member,b)},UnaryExpression:function(l,b,f){var M,P,k,N,_;return P=this.generateExpression(l.argument,n.Unary,z),G===""?M=de(l.operator,P):(M=[l.operator],l.operator.length>2?M=de(M,P):(N=Ze(M).toString(),_=N.charCodeAt(N.length-1),k=P.toString().charCodeAt(0),((_===43||_===45)&&_===k||a.code.isIdentifierPartES5(_)&&a.code.isIdentifierPartES5(k))&&M.push(Ue()),M.push(P))),be(M,n.Unary,b)},YieldExpression:function(l,b,f){var M;return l.delegate?M="yield*":M="yield",l.argument&&(M=de(M,this.generateExpression(l.argument,n.Yield,z))),be(M,n.Yield,b)},AwaitExpression:function(l,b,f){var M=de(l.all?"await*":"await",this.generateExpression(l.argument,n.Await,z));return be(M,n.Await,b)},UpdateExpression:function(l,b,f){return l.prefix?be([l.operator,this.generateExpression(l.argument,n.Unary,z)],n.Unary,b):be([this.generateExpression(l.argument,n.Postfix,z),l.operator],n.Postfix,b)},FunctionExpression:function(l,b,f){var M=[Vt(l,!0),"function"];return l.id?(M.push(zt(l)||Ue()),M.push(dt(l.id))):M.push(zt(l)||G),M.push(this.generateFunctionBody(l)),M},ArrayPattern:function(l,b,f){return this.ArrayExpression(l,b,f,!0)},ArrayExpression:function(l,b,f,M){var P,k,N=this;return l.elements.length?(k=M?!1:l.elements.length>1,P=["[",k?y:""],Qe(function(_){var te,Fe;for(te=0,Fe=l.elements.length;te<Fe;++te)l.elements[te]?(P.push(k?_:""),P.push(N.generateExpression(l.elements[te],n.Assignment,z))):(k&&P.push(_),te+1===Fe&&P.push(",")),te+1<Fe&&P.push(","+(k?y:G))}),k&&!oe(Ze(P).toString())&&P.push(y),P.push(k?o:""),P.push("]"),P):"[]"},RestElement:function(l,b,f){return"..."+this.generatePattern(l.argument)},ClassExpression:function(l,b,f){var M,P;return M=["class"],l.id&&(M=de(M,this.generateExpression(l.id,n.Sequence,z))),l.superClass&&(P=de("extends",this.generateExpression(l.superClass,n.Unary,z)),M=de(M,P)),M.push(G),M.push(this.generateStatement(l.body,Be)),M},MethodDefinition:function(l,b,f){var M,P;return l.static?M=["static"+G]:M=[],l.kind==="get"||l.kind==="set"?P=[de(l.kind,this.generatePropertyKey(l.key,l.computed)),this.generateFunctionBody(l.value)]:P=[Wr(l),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)],de(M,P)},Property:function(l,b,f){return l.kind==="get"||l.kind==="set"?[l.kind,Ue(),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)]:l.shorthand?l.value.type==="AssignmentPattern"?this.AssignmentPattern(l.value,n.Sequence,z):this.generatePropertyKey(l.key,l.computed):l.method?[Wr(l),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)]:[this.generatePropertyKey(l.key,l.computed),":"+G,this.generateExpression(l.value,n.Assignment,z)]},ObjectExpression:function(l,b,f){var M,P,k,N=this;return l.properties.length?(M=l.properties.length>1,Qe(function(){k=N.generateExpression(l.properties[0],n.Sequence,z)}),!M&&!Gt(Ze(k).toString())?["{",G,k,G,"}"]:(Qe(function(_){var te,Fe;if(P=["{",y,_,k],M)for(P.push(","+y),te=1,Fe=l.properties.length;te<Fe;++te)P.push(_),P.push(N.generateExpression(l.properties[te],n.Sequence,z)),te+1<Fe&&P.push(","+y)}),oe(Ze(P).toString())||P.push(y),P.push(o),P.push("}"),P)):"{}"},AssignmentPattern:function(l,b,f){return this.generateAssignment(l.left,l.right,"=",b,f)},ObjectPattern:function(l,b,f){var M,P,k,N,_,te=this;if(!l.properties.length)return"{}";if(N=!1,l.properties.length===1)_=l.properties[0],_.type===t.Property&&_.value.type!==t.Identifier&&(N=!0);else for(P=0,k=l.properties.length;P<k;++P)if(_=l.properties[P],_.type===t.Property&&!_.shorthand){N=!0;break}return M=["{",N?y:""],Qe(function(Fe){var at,Fn;for(at=0,Fn=l.properties.length;at<Fn;++at)M.push(N?Fe:""),M.push(te.generateExpression(l.properties[at],n.Sequence,z)),at+1<Fn&&M.push(","+(N?y:G))}),N&&!oe(Ze(M).toString())&&M.push(y),M.push(N?o:""),M.push("}"),M},ThisExpression:function(l,b,f){return"this"},Super:function(l,b,f){return"super"},Identifier:function(l,b,f){return dt(l)},ImportDefaultSpecifier:function(l,b,f){return dt(l.id||l.local)},ImportNamespaceSpecifier:function(l,b,f){var M=["*"],P=l.id||l.local;return P&&M.push(G+"as"+Ue()+dt(P)),M},ImportSpecifier:function(l,b,f){var M=l.imported,P=[M.name],k=l.local;return k&&k.name!==M.name&&P.push(Ue()+"as"+Ue()+dt(k)),P},ExportSpecifier:function(l,b,f){var M=l.local,P=[M.name],k=l.exported;return k&&k.name!==M.name&&P.push(Ue()+"as"+Ue()+dt(k)),P},Literal:function(l,b,f){var M;if(l.hasOwnProperty("raw")&&Z&&A.raw)try{if(M=Z(l.raw).body[0].expression,M.type===t.Literal&&M.value===l.value)return l.raw}catch{}return l.regex?"/"+l.regex.pattern+"/"+l.regex.flags:typeof l.value=="bigint"?l.value.toString()+"n":l.bigint?l.bigint+"n":l.value===null?"null":typeof l.value=="string"?Zt(l.value):typeof l.value=="number"?he(l.value):typeof l.value=="boolean"?l.value?"true":"false":bt(l.value)},GeneratorExpression:function(l,b,f){return this.ComprehensionExpression(l,b,f)},ComprehensionExpression:function(l,b,f){var M,P,k,N,_=this;return M=l.type===t.GeneratorExpression?["("]:["["],A.moz.comprehensionExpressionStartsWithAssignment&&(N=this.generateExpression(l.body,n.Assignment,z),M.push(N)),l.blocks&&Qe(function(){for(P=0,k=l.blocks.length;P<k;++P)N=_.generateExpression(l.blocks[P],n.Sequence,z),P>0||A.moz.comprehensionExpressionStartsWithAssignment?M=de(M,N):M.push(N)}),l.filter&&(M=de(M,"if"+G),N=this.generateExpression(l.filter,n.Sequence,z),M=de(M,["(",N,")"])),A.moz.comprehensionExpressionStartsWithAssignment||(N=this.generateExpression(l.body,n.Assignment,z),M=de(M,N)),M.push(l.type===t.GeneratorExpression?")":"]"),M},ComprehensionBlock:function(l,b,f){var M;return l.left.type===t.VariableDeclaration?M=[l.left.kind,Ue(),this.generateStatement(l.left.declarations[0],De)]:M=this.generateExpression(l.left,n.Call,z),M=de(M,l.of?"of":"in"),M=de(M,this.generateExpression(l.right,n.Sequence,z)),["for"+G+"(",M,")"]},SpreadElement:function(l,b,f){return["...",this.generateExpression(l.argument,n.Assignment,z)]},TaggedTemplateExpression:function(l,b,f){var M=ut;f&ee||(M=xe);var P=[this.generateExpression(l.tag,n.Call,M),this.generateExpression(l.quasi,n.Primary,it)];return be(P,n.TaggedTemplate,b)},TemplateElement:function(l,b,f){return l.value.raw},TemplateLiteral:function(l,b,f){var M,P,k;for(M=["`"],P=0,k=l.quasis.length;P<k;++P)M.push(this.generateExpression(l.quasis[P],n.Primary,z)),P+1<k&&(M.push("${"+G),M.push(this.generateExpression(l.expressions[P],n.Sequence,z)),M.push(G+"}"));return M.push("`"),M},ModuleSpecifier:function(l,b,f){return this.Literal(l,b,f)},ImportExpression:function(l,b,f){return be(["import(",this.generateExpression(l.source,n.Assignment,z),")"],n.Call,b)}},O(we.prototype,we.Expression),we.prototype.generateExpression=function(l,b,f){var M,P;return P=l.type||t.Property,A.verbatim&&l.hasOwnProperty(A.verbatim)?st(l,b):(M=this[P](l,b,f),A.comment&&(M=Tn(l,M)),Ze(M,l))},we.prototype.generateStatement=function(l,b){var f,M;return f=this[l.type](l,b),A.comment&&(f=Tn(l,f)),M=Ze(f).toString(),l.type===t.Program&&!L&&y===""&&M.charAt(M.length-1)===`
`&&(f=E?Ze(f).replaceRight(/\s+$/,""):M.replace(/\s+$/,"")),Ze(f,l)};function ta(l){var b;if(b=new we,Y(l))return b.generateStatement(l,Ce);if(J(l))return b.generateExpression(l,n.Sequence,z);throw new Error("Unknown node type: "+l.type)}function na(l,b){var f=ce(),M,P;return b!=null?(typeof b.indent=="string"&&(f.format.indent.style=b.indent),typeof b.base=="number"&&(f.format.indent.base=b.base),b=$e(f,b),u=b.format.indent.style,typeof b.base=="string"?o=b.base:o=We(u,b.format.indent.base)):(b=f,u=b.format.indent.style,o=We(u,b.format.indent.base)),c=b.format.json,h=b.format.renumber,d=c?!1:b.format.hexadecimal,m=c?"double":b.format.quotes,g=b.format.escapeless,y=b.format.newline,G=b.format.space,b.format.compact&&(y=G=u=o=""),X=b.format.parentheses,D=b.format.semicolons,L=b.format.safeConcatenation,B=b.directive,Z=c?null:b.parse,E=b.sourceMap,S=b.sourceCode,V=b.format.preserveBlankLines&&S!==null,A=b,E&&(e.browser?r=FS.sourceMap.SourceNode:r=NS().SourceNode),M=ta(l),E?(P=M.toStringWithSourceMap({file:b.file,sourceRoot:b.sourceMapRoot}),b.sourceContent&&P.map.setSourceContent(b.sourceMap,b.sourceContent),b.sourceMapWithCode?P:P.map.toString()):(P={code:M.toString(),map:null},b.sourceMapWithCode?P:P.code)}T={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},K=ce().format,e.version=IS.version,e.generate=na,e.attachComments=i.attachComments,e.Precedence=$e({},n),e.browser=!1,e.FORMAT_MINIFY=T,e.FORMAT_DEFAULTS=K})()})(zc)),zc}var HS=YS();const v3=M3(HS);class KS{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:t=>this.replacement=t}}replace(t,n,s,r){t&&n&&(s!=null?t[n][s]=r:t[n]=r)}remove(t,n,s){t&&n&&(s!=null?t[n].splice(s,1):delete t[n])}}class _S extends KS{constructor(t,n){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:s=>this.replacement=s},this.enter=t,this.leave=n}visit(t,n,s,r){if(t){if(this.enter){const a=this.should_skip,o=this.should_remove,u=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,t,n,s,r),this.replacement&&(t=this.replacement,this.replace(n,s,r,t)),this.should_remove&&this.remove(n,s,r);const c=this.should_skip,h=this.should_remove;if(this.should_skip=a,this.should_remove=o,this.replacement=u,c)return t;if(h)return null}let i;for(i in t){const a=t[i];if(a&&typeof a=="object")if(Array.isArray(a)){const o=a;for(let u=0;u<o.length;u+=1){const c=o[u];ol(c)&&(this.visit(c,t,i,u)||u--)}}else ol(a)&&this.visit(a,t,i,null)}if(this.leave){const a=this.replacement,o=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,t,n,s,r),this.replacement&&(t=this.replacement,this.replace(n,s,r,t)),this.should_remove&&this.remove(n,s,r);const u=this.should_remove;if(this.replacement=a,this.should_remove=o,u)return null}}return t}}function ol(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}function X3(e,{enter:t,leave:n}){return new _S(t,n).visit(e,null)}let jS=[],Zr=new Map;function US(e,t={}){const{wrapAsync:n=!1,addReturn:s=!0,emitMiniLocations:r=!0,emitWidgets:i=!0}=t,a=[];let o=ZS(e,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0,onComment:a});const u=ML(a,e.length);let c=[];const h=(y,G)=>{const X=Zr.get("minilang");if(X){const D=`[${y}]`,L=X.getLocations(D,G.start);c=c.concat(L)}else{const D=cu(`"${y}"`,G.start,e);c=c.concat(D)}};let d=[];X3(o,{enter(y,G){if(mL(y)){const{name:X}=y.tag,D=Zr.get(X),L=y.quasi.quasis[0].value.raw,B=y.quasi.start+1;if(r){const A=D.getLocations(L,B);c=c.concat(A)}return this.skip(),this.replace(bL(X,L,B))}if(fL(y,"tidal")){const X=y.quasi.quasis[0].value.raw,D=y.quasi.start+1;if(r){const L=yL(X,D);c=c.concat(L)}return this.skip(),this.replace(gL(X,D))}if(rL(y,G)){if(hl(y.start,u))return;const{quasis:X}=y,{raw:D}=X[0].value;return this.skip(),r&&h(D,y),this.replace(pl(D,y))}if(sL(y)){if(hl(y.start,u))return;const{value:X}=y;return this.skip(),r&&h(X,y),this.replace(pl(X,y))}if(iL(y))return i&&d.push({from:y.arguments[0].start,to:y.arguments[0].end,value:y.arguments[0].raw,min:y.arguments[1]?.value??0,max:y.arguments[2]?.value??1,step:y.arguments[3]?.value,type:"slider"}),this.replace(oL(y));if(aL(y)){const X=y.callee.property.name,D=d.filter(B=>B.type===X).length,L={to:y.end,index:D,type:X,id:t.id};return i&&d.push(L),this.replace(cL(y,L))}if(lL(y,G))return this.replace(pL(y));if(hL(y))return this.replace(dL(y))},leave(y,G,X,D){if(!JS(y))return;let[L,...B]=y.arguments;if(!L)throw new Error("K(...) requires an expression");OS(L)&&(L={type:"CallExpression",callee:L,arguments:[],optional:!1});const{template:A,patternExprs:Z}=QS(L);if(Z.length){const V=[{type:"Literal",value:A},...Z,...B];let T=y.callee;return T.type==="ChainExpression"&&(T=T.expression),T.type==="MemberExpression"?this.replace({type:"CallExpression",callee:ll(T.object),arguments:V,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:V,optional:!1})}const E=[{type:"Literal",value:no(L)},...B];let S=y.callee;return S.type==="ChainExpression"&&(S=S.expression),S.type==="MemberExpression"?this.replace({type:"CallExpression",callee:ll(S.object),arguments:E,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:E,optional:!1})}});let{body:m}=o;if(!m.length)console.warn("empty body -> fallback to silence"),m.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!m?.[m.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(s){const{expression:y}=m[m.length-1];m[m.length-1]={type:"ReturnStatement",argument:y}}let g=v3.generate(o);return n&&(g=`(async ()=>{${g}})()`),r?{output:g,miniLocations:c,widgets:d}:{output:g}}function JS(e){if(e.type!=="CallExpression")return!1;let t=e.callee;return t.type==="ChainExpression"&&(t=t.expression),t.type==="MemberExpression"?!t.computed&&t.property?.name==="K":t.type==="Identifier"&&t.name==="K"}function OS(e){return e.type!=="ArrowFunctionExpression"&&e.type!=="FunctionExpression"||e.params.length?!1:e.body?.type==="BlockStatement"}function no(e){return v3.generate(e,{format:{semicolons:!1}})}function QS(e){const t=cl(e),n=new Map,s=[];if(X3(t,{enter(a,o,u,c){n.set(a,{parent:o,prop:u,index:c});const h=qS(a);h&&(s.push({node:a,patternExpr:h}),this.skip())}}),!s.length)return{template:no(t),patternExprs:[]};s.sort((a,o)=>ul(a.node)-ul(o.node));const r=s.map(({patternExpr:a})=>cl(a));let i=t;return s.forEach(({node:a},o)=>{i=nL(a,tL(o),n,i)}),{template:no(i),patternExprs:r}}function qS(e){if($S(e)){const t=e.arguments?.[0];if(!t)throw new Error("S(...) requires an argument");return t}return w3(e)?e:null}function $S(e){if(e.type!=="CallExpression")return!1;const t=e.callee;return t.type==="Identifier"?t.name==="S":t.type==="MemberExpression"&&!t.computed?t.property?.name==="S":!1}function eL(){return Zr.get("minilang")?.name||"m"}function w3(e){if(e.type!=="CallExpression")return!1;const t=e.callee;if(t.type!=="Identifier"||t.name!==eL())return!1;const n=e.arguments?.[0];return n?.type==="Literal"&&typeof n.value=="string"}function ul(e){if(typeof e.start=="number")return e.start;if(w3(e)){const t=e.arguments?.[1];if(t?.type==="Literal"&&typeof t.value=="number")return t.value}return 0}function tL(e){return{type:"MemberExpression",object:{type:"Identifier",name:"pat"},property:{type:"Literal",value:e},computed:!0,optional:!1}}function nL(e,t,n,s){const r=n.get(e);if(!r||!r.parent)return t;const{parent:i,prop:a,index:o}=r;return Array.isArray(i[a])?i[a][o]=t:i[a]=t,n.set(t,{parent:i,prop:a,index:o}),s}function cl(e){return JSON.parse(JSON.stringify(e))}function ll(e){return{type:"MemberExpression",object:e,property:{type:"Identifier",name:"worklet"},computed:!1,optional:!1}}function sL(e,t,n){return e.type!=="Literal"?!1:e.raw[0]==='"'}function rL(e,t){return e.type==="TemplateLiteral"&&t.type!=="TaggedTemplateExpression"}function pl(e,t){const{start:n}=t,s=Zr.get("minilang");let r="m";return s&&s.name&&(r=s.name),{type:"CallExpression",callee:{type:"Identifier",name:r},arguments:[{type:"Literal",value:e},{type:"Literal",value:n}],optional:!1}}function iL(e){return e.type==="CallExpression"&&e.callee.name==="slider"}function aL(e){return e.type==="CallExpression"&&jS.includes(e.callee.property?.name)}function oL(e){const t="slider_"+e.arguments[0].start;return e.arguments.unshift({type:"Literal",value:t,raw:t}),e.callee.name="sliderWithID",e}function uL(e){return`${e.id||""}_widget_${e.type}_${e.index}`}function cL(e,t){const n=uL(t);return e.arguments.unshift({type:"Literal",value:n,raw:n}),e}function lL(e,t){return e.type==="CallExpression"&&e.callee.name==="samples"&&t.type!=="AwaitExpression"}function pL(e){return{type:"AwaitExpression",argument:e}}function hL(e){return e.type==="LabeledStatement"}function dL(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:e.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:e.label.name,raw:`'${e.label.name}'`}]}}}function mL(e){return e.type==="TaggedTemplateExpression"&&Zr.has(e.tag.name)}function fL(e,t){return e.type==="TaggedTemplateExpression"&&e.tag.name===t}function yL(e,t){return e.split("").reduce((n,s,r)=>(s!=='"'||(!n.length||n[n.length-1].length>1?n.push([r+1]):n[n.length-1].push(r)),n),[]).map(([n,s])=>{const r=e.slice(n,s);return cu(`"${r}"`,t+n-1)}).flat()}function gL(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:e},{type:"Literal",value:t}],optional:!1}}function bL(e,t,n){return{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Literal",value:t},{type:"Literal",value:n}],optional:!1}}function ML(e,t){const n=[],s=[];for(const r of e){const i=r.value.trim();if(i.startsWith("mini-off"))s.push(r.start);else if(i.startsWith("mini-on")){const a=s.pop();n.push([a,r.end])}}for(;s.length;){const r=s.pop();n.push([r,t])}return n}function hl(e,t){for(const[n,s]of t)if(e>=n&&e<s)return!0;return!1}function Mu(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function xu(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Z3=[0,2,4,-1,1,3,5],F3=Z3.map(e=>Math.floor(e*7/12));function A3(e){const{step:t,alt:n,oct:s,dir:r=1}=e,i=Z3[t]+7*n;if(s===void 0)return[r*i];const a=s-F3[t]-4*n;return[r*i,r*a]}var xL=[3,0,4,1,5,2,6];function D3(e){const[t,n,s]=e,r=xL[GL(t)],i=Math.floor((t+1)/7);if(n===void 0)return{step:r,alt:i,dir:s};const a=n+4*i+F3[r];return{step:r,alt:i,oct:a,dir:s}}function GL(e){const t=(e+1)%7;return t<0?7+t:t}var dl=(e,t)=>Array(Math.abs(t)+1).join(e),so=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),CL="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",PL="(AA|A|P|M|m|d|dd)([-+]?\\d+)",vL=new RegExp("^"+CL+"|"+PL+"$");function XL(e){const t=vL.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var ml={};function xn(e){return typeof e=="string"?ml[e]||(ml[e]=wL(e)):xu(e)?xn(FL(e)):Mu(e)?xn(e.name):so}var fl=[0,2,4,5,7,9,11],S3="PMMPPMM";function wL(e){const t=XL(e);if(t[0]==="")return so;const n=+t[0],s=t[1],r=(Math.abs(n)-1)%7,i=S3[r];if(i==="M"&&s==="P")return so;const a=i==="M"?"majorable":"perfectable",o=""+n+s,u=n<0?-1:1,c=n===8||n===-8?n:u*(r+1),h=ZL(a,s),d=Math.floor((Math.abs(n)-1)/7),m=u*(fl[r]+h+12*d),g=(u*(fl[r]+h)%12+12)%12,y=A3({step:r,alt:h,oct:d,dir:u});return{empty:!1,name:o,num:n,q:s,step:r,alt:h,dir:u,type:a,simple:c,semitones:m,chroma:g,coord:y,oct:d}}function L3(e,t){const[n,s=0]=e,r=n*7+s*12<0,i=t||r?[-n,-s,-1]:[n,s,1];return xn(D3(i))}function ZL(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function FL(e){const{step:t,alt:n,oct:s=0,dir:r}=e;if(!r)return"";const i=t+1+7*s,a=i===0?t+1:i,o=r<0?"-":"",u=S3[t]==="M"?"majorable":"perfectable";return o+a+AL(u,n)}function AL(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?dl("A",t):dl("d",e==="perfectable"?t:t+1)}var yl=(e,t)=>Array(Math.abs(t)+1).join(e),E3=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),gl=new Map,DL=e=>"CDEFGAB".charAt(e),zi=e=>e<0?yl("b",-e):yl("#",e),Gu=e=>e[0]==="b"?-e.length:e.length;function Ie(e){const t=JSON.stringify(e),n=gl.get(t);if(n)return n;const s=typeof e=="string"?RL(e):xu(e)?Ie(kL(e)):Mu(e)?Ie(e.name):E3;return gl.set(t,s),s}var SL=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Cu(e){const t=SL.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function LL(e){return Ie(D3(e))}var EL=(e,t)=>(e%t+t)%t,Pa=[0,2,4,5,7,9,11];function RL(e){const t=Cu(e);if(t[0]===""||t[3]!=="")return E3;const n=t[0],s=t[1],r=t[2],i=(n.charCodeAt(0)+3)%7,a=Gu(s),o=r.length?+r:void 0,u=A3({step:i,alt:a,oct:o}),c=n+s+r,h=n+s,d=(Pa[i]+a+120)%12,m=o===void 0?EL(Pa[i]+a,12)-1188:Pa[i]+a+12*(o+1),g=m>=0&&m<=127?m:null,y=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:s,alt:a,chroma:d,coord:u,freq:y,height:m,letter:n,midi:g,name:c,oct:o,pc:h,step:i}}function kL(e){const{step:t,alt:n,oct:s}=e,r=DL(t);if(!r)return"";const i=r+zi(n);return s||s===0?i+s:i}function ln(e,t){const n=Ie(e),s=Array.isArray(t)?t:xn(t).coord;if(n.empty||!s||s.length<2)return"";const r=n.coord,i=r.length===1?[r[0]+s[0]]:[r[0]+s[0],r[1]+s[1]];return LL(i).name}function R3(e,t){const n=e.length;return s=>{if(!t)return"";const r=s<0?(n- -s%n)%n:s%n,i=Math.floor(s/n),a=ln(t,[0,i]);return ln(a,e[r])}}function Bi(e,t){const n=Ie(e),s=Ie(t);if(n.empty||s.empty)return"";const r=n.coord,i=s.coord,a=i[0]-r[0],o=r.length===2&&i.length===2?i[1]-r[1]:-Math.floor(a*7/12),u=s.height===n.height&&s.midi!==null&&n.oct===s.oct&&n.step>s.step;return L3([a,o],u).name}var bl=(e,t)=>Array(t+1).join(e),VL=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function k3(e){const t=VL.exec(e);return t?[t[1],t[2],t[3]]:["","",""]}function yi(e){const[t,n,s]=k3(e);if(n==="")return"";let r=4;for(let a=0;a<s.length;a++)r+=s.charAt(a)===","?-1:1;const i=t[0]==="_"?t.replace(/_/g,"b"):t[0]==="^"?t.replace(/\^/g,"#"):"";return n.charCodeAt(0)>96?n.toUpperCase()+i+(r+1):n+i+r}function V3(e){const t=Ie(e);if(t.empty||!t.oct&&t.oct!==0)return"";const{letter:n,acc:s,oct:r}=t,i=s[0]==="b"?s.replace(/b/g,"_"):s.replace(/#/g,"^"),a=r>4?n.toLowerCase():n,o=r===5?"":r>4?bl("'",r-5):bl(",",4-r);return i+a+o}function zL(e,t){return V3(ln(yi(e),t))}function BL(e,t){return Bi(yi(e),yi(t))}var WL={abcToScientificNotation:yi,scientificToAbcNotation:V3,tokenize:k3,transpose:zL,distance:BL};function NL(e,t){const n=[];for(;t--;n[t]=t+e);return n}function TL(e,t){const n=[];for(;t--;n[t]=e-t);return n}function IL(e,t){return e<t?NL(e,t-e+1):TL(e,e-t+1)}function YL(e,t){const n=t.length,s=(e%n+n)%n;return t.slice(s,n).concat(t.slice(0,s))}function HL(e){return e.filter(t=>t===0||t)}function z3(e){return e.map(t=>Ie(t)).filter(t=>!t.empty).sort((t,n)=>t.height-n.height).map(t=>t.name)}function KL(e){return z3(e).filter((t,n,s)=>n===0||t!==s[n-1])}function _L(e,t=Math.random){let n,s,r=e.length;for(;r;)n=Math.floor(t()*r--),s=e[r],e[r]=e[n],e[n]=s;return e}function B3(e){return e.length===0?[[]]:B3(e.slice(1)).reduce((t,n)=>t.concat(e.map((s,r)=>{const i=n.slice();return i.splice(r,0,e[0]),i})),[])}const jL=Object.freeze(Object.defineProperty({__proto__:null,compact:HL,permutations:B3,range:IL,rotate:YL,shuffle:_L,sortedNoteNames:z3,sortedUniqNoteNames:KL},Symbol.toStringTag,{value:"Module"}));function UL(e,t){const n=[];for(;t--;n[t]=t+e);return n}function JL(e,t){const n=[];for(;t--;n[t]=e-t);return n}function Wi(e,t){return e<t?UL(e,t-e+1):JL(e,e-t+1)}function Us(e,t){const n=t.length,s=(e%n+n)%n;return t.slice(s,n).concat(t.slice(0,s))}function Pu(e){return e.filter(t=>t===0||t)}function OL(e,t=Math.random){let n,s,r=e.length;for(;r;)n=Math.floor(t()*r--),s=e[r],e[r]=e[n],e[n]=s;return e}function W3(e){return e.length===0?[[]]:W3(e.slice(1)).reduce((t,n)=>t.concat(e.map((s,r)=>{const i=n.slice();return i.splice(r,0,e[0]),i})),[])}var QL={compact:Pu,permutations:W3,range:Wi,rotate:Us,shuffle:OL},On={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},vu=e=>Number(e).toString(2).padStart(12,"0"),Ml=e=>parseInt(e,2),qL=/^[01]{12}$/;function Xu(e){return qL.test(e)}var $L=e=>typeof e=="number"&&e>=0&&e<=4095,e7=e=>e&&Xu(e.chroma),xl={[On.chroma]:On};function xt(e){const t=Xu(e)?e:$L(e)?vu(e):Array.isArray(e)?h7(e):e7(e)?e.chroma:On.chroma;return xl[t]=xl[t]||p7(t)}var t7=xt,N3=e=>xt(e).chroma,n7=e=>xt(e).intervals,s7=e=>xt(e).setNum,r7=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function i7(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(r7[n]);return t}function a7(e){return xt(e).intervals.map(t=>ln("C",t))}function o7(){return Wi(2048,4095).map(vu)}function wu(e,t=!0){const n=xt(e).chroma.split("");return Pu(n.map((s,r)=>{const i=Us(r,n);return t&&i[0]==="0"?null:i.join("")}))}function u7(e,t){return xt(e).setNum===xt(t).setNum}function Ni(e){const t=xt(e).setNum;return n=>{const s=xt(n).setNum;return t&&t!==s&&(s&t)===s}}function Ti(e){const t=xt(e).setNum;return n=>{const s=xt(n).setNum;return t&&t!==s&&(s|t)===s}}function T3(e){const t=xt(e);return n=>{const s=Ie(n);return t&&!s.empty&&t.chroma.charAt(s.chroma)==="1"}}function c7(e){const t=T3(e);return n=>n.filter(t)}var I3={get:xt,chroma:N3,num:s7,intervals:n7,chromas:o7,isSupersetOf:Ti,isSubsetOf:Ni,isNoteIncludedIn:T3,isEqual:u7,filter:c7,modes:wu,notes:a7,pcset:t7};function l7(e){const t=e.split("");return t.map((n,s)=>Us(s,t).join(""))}function p7(e){const t=Ml(e),n=l7(e).map(Ml).filter(i=>i>=2048).sort()[0],s=vu(n),r=i7(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:s,intervals:r}}function h7(e){if(e.length===0)return On.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let s=0;s<e.length;s++)t=Ie(e[s]),t.empty&&(t=xn(e[s])),t.empty||(n[t.chroma]=1);return n.join("")}var d7=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],m7=d7;({...On});var Zu=[],si={};function Y3(){return Zu.slice()}function f7(e,t,n){const s=g7(e),r={...xt(e),name:n||"",quality:s,intervals:e,aliases:t};Zu.push(r),r.name&&(si[r.name]=r),si[r.setNum]=r,si[r.chroma]=r,r.aliases.forEach(i=>y7(r,i))}function y7(e,t){si[t]=e}function g7(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}m7.forEach(([e,t,n])=>f7(e.split(" "),n.split(" "),t));Zu.sort((e,t)=>e.setNum-t.setNum);var b7=e=>{const t=e.reduce((n,s)=>{const r=Ie(s).chroma;return r!==void 0&&(n[r]=n[r]||Ie(s).name),n},{});return n=>t[n]};function M7(e,t={}){const n=e.map(s=>Ie(s).pc).filter(s=>s);return Ie.length===0?[]:w7(n,1,t).filter(s=>s.weight).sort((s,r)=>r.weight-s.weight).map(s=>s.name)}var Ii={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Yi=e=>t=>!!(t&e),x7=Yi(Ii.anyThirds),G7=Yi(Ii.perfectFifth),C7=Yi(Ii.anySeventh),P7=Yi(Ii.nonPerfectFifths);function v7(e){const t=parseInt(e.chroma,2);return x7(t)&&G7(t)&&C7(t)}function X7(e){const t=parseInt(e,2);return P7(t)?e:(t|16).toString(2)}function w7(e,t,n){const s=e[0],r=Ie(s).chroma,i=b7(e),a=wu(e,!1),o=[];return a.forEach((u,c)=>{const h=n.assumePerfectFifth&&X7(u);Y3().filter(d=>n.assumePerfectFifth&&v7(d)?d.chroma===h:d.chroma===u).forEach(d=>{const m=d.aliases[0],g=i(c);c!==r?o.push({weight:.5*t,name:`${g}${m}/${s}`}):o.push({weight:1*t,name:`${g}${m}`})})}),o}function zr(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}var H3=[0,2,4,5,7,9,11],K3=({step:e,alt:t})=>(H3[e]+t+120)%12,Fu=({step:e,alt:t,oct:n,dir:s=1})=>s*(H3[e]+t+12*(n===void 0?-100:n)),_3=e=>{const t=Fu(e);return e.oct!==void 0&&t>=-12&&t<=115?t+12:null};function Hi(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var j3=[0,2,4,-1,1,3,5],U3=j3.map(e=>Math.floor(e*7/12));function Ki(e){const{step:t,alt:n,oct:s,dir:r=1}=e,i=j3[t]+7*n;if(s===void 0)return[r*i];const a=s-U3[t]-4*n;return[r*i,r*a]}var Z7=[3,0,4,1,5,2,6];function _i(e){const[t,n,s]=e,r=Z7[F7(t)],i=Math.floor((t+1)/7);if(n===void 0)return{step:r,alt:i,dir:s};const a=n+4*i+U3[r];return{step:r,alt:i,oct:a,dir:s}}function F7(e){const t=(e+1)%7;return t<0?7+t:t}var Gl=(e,t)=>Array(Math.abs(t)+1).join(e),ro={empty:!0,name:"",acc:""},A7="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",D7="(AA|A|P|M|m|d|dd)([-+]?\\d+)",S7=new RegExp("^"+A7+"|"+D7+"$");function Au(e){const t=S7.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Cl={};function vt(e){return typeof e=="string"?Cl[e]||(Cl[e]=L7(e)):Hi(e)?vt(R7(e)):zr(e)?vt(e.name):ro}var Pl=[0,2,4,5,7,9,11],J3="PMMPPMM";function L7(e){const t=Au(e);if(t[0]==="")return ro;const n=+t[0],s=t[1],r=(Math.abs(n)-1)%7,i=J3[r];if(i==="M"&&s==="P")return ro;const a=i==="M"?"majorable":"perfectable",o=""+n+s,u=n<0?-1:1,c=n===8||n===-8?n:u*(r+1),h=E7(a,s),d=Math.floor((Math.abs(n)-1)/7),m=u*(Pl[r]+h+12*d),g=(u*(Pl[r]+h)%12+12)%12,y=Ki({step:r,alt:h,oct:d,dir:u});return{empty:!1,name:o,num:n,q:s,step:r,alt:h,dir:u,type:a,simple:c,semitones:m,chroma:g,coord:y,oct:d}}function Br(e,t){const[n,s=0]=e,r=n*7+s*12<0,i=t||r?[-n,-s,-1]:[n,s,1];return vt(_i(i))}function E7(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function R7(e){const{step:t,alt:n,oct:s=0,dir:r}=e;if(!r)return"";const i=t+1+7*s,a=i===0?t+1:i,o=r<0?"-":"",u=J3[t]==="M"?"majorable":"perfectable";return o+a+k7(u,n)}function k7(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Gl("A",t):Gl("d",e==="perfectable"?t:t+1)}var vl=(e,t)=>Array(Math.abs(t)+1).join(e),O3={empty:!0,name:"",pc:"",acc:""},Xl=new Map,Du=e=>"CDEFGAB".charAt(e),Su=e=>e<0?vl("b",-e):vl("#",e),Lu=e=>e[0]==="b"?-e.length:e.length;function Gn(e){const t=JSON.stringify(e),n=Xl.get(t);if(n)return n;const s=typeof e=="string"?B7(e):Hi(e)?Gn(W7(e)):zr(e)?Gn(e.name):O3;return Xl.set(t,s),s}var V7=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function ji(e){const t=V7.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function Eu(e){return Gn(_i(e))}var z7=(e,t)=>(e%t+t)%t,va=[0,2,4,5,7,9,11];function B7(e){const t=ji(e);if(t[0]===""||t[3]!=="")return O3;const n=t[0],s=t[1],r=t[2],i=(n.charCodeAt(0)+3)%7,a=Lu(s),o=r.length?+r:void 0,u=Ki({step:i,alt:a,oct:o}),c=n+s+r,h=n+s,d=(va[i]+a+120)%12,m=o===void 0?z7(va[i]+a,12)-1188:va[i]+a+12*(o+1),g=m>=0&&m<=127?m:null,y=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:s,alt:a,chroma:d,coord:u,freq:y,height:m,letter:n,midi:g,name:c,oct:o,pc:h,step:i}}function W7(e){const{step:t,alt:n,oct:s}=e,r=Du(t);if(!r)return"";const i=r+Su(n);return s||s===0?i+s:i}function Ws(e,t){const n=Gn(e),s=Array.isArray(t)?t:vt(t).coord;if(n.empty||!s||s.length<2)return"";const r=n.coord,i=r.length===1?[r[0]+s[0]]:[r[0]+s[0],r[1]+s[1]];return Eu(i).name}function Ui(e,t){const n=e.length;return s=>{if(!t)return"";const r=s<0?(n- -s%n)%n:s%n,i=Math.floor(s/n),a=Ws(t,[0,i]);return Ws(a,e[r])}}function Ru(e,t){const n=Gn(e),s=Gn(t);if(n.empty||s.empty)return"";const r=n.coord,i=s.coord,a=i[0]-r[0],o=r.length===2&&i.length===2?i[1]-r[1]:-Math.floor(a*7/12),u=s.height===n.height&&s.midi!==null&&n.midi!==null&&n.step>s.step;return Br([a,o],u).name}var Q3=(e,t)=>Array(Math.abs(t)+1).join(e);function Js(e,t,n){return function(...s){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,s)}}var q3=Js("isNamed","isNamedPitch",zr);const $3=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:Lu,altToAcc:Su,chroma:K3,coordToInterval:Br,coordToNote:Eu,coordinates:Ki,deprecate:Js,distance:Ru,fillStr:Q3,height:Fu,interval:vt,isNamed:q3,isNamedPitch:zr,isPitch:Hi,midi:_3,note:Gn,pitch:_i,stepToLetter:Du,tokenizeInterval:Au,tokenizeNote:ji,tonicIntervalsTransposer:Ui,transpose:Ws},Symbol.toStringTag,{value:"Module"}));var N7=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],T7=N7,I7={...On,name:"",quality:"Unknown",intervals:[],aliases:[]},Os=[],ls={};function ku(e){return ls[e]||I7}var Y7=Js("ChordType.chordType","ChordType.get",ku);function H7(){return Os.map(e=>e.name).filter(e=>e)}function K7(){return Os.map(e=>e.aliases[0]).filter(e=>e)}function _7(){return Object.keys(ls)}function Ji(){return Os.slice()}var j7=Js("ChordType.entries","ChordType.all",Ji);function U7(){Os=[],ls={}}function ex(e,t,n){const s=O7(e),r={...xt(e),name:n||"",quality:s,intervals:e,aliases:t};Os.push(r),r.name&&(ls[r.name]=r),ls[r.setNum]=r,ls[r.chroma]=r,r.aliases.forEach(i=>J7(r,i))}function J7(e,t){ls[t]=e}function O7(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}T7.forEach(([e,t,n])=>ex(e.split(" "),n.split(" "),t));Os.sort((e,t)=>e.setNum-t.setNum);var tx={names:H7,symbols:K7,get:ku,all:Ji,add:ex,removeAll:U7,keys:_7,entries:j7,chordType:Y7},Q7=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],q7=Q7,$7={...On,intervals:[],aliases:[]},Oi=[],ps={};function nx(){return Oi.map(e=>e.name)}function Qi(e){return ps[e]||$7}var eE=Qi;function Qs(){return Oi.slice()}var tE=Qs;function nE(){return Object.keys(ps)}function sE(){Oi=[],ps={}}function sx(e,t,n=[]){const s={...xt(e),name:t,intervals:e,aliases:n};return Oi.push(s),ps[s.name]=s,ps[s.setNum]=s,ps[s.chroma]=s,s.aliases.forEach(r=>rE(s,r)),s}function rE(e,t){ps[t]=e}q7.forEach(([e,t,...n])=>sx(e.split(" "),t,n));var rx={names:nx,get:Qi,all:Qs,add:sx,removeAll:sE,keys:nE,entries:tE,scaleType:eE},io={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Vu(e){const[t,n,s,r]=ji(e);return t===""?["",e]:t==="A"&&r==="ug"?["","aug"]:[t+n,s+r]}function Ms(e){if(e==="")return io;if(Array.isArray(e)&&e.length===2)return ri(e[1],e[0]);{const[t,n]=Vu(e),s=ri(n,t);return s.empty?ri(e):s}}function ri(e,t,n){const s=ku(e),r=Gn(t||""),i=Gn(n||"");if(s.empty||t&&r.empty||n&&i.empty)return io;const a=Ru(r.pc,i.pc),o=s.intervals.indexOf(a)+1;if(!i.empty&&!o)return io;const u=Array.from(s.intervals);for(let m=1;m<o;m++){const g=u[0][0],y=u[0][1],G=parseInt(g,10)+7;u.push(`${G}${y}`),u.shift()}const c=r.empty?[]:u.map(m=>Ws(r,m));e=s.aliases.indexOf(e)!==-1?e:s.aliases[0];const h=`${r.empty?"":r.pc}${e}${i.empty||o<=1?"":"/"+i.pc}`,d=`${t?r.pc+" ":""}${s.name}${o>1&&n?" over "+i.pc:""}`;return{...s,name:d,symbol:h,type:s.name,root:i.name,intervals:u,rootDegree:o,tonic:r.name,notes:c}}var iE=Js("Chord.chord","Chord.get",Ms);function aE(e,t){const[n,s]=Vu(e);return n?Ws(n,t)+s:e}function oE(e){const t=Ms(e),n=Ti(t.chroma);return Qs().filter(s=>n(s.chroma)).map(s=>s.name)}function uE(e){const t=Ms(e),n=Ti(t.chroma);return Ji().filter(s=>n(s.chroma)).map(s=>t.tonic+s.aliases[0])}function cE(e){const t=Ms(e),n=Ni(t.chroma);return Ji().filter(s=>n(s.chroma)).map(s=>t.tonic+s.aliases[0])}function lE(e){const{intervals:t,tonic:n}=Ms(e),s=Ui(t,n);return r=>r?s(r>0?r-1:r):""}function pE(e){const{intervals:t,tonic:n}=Ms(e);return Ui(t,n)}var hE={getChord:ri,get:Ms,detect:M7,chordScales:oE,extended:uE,reduced:cE,tokenize:Vu,transpose:aE,degrees:lE,steps:pE,chord:iE},dE=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],mE=dE,qi=[];mE.forEach(([e,t,n])=>CE(e,t,n));var fE={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function yE(){return qi.reduce((e,t)=>(t.names.forEach(n=>e.push(n)),e),[])}function gE(){return qi.map(e=>e.shorthand)}var bE=/^([^.]+)(\.*)$/;function zu(e){const[t,n,s]=bE.exec(e)||[],r=qi.find(o=>o.shorthand===n||o.names.includes(n));if(!r)return fE;const i=PE(r.fraction,s.length),a=i[0]/i[1];return{...r,name:e,dots:s,value:a,fraction:i}}var ME=e=>zu(e).value,xE=e=>zu(e).fraction,GE={names:yE,shorthands:gE,get:zu,value:ME,fraction:xE};function CE(e,t,n){qi.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:n})}function PE(e,t){const n=Math.pow(2,t);let s=e[0]*n,r=e[1]*n;const i=s;for(let a=0;a<t;a++)s+=i/Math.pow(2,a+1);for(;s%2===0&&r%2===0;)s/=2,r/=2;return[s,r]}function vE(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var ix=vt,XE=e=>vt(e).name,wE=e=>vt(e).semitones,ZE=e=>vt(e).q,FE=e=>vt(e).num;function AE(e){const t=vt(e);return t.empty?"":t.simple+t.q}function DE(e){const t=vt(e);if(t.empty)return"";const n=(7-t.step)%7,s=t.type==="perfectable"?-t.alt:-(t.alt+1);return vt({step:n,alt:s,oct:t.oct,dir:t.dir}).name}var SE=[1,2,2,3,3,4,5,5,6,6,7,7],LE="P m M m M P d P m M m M".split(" ");function EE(e){const t=e<0?-1:1,n=Math.abs(e),s=n%12,r=Math.floor(n/12);return t*(SE[s]+7*r)+LE[s]}var RE=Bi,ax=ox((e,t)=>[e[0]+t[0],e[1]+t[1]]),kE=e=>t=>ax(e,t),VE=ox((e,t)=>[e[0]-t[0],e[1]-t[1]]);function zE(e,t){const n=ix(e);if(n.empty)return"";const[s,r,i]=n.coord;return Br([s+t,r,i]).name}var ms={names:vE,get:ix,name:XE,num:FE,semitones:wE,quality:ZE,fromSemitones:EE,distance:RE,invert:DE,simplify:AE,add:ax,addTo:kE,substract:VE,transposeFifths:zE};function ox(e){return(t,n)=>{const s=vt(t).coord,r=vt(n).coord;if(s&&r){const i=e(s,r);return Br(i).name}}}function ux(e){return+e>=0&&+e<=127}function cx(e){if(ux(e))return+e;const t=Ie(e);return t.empty?null:t.midi}function BE(e,t=440){return Math.pow(2,(e-69)/12)*t}var WE=Math.log(2),NE=Math.log(440);function Bu(e){const t=12*(Math.log(e)-NE)/WE+69;return Math.round(t*100)/100}var TE="C C# D D# E F F# G G# A A# B".split(" "),IE="C Db D Eb E F Gb G Ab A Bb B".split(" ");function ns(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const n=(t.sharps===!0?TE:IE)[e%12];if(t.pitchClass)return n;const s=Math.floor(e/12)-1;return n+s}function Wu(e){return e%12}function YE(e){return e.split("").reduce((t,n,s)=>(s<12&&n==="1"&&t.push(s),t),[])}function HE(e){return e.map(Wu).sort((t,n)=>t-n).filter((t,n,s)=>n===0||t!==s[n-1])}function Nu(e){return Array.isArray(e)?HE(e):YE(e)}function KE(e){const t=Nu(e);return n=>{const s=Wu(n);for(let r=0;r<12;r++){if(t.includes(s+r))return n+r;if(t.includes(s-r))return n-r}}}function lx(e,t){const n=Nu(e),s=n.length;return r=>{const i=r<0?(s- -r%s)%s:r%s,a=Math.floor(r/s);return n[i]+a*12+t}}function _E(e,t){const n=lx(e,t);return s=>{if(s!==0)return n(s>0?s-1:s)}}var jE={chroma:Wu,freqToMidi:Bu,isMidi:ux,midiToFreq:BE,midiToNoteName:ns,pcsetNearest:KE,pcset:Nu,pcsetDegrees:_E,pcsetSteps:lx,toMidi:cx},UE=["C","D","E","F","G","A","B"],px=e=>e.name,hx=e=>e.map(Ie).filter(t=>!t.empty);function JE(e){return e===void 0?UE.slice():Array.isArray(e)?hx(e).map(px):[]}var pn=Ie,OE=e=>pn(e).name,QE=e=>pn(e).pc,qE=e=>pn(e).acc,$E=e=>pn(e).oct,eR=e=>pn(e).midi,tR=e=>pn(e).freq,nR=e=>pn(e).chroma;function dx(e){return ns(e)}function sR(e){return ns(Bu(e))}function rR(e){return ns(Bu(e),{sharps:!0})}function iR(e){return ns(e,{sharps:!0})}var aR=Bi,on=ln,oR=ln,mx=e=>t=>on(t,e),uR=mx,fx=e=>t=>on(e,t),cR=fx;function gi(e,t){return on(e,[t,0])}var lR=gi;function pR(e,t){return on(e,[0,t])}var Tu=(e,t)=>e.height-t.height,hR=(e,t)=>t.height-e.height;function yx(e,t){return t=t||Tu,hx(e).sort(t).map(px)}function gx(e){return yx(e,Tu).filter((t,n,s)=>n===0||t!==s[n-1])}var dR=e=>{const t=pn(e);return t.empty?"":ns(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function bx(e,t){const n=pn(e);if(n.empty)return"";const s=pn(t||ns(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(s.empty||s.chroma!==n.chroma)return"";if(n.oct===void 0)return s.pc;const r=n.chroma-n.alt,i=s.chroma-s.alt,a=r>11||i<0?-1:r<0||i>11?1:0,o=n.oct+a;return s.pc+o}var yn={names:JE,get:pn,name:OE,pitchClass:QE,accidentals:qE,octave:$E,midi:eR,ascending:Tu,descending:hR,distance:aR,sortedNames:yx,sortedUniqNames:gx,fromMidi:dx,fromMidiSharps:iR,freq:tR,fromFreq:sR,fromFreqSharps:rR,chroma:nR,transpose:on,tr:oR,transposeBy:mx,trBy:uR,transposeFrom:fx,trFrom:cR,transposeFifths:gi,transposeOctaves:pR,trFifths:lR,simplify:dR,enharmonic:bx},Mx={empty:!0,name:"",chordType:""},wl={};function Qn(e){return typeof e=="string"?wl[e]||(wl[e]=xR(e)):typeof e=="number"?Qn($i[e]||""):xu(e)?yR(e):Mu(e)?Qn(e.name):Mx}var mR=Qn;function fR(e=!0){return(e?$i:MR).slice()}function yR(e){return Qn(zi(e.alt)+$i[e.step])}var gR=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function bR(e){return gR.exec(e)||["","","",""]}var xx="I II III IV V VI VII",$i=xx.split(" "),MR=xx.toLowerCase().split(" ");function xR(e){const[t,n,s,r]=bR(e);if(!s)return Mx;const i=s.toUpperCase(),a=$i.indexOf(i),o=Gu(n),u=1;return{empty:!1,name:t,roman:s,interval:xn({step:a,alt:o,dir:u}).name,acc:n,chordType:r,alt:o,step:a,major:s===i,oct:0,dir:u}}var GR={names:fR,get:Qn,romanNumeral:mR},Mt=Object.freeze([]),Gx={type:"major",tonic:"",alteration:0,keySignature:""},ii={tonic:"",grades:Mt,intervals:Mt,scale:Mt,triads:Mt,chords:Mt,chordsHarmonicFunction:Mt,chordScales:Mt,secondaryDominants:Mt,secondaryDominantSupertonics:Mt,substituteDominantsMinorRelative:Mt,substituteDominants:Mt,substituteDominantSupertonics:Mt,secondaryDominantsMinorRelative:Mt},CR={...Gx,...ii,type:"major",minorRelative:"",scale:Mt,substituteDominants:Mt,secondaryDominantSupertonics:Mt,substituteDominantsMinorRelative:Mt},PR={...Gx,type:"minor",relativeMajor:"",natural:ii,harmonic:ii,melodic:ii},Xa=(e,t,n="")=>t.map((s,r)=>`${e[r]}${n}${s}`);function ea(e,t,n,s,r){return i=>{const a=e.map(g=>Qn(g).interval||""),o=a.map(g=>on(i,g)),u=Xa(o,n),c=o.map(g=>on(g,"5P")).map(g=>o.includes(g)&&!u.includes(g+"7")?g+"7":""),h=Zl(c,t),d=c.map(g=>{if(!g)return"";const y=g.slice(0,-1);return on(y,"5d")+"7"}),m=Zl(d,t);return{tonic:i,grades:e,intervals:a,scale:o,triads:Xa(o,t),chords:u,chordsHarmonicFunction:s.slice(),chordScales:Xa(o,r," "),secondaryDominants:c,secondaryDominantSupertonics:h,substituteDominants:d,substituteDominantSupertonics:m,secondaryDominantsMinorRelative:h,substituteDominantsMinorRelative:m}}}var Zl=(e,t)=>e.map((n,s)=>{if(!n)return"";const r=n.slice(0,-1),i=on(r,"5P");return t[s].endsWith("m")?i+"m7":i+"m7b5"}),Cx=(e,t)=>{const n=Ie(e),s=Ie(t);return n.empty||s.empty?0:s.coord[0]-n.coord[0]},vR=ea("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),XR=ea("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),wR=ea("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),ZR=ea("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function FR(e){const t=Ie(e).pc;if(!t)return CR;const n=vR(t),s=Cx("C",t);return{...n,type:"major",minorRelative:on(t,"-3m"),alteration:s,keySignature:zi(s)}}function AR(e){const t=Ie(e).pc;if(!t)return PR;const n=Cx("C",t)-3;return{type:"minor",tonic:t,relativeMajor:on(t,"3m"),alteration:n,keySignature:zi(n),natural:XR(t),harmonic:wR(t),melodic:ZR(t)}}function DR(e){return typeof e=="number"?gi("C",e):typeof e=="string"&&/^b+|#+$/.test(e)?gi("C",Gu(e)):null}var SR={majorKey:FR,majorTonicFromKeySignature:DR,minorKey:AR},LR=xn;function ER(e){const t=xn(e);return t.empty?"":t.simple+t.q}function RR(e,t){const n=LR(e);if(n.empty)return"";const[s,r,i]=n.coord;return L3([s+t,r,i]).name}var Iu=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Fl={...On,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Yu=Iu.map(BR),ao={};Yu.forEach(e=>{ao[e.name]=e,e.aliases.forEach(t=>{ao[t]=e})});function fs(e){return typeof e=="string"?ao[e.toLowerCase()]||Fl:e&&e.name?fs(e.name):Fl}var kR=fs;function Px(){return Yu.slice()}var VR=Px;function zR(){return Yu.map(e=>e.name)}function BR(e){const[t,n,s,r,i,a,o]=e,u=o?[o]:[],c=Number(n).toString(2);return{empty:!1,intervals:Qi(r).intervals,modeNum:t,chroma:c,normalized:c,name:r,setNum:n,alt:s,triad:i,seventh:a,aliases:u}}function WR(e,t){return fs(e).intervals.map(n=>ln(t,n))}function vx(e){return(t,n)=>{const s=fs(t);if(s.empty)return[];const r=Us(s.modeNum,e),i=s.intervals.map(a=>ln(n,a));return r.map((a,o)=>i[o]+a)}}var NR=vx(Iu.map(e=>e[4])),TR=vx(Iu.map(e=>e[5]));function Xx(e,t){const n=fs(t),s=fs(e);return n.empty||s.empty?"":ER(RR("1P",s.alt-n.alt))}function IR(e,t,n){return ln(n,Xx(e,t))}var YR={get:fs,names:zR,all:Px,distance:Xx,relativeTonic:IR,notes:WR,triads:NR,seventhChords:TR,entries:VR,mode:kR};function HR(e){const[t,n,s,r]=Cu(e);return t===""?wa("",e):t==="A"&&r==="ug"?wa("","aug"):wa(t+n,s+r)}function wa(e,t){const n=t.split("/");if(n.length===1)return[e,n[0],""];const[s,r,i,a]=Cu(n[1]);return s!==""&&i===""&&a===""?[e,n[0],s+r]:[e,t,""]}function KR(e,t){return t.map(Qn).map(n=>ln(e,xn(n))+n.chordType)}function _R(e,t){return t.map(n=>{const[s,r]=HR(n),i=Bi(e,s);return Qn(xn(i)).name+r})}var jR={fromRomanNumerals:KR,toRomanNumerals:_R};function wx(e){const t=Pu(e.map(n=>typeof n=="number"?n:cx(n)));return!e.length||t.length!==e.length?[]:t.reduce((n,s)=>{const r=n[n.length-1];return n.concat(Wi(r,s).slice(1))},[t[0]])}function UR(e,t){return wx(e).map(n=>ns(n,t))}var JR={numeric:wx,chromatic:UR},OR={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Zx(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),n=Ie(e.substring(0,t));if(n.empty){const r=Ie(e);return r.empty?["",e]:[r.name,""]}const s=e.substring(n.name.length+1).toLowerCase();return[n.name,s.length?s:""]}var QR=nx;function Cn(e){const t=Array.isArray(e)?e:Zx(e),n=Ie(t[0]).name,s=Qi(t[1]);if(s.empty)return OR;const r=s.name,i=n?s.intervals.map(o=>ln(n,o)):[],a=n?n+" "+r:r;return{...s,name:a,type:r,tonic:n,notes:i}}var qR=Cn;function $R(e,t={}){const n=N3(e),s=Ie(t.tonic??e[0]??""),r=s.chroma;if(r===void 0)return[];const i=n.split("");i[r]="1";const a=Us(r,i).join(""),o=Qs().find(c=>c.chroma===a),u=[];return o&&u.push(s.name+" "+o.name),t.match==="exact"||Fx(a).forEach(c=>{u.push(s.name+" "+c)}),u}function ek(e){const t=Cn(e),n=Ni(t.chroma);return Y3().filter(s=>n(s.chroma)).map(s=>s.aliases[0])}function Fx(e){const t=Xu(e)?e:Cn(e).chroma,n=Ti(t);return Qs().filter(s=>n(s.chroma)).map(s=>s.name)}function tk(e){const t=Ni(Cn(e).chroma);return Qs().filter(n=>t(n.chroma)).map(n=>n.name)}function Ax(e){const t=e.map(r=>Ie(r).pc).filter(r=>r),n=t[0],s=gx(t);return Us(s.indexOf(n),s)}function nk(e){const t=Cn(e);if(t.empty)return[];const n=t.tonic?t.notes:t.intervals;return wu(t.chroma).map((s,r)=>{const i=Cn(s).name;return i?[n[r],i]:["",""]}).filter(s=>s[0])}function sk(e){const t=Array.isArray(e)?Ax(e):Cn(e).notes,n=t.map(s=>Ie(s).chroma);return s=>{const r=Ie(typeof s=="number"?dx(s):s),i=r.height;if(i===void 0)return;const a=i%12,o=n.indexOf(a);if(o!==-1)return bx(r.name,t[o])}}function rk(e){const t=sk(e);return(n,s)=>{const r=Ie(n).height,i=Ie(s).height;return r===void 0||i===void 0?[]:Wi(r,i).map(t).filter(a=>a)}}function ik(e){const{intervals:t,tonic:n}=Cn(e),s=R3(t,n);return r=>r?s(r>0?r-1:r):""}function ak(e){const{intervals:t,tonic:n}=Cn(e);return R3(t,n)}var bi={degrees:ik,detect:$R,extended:Fx,get:Cn,modeNames:nk,names:QR,rangeOf:rk,reduced:tk,scaleChords:ek,scaleNotes:Ax,steps:ak,tokenize:Zx,scale:qR},ok={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},uk=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function ck(){return uk.slice()}var lk=/^(\d*\d(?:\+\d)*)\/(\d+)$/,Al=new Map;function pk(e){const t=JSON.stringify(e),n=Al.get(t);if(n)return n;const s=mk(Hu(e));return Al.set(t,s),s}function Hu(e){if(typeof e=="string"){const[i,a,o]=lk.exec(e)||[];return Hu([a,o])}const[t,n]=e,s=+n;if(typeof t=="number")return[t,s];const r=t.split("+").map(i=>+i);return r.length===1?[r[0],s]:[r,s]}var hk={names:ck,parse:Hu,get:pk},dk=e=>Math.log(e)/Math.log(2)%1===0;function mk([e,t]){const n=Array.isArray(e)?e.reduce((o,u)=>o+u,0):e,s=t;if(n===0||s===0)return ok;const r=Array.isArray(e)?`${e.join("+")}/${t}`:`${e}/${t}`,i=Array.isArray(e)?e:[],a=s===4||s===2?"simple":s===8&&n%3===0?"compound":dk(s)?"irregular":"irrational";return{empty:!1,name:r,type:a,upper:n,lower:s,additive:i}}var fk=$3,yk=I3,gk=tx,bk=rx;const Mk=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:WL,Array:jL,Chord:hE,ChordDictionary:gk,ChordType:tx,Collection:QL,Core:$3,DurationValue:GE,Interval:ms,Key:SR,Midi:jE,Mode:YR,Note:yn,PcSet:yk,Pcset:I3,Progression:jR,Range:JR,RomanNumeral:GR,Scale:bi,ScaleDictionary:bk,ScaleType:rx,TimeSignature:hk,Tonal:fk,accToAlt:Lu,altToAcc:Su,chroma:K3,coordToInterval:Br,coordToNote:Eu,coordinates:Ki,deprecate:Js,distance:Ru,fillStr:Q3,height:Fu,interval:vt,isNamed:q3,isNamedPitch:zr,isPitch:Hi,midi:_3,note:Gn,pitch:_i,stepToLetter:Du,tokenizeInterval:Au,tokenizeNote:ji,tonicIntervalsTransposer:Ui,transpose:Ws},Symbol.toStringTag,{value:"Module"})),xk=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Gk=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],Ck=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Pk={b:-1,"#":1},vk=e=>{const[t,...n]=e.split("");return Gk.indexOf(t.toLowerCase())+n.reduce((s,r)=>s+Pk[r],0)};function Xk(e){const t=(e||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return t?t.slice(1):[]}const oo=e=>e%12,Dx=e=>{let t=Number(e);return isNaN(t)?ms.semitones(e):t},uo=(e,t)=>{if(typeof e=="number")return e;if(typeof e=="string")return gn(e,t)},wk=(e,t=!1)=>{const n=Math.floor(e/12)-1;return(t?Ck:xk)[e%12]+n};function Zk(e,t,n=1){e=e.map(r=>typeof r=="string"?gn(r):r);const s=Math.floor(t/e.length)*n*12;return t=Ut(t,e.length),e[t]+s}function Sx(e,t,n){let s=0,r=1/0;return t.forEach((i,a)=>{const o=Math.abs(i-e);(!n&&o<r||n&&o<=r)&&(s=a,r=o)}),s}let Za={};function Fk(e,t,n,s){const[r,i]=bi.tokenize(t),a=uo(r),o=oo(a);if(!Za[i]){const{intervals:d}=bi.get(`C ${i}`);Za[i]=d.map(Dx)}const u=Za[i];if(!u)return null;let c=a;if(n){n=uo(n,3);const d=oo(n),m=Ut(d-o,12),g=Sx(m,u,s);e=e+g,c=n-m}const h=Math.floor(e/u.length)*12;return e=Ut(e,u.length),u[e]+c+h}let Dl={below:e=>e.slice(-1)[0],duck:e=>e.slice(-1)[0],above:e=>e[0],root:e=>e[0]};function Ak({chord:e,dictionary:t,offset:n=0,n:s,mode:r="below",anchor:i="c5",octaves:a=1}){const[o,u]=Xk(e),c=vk(o);i=uo(i?.note||i,4);const h=oo(i),d=t[u].map(E=>(typeof E=="string"?E.split(" "):E).map(Dx));let m,g,y=d.map((E,S)=>{const V=Dl[r](E),T=Ut(h-V-c,12);return(m===void 0||T<m)&&(m=T,g=S),T});r==="root"&&(g=0);const G=Math.ceil(n/d.length)*12,X=Ut(g+n,d.length),D=d[X],L=Dl[r](D),B=i-y[X]+G,A=D.map(E=>B-L+E);let Z=A.map(E=>wk(E));return r==="duck"&&(Z=Z.filter((E,S)=>A[S]!==i)),s!==void 0?[Zk(Z,s,a)]:Z}const Dk=e=>(e<=0?-1:1)+e*7+"P";function Ku(e){e=e.replaceAll(":"," ");const t=bi.get(e),{tonic:n,empty:s}=t;if(s&&ys(e)||s&&!n)throw new Error(`Scale name ${e} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(s)throw new Error(`Invalid scale name "${e}"`);return t}function Sk(e,t){e=Math.ceil(e);let{intervals:n,tonic:s}=Ku(t);s=s||"C";const{pc:r,oct:i=3}=yn.get(s),a=Math.floor(e/n.length),o=Ut(e,n.length),u=ms.add(n[o],Dk(a));return yn.transpose(r+i,u)}function Sl(e,t,n){let{notes:s}=Ku(e);if(s=s.map(d=>yn.get(d).pc),t=Number(t),isNaN(t))throw new Error(`scale offset "${t}" not a number`);const{pc:r,oct:i=3}=yn.get(n),a=s.indexOf(r);if(a===-1)throw new Error(`note "${n}" is not in scale "${e}"`);let o=a,u=i,c=r;const h=Math.sign(t);for(;Math.abs(o-a)<Math.abs(t);){o+=h;const d=Ut(o,s.length);h<0&&c[0]==="C"&&(u+=h),c=s[d],h>0&&c[0]==="C"&&(u+=h)}return c+u}const{transpose:Lk,trans:Ek}=R(["transpose","trans"],function(e,t){return t.withHap(n=>{const s=n.value.note??n.value;if(typeof s=="number"){let a;typeof e=="number"?a=e:typeof e=="string"&&(a=ms.semitones(e)||0);const o=s+a;return typeof n.value=="object"?n.withValue(()=>({...n.value,note:o})):n.withValue(()=>o)}if(typeof s!="string"||!ys(s))return yt(`[tonal] transpose: not a note "${s}"`,"warning"),n;const r=isNaN(Number(e))?String(e):ms.fromSemitones(e),i=yn.transpose(s,r);return typeof n.value=="object"?n.withValue(()=>({...n.value,note:i})):n.withValue(()=>i)})}),{scaleTranspose:Rk,scaleTrans:kk,strans:Vk}=R(["scaleTranspose","scaleTrans","strans"],function(e,t){return t.withHap(n=>{if(!n.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof n.value=="object")return n.withValue(()=>({...n.value,note:Sl(n.context.scale,Number(e),n.value.note)}));if(typeof n.value!="string")throw new Error("can only use scaleTranspose with notes");return n.withValue(()=>Sl(n.context.scale,Number(e),n.value))})});function zk(e){let t=Number(e),n=0;if(isNaN(t)){e=String(e);const s=/^(-?\d+)([#bsf]*)$/.exec(e);if(!s)throw new Error(`invalid scale step "${e}", expected number or integer with optional # b suffixes`);t=Number(s[1]);const r=s[2]||"";n=ho(r)}return[t,n]}let Fa={};function Bk(e,t,n=!0){let s=typeof t=="string"?gn(t):t;if(Fa[e]===void 0){const{intervals:d,tonic:m}=Ku(e),{pc:g}=yn.get(m),y=d.concat("8P").map(X=>yn.transpose(g+"0",X)),G=y.map(gn);Fa[e]=[G,y]}const[r,i]=Fa[e],a=r[0],o=Math.floor((s-a)/12),u=r.map(d=>d+12*o),c=Sx(s,u,n),h=i[c];return yn.transpose(h,ms.fromSemitones(12*o))}const Wk=R("scale",function(e,t){return Array.isArray(e)&&(e=e.flat().join(" ")),t.withHaps(n=>(n=n.map(s=>{let r=s.value;const i=typeof r=="object";r=i?r:{n:r};const{note:a,n:o,value:u,...c}=r,h=a??o??u;if(h===void 0)return yt(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(r).join(", ")}]`,"error"),s;let d;if(ys(h))d=Bk(e,h),s.value={...c,note:d};else try{const[m,g]=zk(h);c.anchor?d=Fk(m,e,c.anchor):d=Sk(m,e),g!=0&&(d=yn.transpose(d,ms.fromSemitones(g)))}catch(m){Fr(m,"tonal");return}return s.value=i?{...c,note:d}:d,s.setContext({...s.context,scale:e})}),gs(n)))},!0,!0);var Ll={},ti={},ar={},El;function Lx(){if(El)return ar;El=1,ar.__esModule=!0,ar.getBestVoicing=void 0;function e(t){var n=t.chord,s=t.range,r=t.finder,i=t.picker,a=t.lastVoicing,o=r(n,s);return o.length?i(o,a):[]}return ar.getBestVoicing=e,ar}var or={};const Ex=AS(Mk);var ur={},Rl;function Rx(){if(Rl)return ur;Rl=1,ur.__esModule=!0,ur.tokenizeChord=void 0;function e(t){var n=(t||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return n?n.slice(1):[]}return ur.tokenizeChord=e,ur}var kl;function Nk(){if(kl)return or;kl=1,or.__esModule=!0,or.voicingsInRange=void 0;var e=Ex,t=kx(),n=Rx();function s(r,i,a){i===void 0&&(i=t.lefthand),a===void 0&&(a=["D3","A4"]);var o=(0,n.tokenizeChord)(r),u=o[0],c=o[1];if(!i[c])return[];var h=i[c].map(function(m){return m.split(" ")}),d=e.Range.chromatic(a);return h.reduce(function(m,g){var y=g.map(function(L){return e.Interval.substract(L,g[0])}),G=e.Note.transpose(u,g[0]),X=d.filter(function(L){return e.Note.chroma(L)===e.Note.chroma(G)}).filter(function(L){return e.Note.midi(e.Note.transpose(L,y[y.length-1]))<=e.Note.midi(a[1])}).map(function(L){return e.Note.enharmonic(L,G)}),D=X.map(function(L){return y.map(function(B){return e.Note.transpose(L,B)})});return m.concat(D)},[])}return or.voicingsInRange=s,or}var Vl;function kx(){return Vl||(Vl=1,(function(e){var t=ti.__assign||function(){return t=Object.assign||function(o){for(var u,c=1,h=arguments.length;c<h;c++){u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])}return o},t.apply(this,arguments)},n=ti.__rest||function(o,u){var c={};for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&u.indexOf(h)<0&&(c[h]=o[h]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,h=Object.getOwnPropertySymbols(o);d<h.length;d++)u.indexOf(h[d])<0&&Object.prototype.propertyIsEnumerable.call(o,h[d])&&(c[h[d]]=o[h[d]]);return c};e.__esModule=!0,e.dictionaryVoicing=e.dictionaryVoicingFinder=e.triads=e.guidetones=e.lefthand=void 0;var s=Lx(),r=Nk();e.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},e.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},e.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var i=function(o){return function(u,c){return(0,r.voicingsInRange)(u,o,c)}};e.dictionaryVoicingFinder=i;var a=function(o){var u=o.dictionary,c=o.range,h=n(o,["dictionary","range"]);return(0,s.getBestVoicing)(t(t({},h),{range:c,finder:(0,e.dictionaryVoicingFinder)(u)}))};e.dictionaryVoicing=a})(ti)),ti}var cr={},zl;function Tk(){if(zl)return cr;zl=1,cr.__esModule=!0,cr.minTopNoteDiff=void 0;var e=Ex;function t(n,s){if(!s)return n[0];var r=function(i){return Math.abs(e.Note.midi(s[s.length-1])-e.Note.midi(i[i.length-1]))};return n.reduce(function(i,a){return r(a)<r(i)?a:i},n[0])}return cr.minTopNoteDiff=t,cr}var Bl;function Ik(){return Bl||(Bl=1,(function(e){e.__esModule=!0;var t=kx(),n=Tk(),s=Lx(),r=Rx();e.default={tokenizeChord:r.tokenizeChord,getBestVoicing:s.getBestVoicing,dictionaryVoicing:t.dictionaryVoicing,dictionaryVoicingFinder:t.dictionaryVoicingFinder,lefthand:t.lefthand,guidetones:t.guidetones,triads:t.triads,minTopNoteDiff:n.minTopNoteDiff}})(Ll)),Ll}var Yk=Ik();const Wl=M3(Yk),os={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},Ls={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:Hk,minTopNoteDiff:Kk}=Wl.default||Wl,_k={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},jk={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},Uk={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},Jk={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},qs={lefthand:{dictionary:_k,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:Uk,mode:"below",anchor:"a4"},guidetones:{dictionary:jk,mode:"above",anchor:"a4"},legacy:{dictionary:Jk,mode:"below",anchor:"a4"}};let Vx="ireal";const zx=e=>Vx=e,Ok=(e,t)=>Bx(e,qs[e].dictionary,t),Bx=(e,t,n=["F3","A4"])=>{Object.assign(qs,{[e]:{dictionary:t,range:n}})},_u=(e,t,n={})=>{Object.assign(qs,{[e]:{dictionary:t,...n}})},Qk=(e,t,n)=>{const{dictionary:s,range:r}=qs[t];return Hk({chord:e,dictionary:s,range:r,picker:Kk,lastVoicing:n})};let ai;const qk=R("voicings",function(e,t){return t.fmap(n=>(ai=Qk(n,e,ai),Te(...ai))).outerJoin()}),$k=R("rootNotes",function(e,t){return t.fmap(n=>{const s=(n.chord||n).match(/^([a-gA-G][b#]?).*$/)[1]+e;return n.chord?{note:s}:s})}),eV=R("voicing",function(e){return e.fmap(t=>{t=typeof t=="string"?{chord:t}:t;let{dictionary:n=Vx,chord:s,anchor:r,offset:i,mode:a,n:o,octaves:u,...c}=t;n=typeof n=="string"?qs[n]:{dictionary:n,mode:"below",anchor:"c5"};try{let h=Ak({...n,chord:s,anchor:r,offset:i,mode:a,n:o,octaves:u});return Te(...h).note().set(c)}catch{return yt(`[voicing]: unknown chord "${s}"`),Ye}}).outerJoin()});function mr(e,t,n){n=Array.isArray(n)?n:[n],n.forEach(s=>{s[t]=s[e]})}mr("^","",[os,Ls]);Object.keys(os).forEach(e=>{if(e.includes("-")){let t=e.replace("-","m");mr(e,t,[Ls,os])}if(e.includes("^")){let t=e.replace("^","M");mr(e,t,[Ls,os])}if(e.includes("+")){let t=e.replace("+","aug");mr(e,t,[Ls,os])}});_u("ireal",os);_u("ireal-ext",Ls);function tV(){ai=void 0,zx("ireal")}const nV="@strudel/tonal",sV=Object.freeze(Object.defineProperty({__proto__:null,addVoicings:Bx,complex:Ls,packageName:nV,registerVoicings:_u,resetVoicings:tV,rootNotes:$k,scale:Wk,scaleTrans:kk,scaleTranspose:Rk,setDefaultVoicings:zx,setVoicingRange:Ok,simple:os,strans:Vk,trans:Ek,transpose:Lk,voicing:eV,voicingAlias:mr,voicingRegistry:qs,voicings:qk},Symbol.toStringTag,{value:"Module"}));async function rV(){const e=oi(oi,Promise.resolve().then(()=>CM),Promise.resolve().then(()=>TD),Promise.resolve().then(()=>sV),Promise.resolve().then(()=>RD),{hush:Nx,evaluate:iV});await Promise.all([e,g2()])}let co,hs;function Wx(e={}){d2(),e.miniAllStrings!==!1&&V2();const{prebake:t,...n}=e;return hs=Z2({...n,transpiler:US}),co=(async()=>(await rV(),await t?.(),hs))(),ui(()=>hs.scheduler.now()),co}window.initStrudel=Wx;H.prototype.play=function(){if(!hs)throw new Error(".play: no repl found. Have you called initStrudel?");return co.then(()=>{hs.setPattern(this,!0)}),this};function Nx(){hs.stop()}async function iV(e,t=!0){return hs.evaluate(e,t)}class aV{constructor(){this.initialized=!1,this.currentMusic=null}init(){if(this.initialized)return!0;try{return Wx(),this.initialized=!0,console.log("[Audio] Strudel initialized"),!0}catch(t){return console.warn("[Audio] Strudel init failed:",t),!1}}playTrack(t){!this.initialized&&!this.init()||(this.stop(),setTimeout(()=>{try{this.currentMusic=t(),console.log("[Audio] Playing track")}catch(n){console.warn("[Audio] Track error:",n)}},100))}stop(){try{Nx()}catch{}this.currentMusic=null}}const Tx=new aV;function oV(){return Te(es("bd*2, ~ sd, hh*8").bank("RolandTR808").gain(.8).lpf(2e3),At("<a1 c2 d2 e2>*2").s("sawtooth").lpf(400).decay(.2).sustain(0).gain(.6),At("a4 c5 d5 e5 g5 e5 d5 c5").slow(2).s("sine").delay(.3).delaytime(.25).lpf(1500).gain(.3)).cpm(75).play()}function uV(){return Te(es("bd [~ bd] sd ~, [hh hh:1]*4").bank("RolandTR808").gain(.7).lpf(1800),At("<d1 [d1 f1] g1 a1>").s("square").lpf(200).decay(.3).sustain(.1).gain(.5),At("<d3,f3,a3> <a3,c4,e4>").slow(4).s("sine").attack(.5).decay(2).lpf(800).gain(.2)).cpm(68).play()}function cV(){return Te(es("[bd ~] [~ bd] sd ~, hh*8").bank("RolandTR909").gain(.8).lpf(2500),At("e2 g2 a2 b2 d3 b2 a2 g2").slow(2).s("sawtooth").lpf(500).decay(.15).sustain(0).gain(.5),At("[e4 g4] [a4 ~] [b4 d5] [~ e5]").s("triangle").decay(.1).sustain(0).delay(.25).delaytime(.25).lpf(2e3).gain(.35)).cpm(82).play()}function lV(){return Te(es("bd ~ ~ bd, ~ sd ~ sd:1, hh*16").bank("RolandTR808").gain(.75).lpf(1600),At("<g1 [~ g1] bb1 c2>").s("sine").lpf(300).decay(.4).sustain(.2).gain(.6),At("g4 bb4 c5 d5 f5 d5 c5 bb4").fast(2).s("sine").decay(.08).sustain(0).delay(.5).delaytime(.125).lpf(1200).gain(.25)).cpm(70).play()}function pV(){return Te(es("[bd bd:1] sd, oh*2, hh*8").bank("RolandTR808").gain(.75).lpf(2200),At("c2 c2 eb2 ~ g2 ~ eb2 c2").slow(2).s("square").lpf(350).decay(.2).sustain(0).gain(.5),At("<c4 eb4 f4 g4 bb4>*2").s("triangle").lpf(1800).decay(.15).sustain(.1).delay(.3).gain(.3),At("<c3,eb3,g3>").slow(4).s("sine").attack(1).decay(3).sustain(.2).gain(.15)).cpm(78).play()}function hV(){return Te(es("bd ~ [~ bd] ~, ~ [sd ~] ~ sd, hh*4").bank("RolandTR808").gain(.7).lpf(1400).room(.4),At("<f1 ab1 c2 eb2>").slow(2).s("sawtooth").lpf(250).decay(.5).sustain(.1).gain(.55),At("f4 ~ ab4 ~ c5 ~ ab4 f4").slow(2).s("sine").attack(.1).decay(.3).sustain(.2).delay(.4).delaytime(.5).lpf(900).gain(.25)).cpm(65).play()}const Ix=[{id:1,title:"Jade Garden",chinese:"翡翠花园",bpm:75,key:"Am",pattern:oV},{id:2,title:"Temple Fog",chinese:"寺院晨雾",bpm:68,key:"Dm",pattern:uV},{id:3,title:"Silk Road",chinese:"丝绸之路",bpm:82,key:"Em",pattern:cV},{id:4,title:"Bamboo Rain",chinese:"竹林听雨",bpm:70,key:"Gm",pattern:lV},{id:5,title:"Dragon Tea",chinese:"龙井茶",bpm:78,key:"Cm",pattern:pV},{id:6,title:"Moon Gate",chinese:"月亮门",bpm:65,key:"Fm",pattern:hV}];let Mi=null;const Nl=document.getElementById("tracks"),Yx='<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>',dV='<svg viewBox="0 0 24 24"><rect x="6" y="6" width="12" height="12"/></svg>';function mV(){Nl.innerHTML=Ix.map((e,t)=>`
    <div class="track" data-id="${e.id}">
      <div class="track-header">
        <div style="display: flex; align-items: center;">
          <span class="track-number">0${e.id}</span>
          <span class="track-title">${e.title}</span>
          <span class="track-title-cn">${e.chinese}</span>
        </div>
        <button class="play-btn">${Yx}</button>
      </div>
      <div class="track-meta">
        <span>${e.bpm} BPM</span>
        <span>${e.key}</span>
        <span>Pentatonic</span>
      </div>
    </div>
  `).join(""),Nl.querySelectorAll(".track").forEach(e=>{e.addEventListener("click",t=>{const n=parseInt(e.dataset.id);fV(n)})})}function fV(e){const t=Ix.find(n=>n.id===e);if(Mi===e){Tl();return}Tl(),Mi=e,Hx(),Tx.playTrack(t.pattern)}function Tl(){Tx.stop(),Mi=null,Hx()}function Hx(){document.querySelectorAll(".track").forEach(e=>{const n=parseInt(e.dataset.id)===Mi;e.classList.toggle("playing",n),e.querySelector(".play-btn").innerHTML=n?dV:Yx})}mV();
